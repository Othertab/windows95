'use strict';var m;Object.freeze(["shared","exclusive","unlock"]);
function aa(a,b,c){this.h=a;this.A=c;this.C=[104,111,115,116,57,112];this.F=this.C.length;this.D="9P2000.L";this.j=this.o=8192;this.i=new Uint8Array(2*this.j);this.B=0;this.g=[];this.Wa=new ba(b,{name:"virtio-9p",Ba:48,ue:4169,tg:9,te:{Oc:43008,Ta:[{Cc:32,Zd:0}],Gf:[0,32,29,28],Wj:()=>{}},notification:{Oc:43264,$i:!1,bh:[d=>{if(0===d){for(;ca(this.l);){d=this.l;ca(d);var e=d.s.Ga(d.h+4+2*d.j);e=new da(d,e);d.j=d.j+1&d.o;d=e;fa(this,d)}d=this.l;e=d.s.Ga(d.h+2)+0&65535;d.s.oe(d.g+4+8*d.size,e)}}]},
Ub:{Oc:42752},Cf:{Oc:42496,hd:[{bytes:2,name:"mount tag length",read:()=>this.F,write:()=>{}}].concat(Array.from(Array(254).keys()).map(d=>({bytes:1,name:"mount tag name "+d,read:()=>this.C[d]||0,write:()=>{}})))}});this.l=this.Wa.Ta[0]}aa.prototype.V=function(){var a=[];a[0]=this.C;a[1]=this.F;a[2]=this.Wa;a[3]=this.D;a[4]=this.o;a[5]=this.j;a[6]=this.i;a[7]=this.B;a[8]=this.g.map(function(b){return[b.T,b.type,b.uid,b.Pb]});a[9]=this.h;return a};
aa.prototype.G=function(a){this.C=a[0];this.F=a[1];this.Wa.G(a[2]);this.l=this.Wa.Ta[0];this.D=a[3];this.o=a[4];this.j=a[5];this.i=a[6];this.B=a[7];this.g=a[8].map(function(b){return{T:b[0],type:b[1],uid:b[2],Pb:b[3]}});this.h.G(a[9])};function t(a,b,c,d){u(["w","b","h"],[d+7,b+1,c],a.i,0);a.B=d+7}function ha(a,b,c){c=u(["w"],[c],a.i,7);t(a,6,b,c)}
function B(a,b){for(var c=a.i.subarray(0,a.B),d=0,e=c.length;e&&b.uf!==b.vf.length;){var f=b.vf[b.uf];const k=f.Se+b.pe;f=f.Ae-b.pe;f>e?(f=e,b.pe+=e):(b.uf++,b.pe=0);ia(b.s,c.subarray(d,d+f),k);d+=f;e-=f}b.af+=d;c=a.l;d=c.s.Ga(c.g+2)+c.i&c.o;e=b.af;c.s.Dc(c.g+4+8*d,b.eh);c.s.Dc(c.g+8+8*d,e);c.i++;a=a.l;0!==a.i&&(b=a.s.Ga(a.g+2)+a.i&65535,a.s.oe(a.g+2,b),a.i=0,0<(a.Wa.h[0]&536870912)?(a.s.Ga(a.h+4+2*a.size),a.Wa.wa(1)):~a.s.Ga(a.h)&1&&a.Wa.wa(1))}
async function fa(a,b){var c=new Uint8Array(b.$e);ja(b,c);var d={offset:0},e=C(["w","b","h"],c,d),f=e[0],k=e[1],g=e[2];switch(k){case 8:f=ka(a.h);var h=la(a.h);e=[16914839];e[1]=a.o;e[2]=Math.floor(h/e[1]);e[3]=e[2]-Math.floor(f/e[1]);e[4]=e[2]-Math.floor(f/e[1]);e[5]=ma(a.h);e[6]=na(a.h);e[7]=0;e[8]=256;f=u("wwddddddw".split(""),e,a.i,7);t(a,k,g,f);B(a,b);break;case 112:case 12:e=C(["w","w"],c,d);f=e[0];d=e[1];c=a.g[f].T;var l=H(a.h,c);h=oa(a.h,c,d);pa(a.h,a.g[f].T,function(){var n=[];n[0]=l.sa;
n[1]=this.j-24;u(["Q","w"],n,this.i,7);t(this,k,g,17);B(this,b)}.bind(a));break;case 70:e=C(["w","w","s"],c,d);c=e[0];f=e[1];h=e[2];h=qa(a.h,a.g[c].T,a.g[f].T,h);if(0>h){ha(a,g,-h);B(a,b);break}t(a,k,g,0);B(a,b);break;case 16:e=C(["w","s","s","w"],c,d);f=e[0];h=e[1];var p=e[3];c=sa(a.h,h,a.g[f].T,e[2]);l=H(a.h,c);l.uid=a.g[f].uid;l.za=p;u(["Q"],[l.sa],a.i,7);t(a,k,g,13);B(a,b);break;case 18:e=C("wswwww".split(""),c,d);f=e[0];h=e[1];d=e[2];c=e[3];var q=e[4];p=e[5];c=ta(a.h,h,a.g[f].T,c,q);l=H(a.h,
c);l.mode=d;l.uid=a.g[f].uid;l.za=p;u(["Q"],[l.sa],a.i,7);t(a,k,g,13);B(a,b);break;case 22:e=C(["w"],c,d);f=e[0];l=H(a.h,a.g[f].T);f=u(["s"],[l.ie],a.i,7);t(a,k,g,f);B(a,b);break;case 72:e=C(["w","s","w","w"],c,d);f=e[0];h=e[1];d=e[2];p=e[3];c=ua(a.h,h,a.g[f].T);l=H(a.h,c);l.mode=d|va;l.uid=a.g[f].uid;l.za=p;u(["Q"],[l.sa],a.i,7);t(a,k,g,13);B(a,b);break;case 14:e=C(["w","s","w","w","w"],c,d);f=e[0];h=e[1];c=e[2];d=e[3];p=e[4];a.A.send("9p-create",[h,a.g[f].T]);c=wa(a.h,h,a.g[f].T);a.g[f].T=c;a.g[f].type=
1;a.g[f].Pb=h;l=H(a.h,c);l.uid=a.g[f].uid;l.za=p;l.mode=d;u(["Q","w"],[l.sa,a.j-24],a.i,7);t(a,k,g,17);B(a,b);break;case 52:e=C("wbwddws".split(""),c,d);f=e[0];c=e[2];h=0===e[4]?Infinity:e[4];e=za(e[1],e[3],h,e[5],e[6]);h=Aa(a.h,a.g[f].T,e,c);u(["b"],[h],a.i,7);t(a,k,g,1);B(a,b);break;case 54:e=C("wbddws".split(""),c,d);f=e[0];h=0===e[3]?Infinity:e[3];e=za(e[1],e[2],h,e[4],e[5]);h=Ba(a.h,a.g[f].T,e);h||(h=e,h.type=2);f=u(["b","d","d","w","s"],[h.type,h.start,Infinity===h.length?0:h.length,h.h,h.g],
a.i,7);t(a,k,g,f);B(a,b);break;case 24:e=C(["w","d"],c,d);f=e[0];l=H(a.h,a.g[f].T);if(!l||l.status===Ca){ha(a,g,2);B(a,b);break}e[0]|=4096;e[0]=e[1];e[1]=l.sa;e[2]=l.mode;e[3]=l.uid;e[4]=l.za;e[5]=l.Oa;e[6]=l.Be<<8|l.Ce;e[7]=l.size;e[8]=a.o;e[9]=Math.floor(l.size/512+1);e[10]=l.Hc;e[11]=0;e[12]=l.Wb;e[13]=0;e[14]=l.ud;e[15]=0;e[16]=0;e[17]=0;e[18]=0;e[19]=0;u("dQwwwddddddddddddddd".split(""),e,a.i,7);t(a,k,g,153);B(a,b);break;case 26:e=C("wwwwwddddd".split(""),c,d);f=e[0];l=H(a.h,a.g[f].T);e[1]&1&&
(l.mode=e[2]);e[1]&2&&(l.uid=e[3]);e[1]&4&&(l.za=e[4]);e[1]&16&&(l.Hc=Math.floor((new Date).getTime()/1E3));e[1]&32&&(l.Wb=Math.floor((new Date).getTime()/1E3));e[1]&64&&(l.ud=Math.floor((new Date).getTime()/1E3));e[1]&128&&(l.Hc=e[6]);e[1]&256&&(l.Wb=e[8]);e[1]&8&&await Da(a.h,a.g[f].T,e[5]);t(a,k,g,0);B(a,b);break;case 50:e=C(["w","d"],c,d);f=e[0];t(a,k,g,0);B(a,b);break;case 40:case 116:e=C(["w","d","w"],c,d);f=e[0];h=e[1];p=e[2];l=H(a.h,a.g[f].T);if(!l||l.status===Ca){ha(a,g,2);B(a,b);break}if(2==
a.g[f].type)for((void 0).length<h+p&&(p=(void 0).length-h),e=0;e<p;e++)a.i[11+e]=(void 0)[h+e];else oa(a.h,a.g[f].T,void 0),e=a.g[f].T,l.size<h+p?p=l.size-h:40==k&&(p=Ea(a.h,e,h+p)-h),h>l.size&&(p=0),a.A.send("9p-read-start",[a.g[f].Pb]),e=await Fa(a.h,e,h,p),a.A.send("9p-read-end",[a.g[f].Pb,p]),e&&a.i.set(e,11);u(["w"],[p],a.i,7);t(a,k,g,4+p);B(a,b);break;case 118:e=C(["w","d","w"],c,d);f=e[0];h=e[1];p=e[2];e=a.g[f].Pb;if(2===a.g[f].type){ha(a,g,95);B(a,b);break}else await Ga(a.h,a.g[f].T,h,p,c.subarray(d.offset));
a.A.send("9p-write-end",[e,p]);u(["w"],[p],a.i,7);t(a,k,g,4);B(a,b);break;case 74:e=C(["w","s","w","s"],c,d);h=await Ha(a.h,a.g[e[0]].T,e[1],a.g[e[2]].T,e[3]);if(0>h){ha(a,g,-h);B(a,b);break}t(a,k,g,0);B(a,b);break;case 76:e=C(["w","s","w"],c,d);d=e[0];h=e[1];c=e[2];f=Ia(a.h,a.g[d].T,h);if(-1==f){ha(a,g,2);B(a,b);break}h=Ja(a.h,a.g[d].T,h);if(0>h){ha(a,g,-h);B(a,b);break}t(a,k,g,0);B(a,b);break;case 100:f=C(["w","s"],c,d);a.j=f[0];f=u(["w","s"],[a.j,a.D],a.i,7);t(a,k,g,f);B(a,b);break;case 104:e=
C(["w","w","s","s","w"],c,d);f=e[0];a.g[f]={T:0,type:1,uid:e[4],Pb:""};l=H(a.h,a.g[f].T);u(["Q"],[l.sa],a.i,7);t(a,k,g,13);B(a,b);break;case 108:e=C(["h"],c,d);t(a,k,g,0);B(a,b);break;case 110:e=C(["w","w","h"],c,d);f=e[0];p=e[1];q=e[2];if(0==q){a.g[p]={T:a.g[f].T,type:1,uid:a.g[f].uid,Pb:a.g[f].Pb};u(["h"],[0],a.i,7);t(a,k,g,2);B(a,b);break}h=[];for(e=0;e<q;e++)h.push("s");d=C(h,c,d);c=a.g[f].T;h=9;var v=0;for(e=0;e<q;e++){c=Ia(a.h,c,d[e]);if(-1==c)break;h+=u(["Q"],[H(a.h,c).sa],a.i,h);v++;a.g[p]=
{T:c,type:1,uid:a.g[f].uid,Pb:d[e]}}u(["h"],[v],a.i,7);t(a,k,g,h-7);B(a,b);break;case 120:e=C(["w"],c,d);a.g[e[0]]&&0<=a.g[e[0]].T&&(await Ka(a.h,a.g[e[0]].T),a.g[e[0]].T=-1,a.g[e[0]].type=-1);t(a,k,g,0);B(a,b);break;case 32:e=C(["w","s","d","w"],c,d);f=e[0];h=e[1];c=e[3];a.g[f].type=2;t(a,k,g,0);B(a,b);break;case 30:e=C(["w","w","s"],c,d),f=e[0],h=e[2],ha(a,g,95),B(a,b)}};function La(a,b){function c(w){w=w.toString(16);w=ve("#"+Array(7-w.length).join("0")+w);return w=w[0]==w[2]||w[1]==w[2]||w[0]==w[1]&&0==w[0]&&85<w[2]?"rgb("+w[0]+", "+w[1]+", "+w[2]+")":"rgb("+w[0]+85+", "+w[1]+85+", "+w[2]+")"}function d(){var w=e,E=n,W=r;w.style.width="";w.style.height="";var Z=w.getBoundingClientRect();0===E%1&&0===W%1?(e.style.imageRendering="crisp-edges",e.style.imageRendering="pixelated",e.style["-ms-interpolation-mode"]="nearest-neighbor"):(e.style.Rj="",e.style["-ms-interpolation-mode"]=
"");var ea=window.devicePixelRatio||1;0!==ea%1&&(E/=ea,W/=ea);1!==E&&(w.style.width=Z.width*E+"px");1!==W&&(w.style.height=Z.height*W+"px");F||(e.style.width=720*n+"px",e.style.height=400*r+"px",e.width=720*n,e.height=400*r,K=15*r);F&&320==e.width&&400==e.height?(e.style.width=640*n+"px",e.style.height=400*r+"px"):F&&320==e.width&&200==e.height?(e.style.width=640*n+"px",e.style.height=400*r+"px"):F&&(e.width=z,e.height=D,e.style.width=z*n+"px",e.style.height=D*r+"px")}console.assert(a,"1st argument must be a DOM container");
var e=a.getElementsByTagName("canvas")[0],f=e.getContext("2d",{alpha:!1}),k,g,h,l,p,q,v,n=1,r=1,y=[0,0,"#000000"],z,D,K=15,M,F=!1,x,G,R,xa=!1,rb=this;const ve=w=>w.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(E,W,Z,ea)=>"#"+W+W+Z+Z+ea+ea).substring(1).match(/.{2}/g).map(E=>parseInt(E,16));a=new Uint16Array([199,252,233,226,228,224,229,231,234,235,232,239,238,236,196,197,201,230,198,244,246,242,251,249,255,214,220,162,163,165,8359,402,225,237,243,250,241,209,170,186,191,8976,172,189,188,161,171,187,
9617,9618,9619,9474,9508,9569,9570,9558,9557,9571,9553,9559,9565,9564,9563,9488,9492,9524,9516,9500,9472,9532,9566,9567,9562,9556,9577,9574,9568,9552,9580,9575,9576,9572,9573,9561,9560,9554,9555,9579,9578,9496,9484,9608,9604,9612,9616,9600,945,223,915,960,931,963,181,964,934,920,937,948,8734,966,949,8745,8801,177,8805,8804,8992,8993,247,8776,176,8729,183,8730,8319,178,9632,160]);for(var we=new Uint16Array([32,9786,9787,9829,9830,9827,9824,8226,9688,9675,9689,9794,9792,9834,9835,9788,9658,9668,8597,
8252,182,167,9644,8616,8593,8595,8594,8592,8735,8596,9650,9660]),A=[],Wc,ra=0;256>ra;ra++)Wc=127<ra?a[ra-128]:32>ra?we[ra]:ra,A[ra]=String.fromCharCode(Wc);A[128]="\u0410";A[129]="\u0411";A[130]="\u0412";A[131]="\u0413";A[132]="\u0414";A[133]="\u0415";A[134]="\u0416";A[135]="\u0417";A[136]="\u0418";A[137]="\u0419";A[138]="\u041a";A[139]="\u041b";A[140]="\u041c";A[141]="\u041d";A[142]="\u041e";A[143]="\u041f";A[144]="\u0420";A[145]="\u0421";A[146]="\u0422";A[147]="\u0423";A[148]="\u0424";A[149]="\u0425";
A[150]="\u0426";A[151]="\u0427";A[152]="\u0428";A[153]="\u0429";A[154]="\u042a";A[155]="\u042b";A[156]="\u042c";A[157]="\u042d";A[158]="\u042e";A[159]="\u042f";A[160]="\u0430";A[161]="\u0431";A[162]="\u0432";A[163]="\u0433";A[164]="\u0434";A[165]="\u0435";A[166]="\u0436";A[167]="\u0437";A[168]="\u0438";A[169]="\u0439";A[170]="\u043a";A[171]="\u043b";A[172]="\u043c";A[173]="\u043d";A[174]="\u043e";A[175]="\u043f";A[224]="\u0440";A[225]="\u0441";A[226]="\u0442";A[227]="\u0443";A[228]="\u0444";A[229]=
"\u0445";A[230]="\u0446";A[231]="\u0447";A[232]="\u0448";A[233]="\u0449";A[234]="\u044a";A[235]="\u044b";A[236]="\u044c";A[237]="\u044d";A[238]="\u044e";A[239]="\u044f";A[240]="\u0401";A[241]="\u0451";f.imageSmoothingEnabled=!1;e.style.display="block";this.A=b;b.register("screen-set-mode",function(w){this.lf(w)},this);b.register("screen-fill-buffer-end",function(w){this.sf(w)},this);b.register("screen-put-char",function(w){this.gf(w[0],w[1],w[2],w[3],w[4])},this);b.register("screen-update-cursor",
function(w){this.kd(w[0],w[1])},this);b.register("screen-update-cursor-scanline",function(){this.ld()},this);b.register("screen-clear",function(){this.zf()},this);b.register("screen-set-size-text",function(w){this.fd(w[0],w[1])},this);b.register("screen-set-size-graphical",function(w){this.ed(w[0],w[1],w[2],w[3])},this);this.yb=function(){this.fd(80,25);this.lb()};this.lh=function(){try{const w=new Image;w.src=e.toDataURL("image/png");window.open("").document.write(w.outerHTML)}catch(w){}};this.gf=
function(w,E,W,Z,ea){w<R&&E<G&&(E=3*(w*G+E),x[E]=W,x[E+1]=Z,x[E+2]=ea,M[w]=1)};this.lb=function(){xa||requestAnimationFrame(F?xe:ye)};var ye=function(){for(var w=0;w<R;w++)M[w]&&(rb.g(w),M[w]=0);this.lb()}.bind(this),xe=function(){this.A.send("screen-fill-buffer");this.lb()}.bind(this);this.Ea=function(){xa=!0};this.lf=function(w){(F=w)?(e.style.display="block",e.style.width=z*n,e.style.height=D*r,d()):(e.style.display="block",e.width=720,e.height=400,e.style.width=720*n+"px",e.style.height=400*r+
"px")};this.zf=function(){f.fillStyle="#000";f.fillRect(0,0,e.width,e.height)};this.fd=function(w,E){if(w!==G||E!==R)for(M=new Int8Array(E),x=new Int32Array(w*E*3),G=w,R=E,w=0;w<E;w++)this.g(w)};this.ed=function(w,E,W,Z){e.style.display="block";e.width=w;e.height=E;e.style.width=w*n+"px";e.style.height=E*r+"px";k=f.createImageData(W,Z);new Uint8Array(k.data.buffer);g=new Int32Array(k.data.buffer);z=w;D=E;this.A.send("screen-tell-buffer",[g],[g.buffer]);d()};this.mf=function(w,E){n=w;r=E;d()};this.mf(n,
r);this.ld=function(){};this.kd=function(w,E){if(w!==h||E!==l)M[w]=1,M[h]=1,h=w,l=E};setInterval(function(){F||(v=!v,f.font="bold "+K+"px bold Liberation Mono, DejaVu Sans Mono, Courier New, monospace",f.fillStyle=v?q:p,f.fillRect((9*l-1)*n,(16*h+14)*r,9*n,2*r))},500);this.g=function(w){for(var E=3*w*G,W,Z,ea,Xc,ya=0;ya<G;)for(W=x[E+1],Z=x[E+2];ya<G&&x[E+1]===W&&x[E+2]===Z;){var Yc=x[E];f.fillStyle=ea=c(W);f.fillRect(9*ya*n,16*w*r,9*A[Yc].length*n,16*r);f.font="bold "+K+"px bold Liberation Mono, DejaVu Sans Mono, Courier New, monospace";
f.fillStyle=Xc=c(Z);f.fillText(A[Yc],9*ya*n,(16*w+12)*r);f.fillStyle=v?q:p;f.fillRect((9*l-1)*n,(16*h+14)*r,9*n,2*r);if(y[0]!==h||y[1]!==l)f.fillStyle=y[2],f.fillRect((9*y[1]-1)*n,(16*y[0]+14)*r,9*n,2*r),y=[h,l,p];ya++;E+=3;if(w===h&&(ya===l||ya===l+1)){p=ea;q=Xc;break}}};this.sf=function(w){w.forEach(E=>{f.putImageData(k,E.ge-E.qd,E.he-E.rd,E.qd,E.rd,E.Md,E.Ld)})};this.yb()};(function(){function a(){for(var q=location.search.substr(1).split("&"),v={},n=0;n<q.length;n++){var r=q[n].split("=");v[r[0]]=decodeURIComponent(r.slice(1).join("="))}return v}function b(q,v){for(var n="";0<v--;)n+=q;return n}function c(q){return document.getElementById(q)}function d(){function q(F){c("boot_options").style.display="none";F.state&&(c("reset").style.display="none",r.Pc=F.state);r.ab=F.ab;r.Cd=F.Cd;r.Ec=!1;r.la=F.la;r.oa=F.oa;r.id=F.id;void 0!==F.Ic&&(r.Ic=F.Ic);e(r,v)}function v(F){y.c&&
setTimeout(function(){Ma(F,y.c+"\n")},25)}if(window.WebAssembly){var n=document.createElement("script");n.src="build/xterm.js";n.async=!0;document.body.appendChild(n);var r={};c("start_emulation").onclick=function(){c("boot_options").style.display="none";h("custom");var F=c("hda_image").files[0];F&&(r.ab={buffer:F});e(r)};n=[{id:"windows95",la:33554432,ab:{url:"windows95_out/windows95.img",size:1073741824,async:!0,step:4096,Qe:!0},name:"Windows 95",state:{url:"windows95_state.bin.zst"},Ic:291},{id:"windows95-boot",
la:33554432,ab:{url:"windows95_out/windows95.img",size:1073741824,async:!0,step:4096,Qe:!0},name:"Windows 95",Ic:291}];var y=a(),z=y.profile;if(!z){var D=document.createElement("link");D.rel="prefetch";D.href="build/v86.wasm";document.head.appendChild(D)}y.use_bochs_bios&&(r.fj=!0);for(D=0;D<n.length;D++){var K=n[D];if(z===K.id){q(K);break}var M=c("start_"+K.id);M&&(M.onclick=function(F,x,G){G.preventDefault();h(F.id);x.blur();q(F)}.bind(this,K,M))}}else alert("Your browser is not supported because it doesn't support WebAssembly")}
function e(q,v){var n=q.la;n||(n=1048576*parseInt(c("memory_size").value,10),n||(alert("Invalid memory size - reset to 128MB"),n=134217728));var r=q.oa;r||(r=1048576*parseInt(c("video_memory_size").value,10),r||(alert("Invalid video memory size - reset to 8MB"),r=8388608));if(!q.we){var y=c("floppy_image").files[0];y&&(q.we={buffer:y})}y=c("networking_proxy").value;if(q.fj)var z="bochs-bios.bin",D="bochs-vgabios.bin";else z="seabios.bin",D="vgabios.bin";if(!q.Pc){var K={url:"bios/"+z};var M={url:"bios/"+
D}}var F=new Na({memory_size:n,vga_memory_size:r,screen_container:c("screen_container"),boot_order:q.Ic||parseInt(c("boot_order").value,16)||0,network_relay_url:l?"ws://localhost:8080/":y,bios:K,vga_bios:M,hda:q.ab,acpi:!1,initial_state:q.Pc,disable_speaker:!1,preserve_mac_from_state_image:q.Cd,autostart:!0});Oa(F,"emulator-ready",function(){if(F.h.s.ra.exports.profiler_is_enabled()){var x=document.createElement("pre");document.body.appendChild(x);setInterval(function(){if(F.Od){var G=Pa.aj(F.h.s);
x.textContent=G}},1E3)}"dsl"===q.id?setTimeout(()=>{Ma(F,"\n")},3E3):"android"==q.id&&setTimeout(()=>{Qa(F,[57424,57552]);Ma(F,"\n")},3E3);f(q,F);v&&v(F)});Oa(F,"download-progress",function(x){var G=c("loading");G.style.display="block";if(x.Wd.endsWith(".wasm")){var R=x.Wd.split("/");G.textContent="Loading "+R[R.length-1]+" ..."}else if(x.Vd===x.Ud-1&&x.loaded>=x.total-2048)G.textContent="Done loading. Starting now ...";else{R="Loading images ";"number"===typeof x.Vd&&x.Ud&&(R+="["+(x.Vd+1)+"/"+x.Ud+
"] ");if(x.total&&"number"===typeof x.loaded){x=Math.floor(x.loaded/x.total*100);x=Math.min(100,Math.max(0,x));var xa=Math.floor(x/2);R=R+(x+"% [")+b("\u2588",xa);R+=b(" ",50-xa)+"]"}else R+=b(".",p++%50);G.textContent=R}});Oa(F,"download-error",function(x){var G=c("loading");G.style.display="block";G.textContent="Loading "+x.Wd+" failed. Check your connection and reload the page to try again."})}function f(q,v){function n(){var x=Date.now(),G=v.h?v.h.s.gh[0]>>>0:0;G<D&&(D-=4294967296);var R=G-D;
D=G;G=x-z;z=x;c("speed").textContent=(R/1E3/G).toFixed(1)}function r(x){x.ctrlKey?window.onbeforeunload=function(){window.onbeforeunload=null;return"CTRL-W cannot be sent to the emulator."}:window.onbeforeunload=null}c("boot_options").style.display="none";c("loading").style.display="none";c("runtime_options").style.display="block";c("runtime_infos").style.display="block";c("screen_container").style.display="block";q.filesystem&&k(v);c("run").onclick=function(){v.Od?(c("run").value="Run",v.stop()):
(c("run").value="Pause",v.Me());c("run").blur()};c("exit").onclick=function(){v.stop();location.href=location.pathname};c("lock_mouse").onclick=function(){if(!y)c("toggle_mouse").onclick();Ra();c("lock_mouse").blur()};var y=!0;c("toggle_mouse").onclick=function(){y=!y;v.i&&(v.i.ve=y);c("toggle_mouse").value=(y?"Dis":"En")+"able mouse";c("toggle_mouse").blur()};var z=0,D=0,K=null,M=!1;Oa(v,"emulator-started",function(){z=Date.now();K=setInterval(n,1E3)});Oa(v,"emulator-stopped",function(){n();null!==
K&&clearInterval(K)});Oa(v,"ide-read-start",function(){c("info_storage").style.display="block";c("info_storage_status").textContent="Loading ..."});Oa(v,"ide-read-end",function(){c("info_storage_status").textContent="Idle"});Oa(v,"mouse-enable",function(x){M=x});Oa(v,"screen-set-mode",function(x){x?c("info_vga_mode").textContent="Graphical":(c("info_vga_mode").textContent="Text",c("info_res").textContent="-",c("info_bpp").textContent="-")});Oa(v,"screen-set-size-graphical",function(x){320==x[0]&&
(400==x[1]?x[0]=640:200==x[1]&&(x[0]=640,x[1]=400));c("info_res").textContent=x[0]+"x"+x[1];c("info_bpp").textContent=x[4]});c("reset").onclick=function(){v.jf();c("reset").blur()};c("save_state").onclick=function(){v.fe(function(x,G){x?(console.log(x.stack),console.log("Couldn't save state: ",x)):Sa(G,"v86state.bin")});c("save_state").blur()};c("load_state").onclick=function(){c("load_state_input").click();c("load_state").blur()};c("load_state_input").onchange=function(){var x=this.files[0];if(x){var G=
v.Od;G&&v.stop();var R=new FileReader;R.onload=function(xa){try{v.Gd(xa.target.result)}catch(rb){throw alert("Something bad happened while restoring the state:\n"+rb+"\n\nNote that the current configuration must be the same as the original"),rb;}G&&v.Me()};R.readAsArrayBuffer(x);this.value=""}};c("ctrlaltdel").onclick=function(){Qa(v,[29,56,83,157,184,211]);c("ctrlaltdel").blur()};c("scale").onchange=function(){var x=parseFloat(this.value);(x||0<x)&&v.g&&v.g.mf(x,x)};c("fullscreen").onclick=function(){if(v.g){var x=
document.getElementById("screen_container");if(x){var G=x.requestFullScreen||x.webkitRequestFullscreen||x.mozRequestFullScreen||x.msRequestFullScreen;G&&(G.call(x),(x=document.getElementsByClassName("phone_keyboard")[0])&&x.focus());Ra()}}};c("screen_container").onclick=function(){if(y&&M)Ra(),c("lock_mouse").blur();else if(window.getSelection().isCollapsed){let x=document.getElementsByClassName("phone_keyboard")[0];x.style.top=document.body.scrollTop+100+"px";x.style.left=document.body.scrollLeft+
100+"px";x.focus()}};const F=document.getElementsByClassName("phone_keyboard")[0];F.setAttribute("autocorrect","off");F.setAttribute("autocapitalize","off");F.setAttribute("spellcheck","false");F.tabIndex=0;c("screen_container").addEventListener("mousedown",x=>{x.preventDefault();F.focus()},!1);c("take_screenshot").onclick=function(){v.g&&v.g.lh();c("take_screenshot").blur()};window.addEventListener("keydown",r,!1);window.addEventListener("keyup",r,!1);window.addEventListener("blur",r,!1)}function k(q){c("filesystem_panel").style.display=
"block";c("filesystem_send_file").onchange=function(){Array.prototype.forEach.call(this.files,function(v){var n=new Ta(v);n.onload=function(){n.Tb(function(r){Ua(q,"/"+v.name,new Uint8Array(r))})};n.load()},this);this.value="";this.blur()};c("filesystem_get_file").onkeypress=function(v){13===v.which&&(this.disabled=!0,q.ee(this.value,function(n,r){this.disabled=!1;r?(n=this.value.replace(/\/$/,"").split("/"),n=n[n.length-1]||"root",Sa(r,n),this.value=""):alert("Can't read file")}.bind(this)))}}function g(){location.reload()}
function h(q){window.history.pushState&&window.history.pushState({profile:q},"","?profile="+q)}var l=!location.hostname.endsWith("copy.sh"),p=0;window.addEventListener("load",d,!1);window.addEventListener("load",function(){setTimeout(function(){window.addEventListener("popstate",g)},0)});"complete"===document.readyState&&d()})();function Va(a){this.ports=[];this.s=a;for(var b=0;65536>b;b++)this.ports[b]=Wa(this);var c=a.la[0];for(b=0;b<<17<c;b++)a.l[b]=a.C[b]=void 0,a.Ja[b]=a.o[b]=void 0;Xa(this,c,4294967296-c,function(){return 255},function(){},function(){return-1},function(){})}function Wa(a){return{Ed:a.Rg,Ga:a.Pg,de:a.Qg,vg:a.Te,oe:a.Te,Dc:a.Te,ha:void 0}}m=Va.prototype;m.Rg=function(){return 255};m.Pg=function(){return 65535};m.Qg=function(){return-1};m.Te=function(){};
function I(a,b,c,d,e,f){d&&(a.ports[b].Ed=d);e&&(a.ports[b].Ga=e);f&&(a.ports[b].de=f);a.ports[b].ha=c}function J(a,b,c,d,e,f){d&&(a.ports[b].vg=d);e&&(a.ports[b].oe=e);f&&(a.ports[b].Dc=f);a.ports[b].ha=c}
m.dd=function(a,b,c,d,e,f){function k(){return c.call(this)|d.call(this)<<8}function g(){return e.call(this)|f.call(this)<<8}function h(){return c.call(this)|d.call(this)<<8|e.call(this)<<16|f.call(this)<<24}e&&f?(I(this,a,b,c,k,h),I(this,a+1,b,d),I(this,a+2,b,e,g),I(this,a+3,b,f)):(I(this,a,b,c,k),I(this,a+1,b,d))};
m.Cb=function(a,b,c,d,e,f){function k(l){c.call(this,l&255);d.call(this,l>>8&255)}function g(l){e.call(this,l&255);f.call(this,l>>8&255)}function h(l){c.call(this,l&255);d.call(this,l>>8&255);e.call(this,l>>16&255);f.call(this,l>>>24)}e&&f?(J(this,a,b,c,k,h),J(this,a+1,b,d),J(this,a+2,b,e,g),J(this,a+3,b,f)):(J(this,a,b,c,k),J(this,a+1,b,d))};m.nh=function(a){var b=this.s.l[a>>>17];return b(a)|b(a+1)<<8|b(a+2)<<16|b(a+3)<<24};
m.oh=function(a,b){var c=this.s.C[a>>>17];c(a,b&255);c(a+1,b>>8&255);c(a+2,b>>16&255);c(a+3,b>>>24)};function Xa(a,b,c,d,e,f,k){f||(f=a.nh.bind(a));k||(k=a.oh.bind(a));for(b>>>=17;0<c;b++)a.s.l[b]=d,a.s.C[b]=e,a.s.Ja[b]=f,a.s.o[b]=k,c-=131072};function Ya(a,b){this.h=this.g=!1;this.s=new Za(a,b);this.A=a;a.register("cpu-init",this.yb,this);a.register("cpu-run",this.Me,this);a.register("cpu-stop",this.stop,this);a.register("cpu-restart",this.jf,this);this.Ui()}m=Ya.prototype;m.Me=function(){this.h=!1;this.g||(this.A.send("emulator-started"),this.Ue())};
function $a(a){if(a.h)a.h=a.g=!1,a.A.send("emulator-stopped");else{a.g=!0;a:{var b=a.s;if(b.h[0]){var c=ab(b);if(b.h[0]){b=c;break a}}for(var d=c=L();1>d-c;){bb(b,d);cb(b);b.cj();if(b.h[0])break;d=L()}b=0}0>=b?a.Ue():a.gj(b)}}m.stop=function(){this.g&&(this.h=!0)};m.Ea=function(){this.ej()};m.jf=function(){this.s.La();db(this.s)};m.yb=function(a){this.s.yb(a,this.A);this.A.send("emulator-ready")};
if("undefined"!==typeof setImmediate)var eb=function(){setImmediate(()=>{$a(this)})},fb=function(){},gb=function(){};else if("undefined"!==typeof window&&"undefined"!==typeof postMessage){eb=function(){window.postMessage(43605,"*")};let a;fb=function(){a=b=>{b.source===window&&43605===b.data&&$a(this)};window.addEventListener("message",a,!1)};gb=function(){window.removeEventListener("message",a);a=null}}else eb=function(){setTimeout(()=>{$a(this)},0)},fb=function(){},gb=function(){};m=Ya.prototype;
m.Ue=eb;m.Ui=fb;m.ej=gb;m.gj="undefined"!==typeof document&&"boolean"===typeof document.hidden?function(a){4>a||document.hidden?this.Ue():setTimeout(()=>{$a(this)},a)}:function(a){setTimeout(()=>{$a(this)},a)};m.fe=function(){return this.s.fe()};m.Gd=function(a){return this.s.Gd(a)};
if("object"===typeof performance&&performance.now)var L=performance.now.bind(performance);else if("function"===typeof require){const {performance:a}=require("perf_hooks");L=a.now.bind(a)}else"object"===typeof process&&process.hrtime?L=function(){var a=process.hrtime();return 1E3*a[0]+a[1]/1E6}:L=Date.now;var Ta,hb,ib,jb,kb,lb,mb,nb;function ob(a,b){return(a||0===a?a+"":"").padEnd(b," ")}function N(a,b,c,d){return new Proxy({},{get:function(e,f){e=new a(b.buffer,c,d);f=e[f];return"function"===typeof f?f.bind(e):f},set:function(e,f,k){(new a(b.buffer,c,d))[f]=k;return!0}})}function O(a,b){a=(a?a.toString(16):"").toUpperCase();return"0x"+(a||0===a?a+"":"").padStart(b||1,"0")}
if("undefined"!==typeof crypto&&crypto.getRandomValues){let a=new Int32Array(1);var pb=function(){crypto.getRandomValues(a);return a[0]}}else if("undefined"!==typeof require){const a=require("crypto");pb=function(){return a.$j(4).readInt32LE(0)}}function qb(a){this.buffer=a;this.byteLength=a.byteLength;this.onload=void 0}m=qb.prototype;m.load=function(){this.onload&&this.onload({buffer:this.buffer})};m.get=function(a,b,c){c(new Uint8Array(this.buffer,a,b))};
m.set=function(a,b,c){(new Uint8Array(this.buffer,a,b.byteLength)).set(b);c()};m.Tb=function(a){a(this.buffer)};m.V=function(){const a=[];a[0]=this.byteLength;a[1]=new Uint8Array(this.buffer);return a};m.G=function(a){this.byteLength=a[0];this.buffer=a[1].slice().buffer};
(function(){if("function"===typeof Math.clz32)hb=function(d){return 31-Math.clz32(d)},ib=function(d){return 31-Math.clz32(d)};else{for(var a=new Int8Array(256),b=0,c=-2;256>b;b++)b&b-1||c++,a[b]=c;hb=function(d){return a[d]};ib=function(d){d>>>=0;var e=d>>>16;if(e){var f=e>>>8;return f?24+a[f]:16+a[e]}return(f=d>>>8)?8+a[f]:a[d]}}})();
function sb(a){var b=new Uint8Array(a),c,d;this.length=0;this.push=function(e){this.length!==a&&this.length++;b[d]=e;d=d+1&a-1};this.shift=function(){if(this.length){var e=b[c];c=c+1&a-1;this.length--;return e}return-1};this.clear=function(){this.length=d=c=0};this.clear()}function tb(){this.size=65536;this.data=new Float32Array(65536);this.length=this.g=this.start=0}
tb.prototype.push=function(a){this.length===this.size?this.start=this.start+1&this.size-1:this.length++;this.data[this.g]=a;this.g=this.g+1&this.size-1};tb.prototype.shift=function(){if(this.length){var a=this.data[this.start];this.start=this.start+1&this.size-1;this.length--;return a}};
function ub(a,b){var c=new Float32Array(b);b>a.length&&(b=a.length);var d=a.start+b,e=a.data.subarray(a.start,d);c.set(e);d>=a.size&&(d-=a.size,c.set(a.data.subarray(0,d),e.length));a.start=d;a.length-=b;return c}tb.prototype.clear=function(){this.length=this.g=this.start=0};
function Sa(a,b){a instanceof Array||(a=[a]);var c=new Blob(a);a=document.createElement("a");a.download=b;a.href=window.URL.createObjectURL(c);a.dataset.downloadurl=["application/octet-stream",a.download,a.href].join(":");document.createEvent?(b=document.createEvent("MouseEvent"),b.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(b)):a.click();window.URL.revokeObjectURL(a.href)}
function vb(a){"number"===typeof a?this.view=new Uint8Array(a+7>>3):a instanceof ArrayBuffer?this.view=new Uint8Array(a):console.assert(!1)}vb.prototype.set=function(a,b){const c=a>>3;a=1<<(a&7);this.view[c]=b?this.view[c]|a:this.view[c]&~a};vb.prototype.get=function(a){return this.view[a>>3]>>(a&7)&1};vb.prototype.Tb=function(){return this.view.buffer};function wb(a,b,c,d,e,f){this.da=new xb(this,a,b,d,e,f);this.ea=new xb(this,a,c,!1,e,f);this.ma=this.da;this.s=a;0===e?(this.g=496,this.X=14,this.Ba=240):1===e&&(this.g=368,this.X=15,this.Ba=248);this.j=this.g|516;this.h=46080;this.I=[134,128,16,112,5,0,160,2,0,128,1,1,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,this.h&255|1,this.h>>8,0,0,0,0,0,0,0,0,0,0,67,16,212,130,0,0,0,0,0,0,0,0,0,0,0,0,this.X,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.bb=[{size:8},{size:4},void 0,void 0,{size:16}];this.name="ide"+e;this.l=2;I(a.v,this.g|7,this,function(){P(this.s,this.X);return this.ng()});I(a.v,this.j|2,this,this.ng);J(a.v,this.j|2,this,this.mj);I(a.v,this.g|0,this,function(){return yb(this.ma,1)},function(){return yb(this.ma,2)},function(){return yb(this.ma,4)});I(a.v,this.g|1,this,function(){return this.ma.error&255});I(a.v,this.g|2,this,function(){return this.ma.Y&
255});I(a.v,this.g|3,this,function(){return this.ma.qa&255});I(a.v,this.g|4,this,function(){return this.ma.ga&255});I(a.v,this.g|5,this,function(){return this.ma.ja&255});I(a.v,this.g|6,this,function(){return this.ma.ec&255});J(a.v,this.g|0,this,function(k){zb(this.ma,k,1)},function(k){zb(this.ma,k,2)},function(k){zb(this.ma,k,4)});J(a.v,this.g|1,this,function(k){this.da.Rc=(this.da.Rc<<8|k)&65535;this.ea.Rc=(this.ea.Rc<<8|k)&65535});J(a.v,this.g|2,this,function(k){this.da.Y=(this.da.Y<<8|k)&65535;
this.ea.Y=(this.ea.Y<<8|k)&65535});J(a.v,this.g|3,this,function(k){this.da.qa=(this.da.qa<<8|k)&65535;this.ea.qa=(this.ea.qa<<8|k)&65535});J(a.v,this.g|4,this,function(k){this.da.ga=(this.da.ga<<8|k)&65535;this.ea.ga=(this.ea.ga<<8|k)&65535});J(a.v,this.g|5,this,function(k){this.da.ja=(this.da.ja<<8|k)&65535;this.ea.ja=(this.ea.ja<<8|k)&65535});J(a.v,this.g|6,this,function(k){this.ma=k&16?this.ea:this.da;this.da.ec=k;this.ea.ec=k;this.da.Ad=this.ea.Ad=k>>6&1;this.da.head=this.ea.head=k&15});this.i=
this.ka=this.cd=0;J(a.v,this.g|7,this,function(k){P(this.s,this.X);var g=this.ma;if(g.buffer)switch(g.o=k,g.error=0,k){case 8:g.i=0;g.g=0;g.h=0;Ab(g);g.O();break;case 16:g.status=80;g.ga=0;g.O();break;case 248:g.status=80;var h=g.j-1;g.qa=h&255;g.ga=h>>8&255;g.ja=h>>16&255;g.ec=g.ec&240|h>>24&15;g.O();break;case 39:g.status=80;h=g.j-1;g.qa=h&255;g.ga=h>>8&255;g.ja=h>>16&255;g.qa|=h>>24<<8&65280;g.O();break;case 32:case 36:case 41:case 196:Bb(g,k);break;case 48:case 52:case 57:case 197:var l=52===
k||57===k;h=Cb(g,l);l=Db(g,l);k=48===k||52===k;h*=g.l;l*=g.l;l+h>g.buffer.byteLength?(g.status=255,g.O()):(g.status=88,Eb(g,h),g.g=k?512:Math.min(h,512*g.J),g.W=l);break;case 144:g.O();g.error=257;g.status=80;break;case 145:g.status=80;g.O();break;case 160:g.H&&(g.status=88,Fb(g,12),g.g=12,g.Y=1,g.O());break;case 161:g.H?(Gb(g),g.status=88,g.ga=20,g.ja=235):g.status=65;g.O();break;case 198:g.J=g.Y&255;g.status=80;g.O();break;case 37:case 200:h=37===k;l=Cb(g,h);Db(g,h)*g.l+l*g.l>g.buffer.byteLength?
(g.status=255,g.O()):(g.status=88,g.ha.ka|=1);break;case 53:case 202:h=53===k;l=Cb(g,h);Db(g,h)*g.l+l*g.l>g.buffer.byteLength?(g.status=255,g.O()):(g.status=88,g.ha.ka|=1);break;case 64:g.status=80;g.O();break;case 218:g.status=65;g.error=4;g.O();break;case 224:g.status=80;g.O();break;case 225:g.status=80;g.O();break;case 231:g.status=80;g.O();break;case 236:if(g.H){g.status=65;g.error=4;g.O();break}Gb(g);g.status=88;g.O();break;case 234:g.status=80;g.O();break;case 239:g.status=80;g.O();break;case 222:g.status=
80;g.O();break;case 245:g.status=80;g.O();break;case 249:g.status=65;g.error=4;break;default:g.status=65,g.error=4}else g.error=4,g.status=65,g.O()});I(a.v,this.h|4,this,void 0,void 0,this.Ig);J(a.v,this.h|4,this,void 0,void 0,this.Mg);I(a.v,this.h,this,this.Kg,void 0,this.Jg);J(a.v,this.h,this,this.Df,void 0,this.Ng);I(a.v,this.h|2,this,this.Lg);J(a.v,this.h|2,this,this.Ef);I(a.v,this.h|8,this,function(){return 0});I(a.v,this.h|10,this,function(){return 0});Hb(a.u.Aa,this)}m=wb.prototype;
m.ng=function(){return this.ma.buffer?this.ma.status:0};m.mj=function(a){a&4&&(P(this.s,this.X),Ab(this.da),Ab(this.ea));this.l=a};m.Ig=function(){return this.cd};m.Mg=function(a){this.cd=a};m.Lg=function(){return this.ka};m.Ef=function(a){this.ka&=~(a&6)};m.Jg=function(){return this.i|this.ka<<16};m.Kg=function(){return this.i};m.Ng=function(a){this.Df(a&255);this.Ef(a>>16&255)};
m.Df=function(a){let b=this.i;this.i=a&9;if((b&1)!==(a&1))if(0===(a&1))this.ka&=-2;else switch(this.ka|=1,this.ma.o){case 37:case 200:Ib(this.ma);break;case 202:case 53:Jb(this.ma);break;case 160:Kb(this.ma)}};m.O=function(){0===(this.l&2)&&(this.ka|=4,this.s.Fa(this.X))};m.V=function(){var a=[];a[0]=this.da;a[1]=this.ea;a[2]=this.g;a[3]=this.X;a[4]=this.Ba;a[5]=this.j;a[6]=this.h;a[7]=this.name;a[8]=this.l;a[9]=this.cd;a[10]=this.ka;a[11]=this.ma===this.da;a[12]=this.i;return a};
m.G=function(a){this.da.G(a[0]);this.ea.G(a[1]);this.g=a[2];this.X=a[3];this.Ba=a[4];this.j=a[5];this.h=a[6];this.name=a[7];this.l=a[8];this.cd=a[9];this.ka=a[10];this.ma=a[11]?this.da:this.ea;this.i=a[12]};
function xb(a,b,c,d,e,f){this.ha=a;this.A=f;this.$=e;this.s=b;this.buffer=c;this.l=d?2048:512;this.H=d;this.F=this.B=this.D=this.j=0;this.buffer&&(this.j=this.buffer.byteLength/this.l,this.j!==(this.j|0)&&(this.j=Math.ceil(this.j)),d?(this.D=1,this.B=0):(this.D=16,this.B=63),this.F=this.j/this.D/this.B,this.F!==(this.F|0)&&(this.F=Math.floor(this.F)),a=b.u.Ac,a.P[57]|=1<<4*this.$,a.P[18]=a.P[18]&15|240,a.P[27]=this.F&255,a.P[28]=this.F>>8&255,a.P[29]=this.D&255,a.P[30]=255,a.P[31]=255,a.P[32]=200,
a.P[33]=this.F&255,a.P[34]=this.F>>8&255,a.P[35]=this.B&255);this.C={og:0,pg:0,xf:0,yf:0,Qf:!1};this.buffer=c;this.ec=this.head=this.ja=this.ga=this.Rc=this.qa=this.Y=this.Ad=0;this.status=80;this.J=128;this.i=this.error=0;this.data=new Uint8Array(65536);this.U=new Uint16Array(this.data.buffer);this.L=new Int32Array(this.data.buffer);this.g=this.h=0;this.S=this.o=-1;this.ia=this.W=0;this.M=new Set;this.aa=new Set;Object.seal(this)}
function Ab(a){a.H?(a.status=0,a.Y=1,a.error=1,a.qa=1,a.ga=20,a.ja=235):(a.status=81,a.Y=1,a.error=1,a.qa=1,a.ga=0,a.ja=0);for(const b of a.M)a.aa.add(b);a.M.clear()}m=xb.prototype;m.O=function(){this.ha.O()};m.Rd=function(){this.status=80;var a=this.data.subarray(0,this.h);Lb(this,this.o,this.h/512);this.O();this.buffer.set(this.W,a,function(){});Mb(this,this.h)};
function Nb(a,b){var c=(b[7]<<8|b[8])*a.l;b=(b[2]<<24|b[3]<<16|b[4]<<8|b[5])*a.l;a.h=0;var d=a.ja<<8&65280|a.ga&255;a.ga=a.ja=0;65535===d&&d--;d>c&&(d=c);b>=a.buffer.byteLength?(a.status=255,a.O()):0===c?(a.status=80,a.i=0):(c=Math.min(c,a.buffer.byteLength-b),a.status=208,Ob(a),a.Z(b,c,e=>{Pb(a,e);a.status=88;a.Y=a.Y&-8|2;a.O();d&=-4;a.g=d;a.g>a.h&&(a.g=a.h);a.ga=a.g&255;a.ja=a.g>>8&255;Qb(a,c)}))}
function Rb(a,b){var c=(b[7]<<8|b[8])*a.l;b=(b[2]<<24|b[3]<<16|b[4]<<8|b[5])*a.l;b>=a.buffer.byteLength?(a.status=255,a.O()):(a.status=208,Ob(a),a.Z(b,c,d=>{Qb(a,c);a.status=88;a.Y=a.Y&-8|2;Pb(a,d);Kb(a)}))}function Kb(a){if(0!==(a.ha.ka&1)&&0!==(a.status&8)){var b=a.ha.cd,c=0,d=a.data;do{var e=a.s.i(b),f=a.s.Ga(b+4),k=a.s.Ed(b+7)&128;f||(f=65536);ia(a.s,d.subarray(c,Math.min(c+f,a.h)),e);c+=f;b+=8;if(c>=a.h&&!k)break}while(!k);a.status=80;a.ha.ka&=-2;a.Y=a.Y&-8|3;a.O()}}
function yb(a,b){if(a.i<a.g){var c=1===b?a.data[a.i]:2===b?a.U[a.i>>>1]:a.L[a.i>>>2];a.i+=b;a.i>=a.g&&(160===a.o?a.g===a.h?(a.status=80,a.Y=a.Y&-8|3,a.O()):(a.status=88,a.Y=a.Y&-8|2,a.O(),b=a.ja<<8&65280|a.ga&255,a.g+b>a.h?(a.ga=a.h-a.g&255,a.ja=a.h-a.g>>8&255,a.g=a.h):a.g+=b):(a.error=0,a.i>=a.h?a.status=80:(b=196===a.o||41===a.o?Math.min(a.J,(a.h-a.g)/512):1,Lb(a,a.o,b),a.g+=512*b,a.status=88),a.O()));return c}a.i+=b;return 0}
function zb(a,b,c){if(!(a.i>=a.g)&&(1===c?a.data[a.i++]=b:2===c?(a.U[a.i>>>1]=b,a.i+=2):(a.L[a.i>>>2]=b,a.i+=4),a.i===a.g))if(160===a.o){a.i=0;a.S=a.data[0];switch(a.S){case 0:Fb(a,0);a.g=a.h;a.status=80;break;case 3:Fb(a,a.data[4]);a.g=a.h;a.status=88;a.data[0]=240;a.data[2]=5;a.data[7]=8;break;case 18:b=a.data[4];a.status=88;a.data.set([5,128,1,49,31,0,0,0,83,79,78,89,32,32,32,32,67,68,45,82,79,77,32,67,68,85,45,49,48,48,48,32,49,46,49,97]);a.g=a.h=Math.min(36,b);break;case 26:Fb(a,a.data[4]);a.g=
a.h;a.status=88;break;case 30:Fb(a,0);a.g=a.h;a.status=80;break;case 37:b=a.j-1;Pb(a,new Uint8Array([b>>24&255,b>>16&255,b>>8&255,b&255,0,0,a.l>>8&255,a.l&255]));a.g=a.h;a.status=88;break;case 40:a.Rc&1?Rb(a,a.data):Nb(a,a.data);break;case 66:b=a.data[8];Fb(a,Math.min(8,b));a.g=a.h;a.status=88;break;case 67:b=a.data[8]|a.data[7]<<8;c=a.data[9]>>6;Fb(a,b);a.g=a.h;0===c?(b=a.j,a.data.set(new Uint8Array([0,18,1,1,0,20,1,0,0,0,0,0,0,22,170,0,b>>24,b>>16&255,b>>8&255,b&255]))):1===c&&a.data.set(new Uint8Array([0,
10,1,1,0,0,0,0,0,0,0,0]));a.status=88;break;case 70:b=a.data[8]|a.data[7]<<8;b=Math.min(b,32);Fb(a,b);a.g=a.h;a.data[0]=b-4>>24&255;a.data[1]=b-4>>16&255;a.data[2]=b-4>>8&255;a.data[3]=b-4&255;a.data[6]=8;a.data[10]=3;a.status=88;break;case 81:Fb(a,0);a.g=a.h;a.status=80;break;case 82:a.status=81;a.h=0;a.error=80;break;case 90:b=a.data[8]|a.data[7]<<8;42===a.data[2]&&Fb(a,Math.min(30,b));a.g=a.h;a.status=88;break;case 189:Fb(a,a.data[9]|a.data[8]<<8);a.g=a.h;a.data[5]=1;a.status=88;break;case 74:a.status=
81;a.h=0;a.error=80;break;case 190:Fb(a,0);a.g=a.h;a.status=80;break;default:a.status=81,a.h=0,a.error=80}a.Y=a.Y&-8|2;0===(a.status&128)&&a.O();0===(a.status&128)&&0===a.h&&(a.Y|=1,a.status&=-9)}else a.i>=a.h?a.Rd():(a.status=88,a.g+=512,a.O())}
function Lb(a,b,c){a.Y-=c;36===b||41===b||52===b||57===b||37===b||53===b?(b=c+Sb(a),a.qa=b&255|b>>16&65280,a.ga=b>>8&255,a.ja=b>>16&255):a.Ad?(b=c+Tb(a),a.qa=b&255,a.ga=b>>8&255,a.ja=b>>16&255,a.head=a.head&-16|b&15):(b=c+Ub(a),c=b/(a.D*a.B)|0,a.ga=c&255,a.ja=c>>8&255,a.head=(b/a.B|0)%a.D&15,a.qa=b%a.B+1&255,Ub(a))}
function Bb(a,b){var c=36===b||41===b,d=Cb(a,c);c=Db(a,c);var e=32===b||36===b,f=d*a.l;c*=a.l;c+f>a.buffer.byteLength?(a.status=255,a.O()):(a.status=192,Ob(a),a.Z(c,f,k=>{Pb(a,k);a.status=88;a.g=e?512:Math.min(f,512*a.J);Lb(a,b,e?1:Math.min(d,a.B));a.O();Qb(a,f)}))}
function Ib(a){var b=37===a.o,c=Cb(a,b);b=Db(a,b);var d=c*a.l;b*=a.l;Ob(a);a.Z(b,d,e=>{var f=a.ha.cd,k=0;do{var g=a.s.i(f),h=a.s.Ga(f+4),l=a.s.Ed(f+7)&128;h||(h=65536);ia(a.s,e.subarray(k,k+h),g);k+=h;f+=8}while(!l);Lb(a,a.o,c);a.status=80;a.ha.ka&=-2;a.o=-1;a.O();Qb(a,d)})}
function Jb(a){var b=53===a.o,c=Cb(a,b),d=Db(a,b);b=c*a.l;d*=a.l;var e=a.ha.cd,f=0;const k=new Uint8Array(b);do{var g=a.s.i(e),h=a.s.Ga(e+4),l=a.s.Ed(e+7)&128;h||(h=65536);k.set(a.s.Na.subarray(g,g+h),f);f+=h;e+=8}while(!l);a.buffer.set(d,k,()=>{Lb(a,a.o,c);a.status=80;a.O();a.ha.ka&=-2;a.o=-1});Mb(a,b)}function Ub(a){return((a.ga&255|a.ja<<8&65280)*a.D+a.head)*a.B+(a.qa&255)-1}function Tb(a){return a.qa&255|a.ga<<8&65280|a.ja<<16&16711680|(a.head&15)<<24}
function Sb(a){return(a.qa&255|a.ga<<8&65280|a.ja<<16&16711680|a.qa>>8<<24&4278190080)>>>0}function Db(a,b){return b?Sb(a):a.Ad?Tb(a):Ub(a)}function Cb(a,b){b?(a=a.Y,0===a&&(a=65536)):(a=a.Y&255,0===a&&(a=256));return a}
function Gb(a){if(a.ec&16)Fb(a,0);else{for(var b=0;512>b;b++)a.data[b]=0;b=Math.min(16383,a.F);Pb(a,[64,a.H?133:0,b,b>>8,0,0,a.D,a.D>>8,a.B/512,a.B/512>>8,0,2,a.B,a.B>>8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,2,4,0,0,0,0,0,0,0,0,0,56,118,32,54,68,72,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,128,0,1,0,0,2,0,0,0,2,0,2,7,0,b,b>>8,a.D,a.D>>8,a.B,0,a.j&255,a.j>>8&255,a.j>>16&255,a.j>>24&255,0,0,a.j&255,a.j>>8&255,a.j>>16&255,
a.j>>24&255,0,0,160===a.o?0:7,160===a.o?0:4,0,0,30,0,30,0,30,0,30,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,126,0,0,0,0,0,0,116,0,64,0,64,0,116,0,64,0,0,0,0,0,0,0,0,0,0,1,96,0,0,0,0,0,0,0,0,0,0,0,0,a.j&255,a.j>>8&255,a.j>>16&255,a.j>>24&255]);a.h=512;a.g=512}}function Fb(a,b){Eb(a,b);for(var c=0;c<b+3>>2;c++)a.L[c]=0}function Eb(a,b){a.data.length<b&&(a.data=new Uint8Array(b+3&-4),a.U=new Uint16Array(a.data.buffer),a.L=new Int32Array(a.data.buffer));a.h=b;a.i=0}
function Pb(a,b){Eb(a,b.length);a.data.set(b)}function Ob(a){a.C.Qf=!0;a.A.send("ide-read-start")}function Qb(a,b){a.C.Qf=!1;var c=b/a.l|0;a.C.og+=c;a.C.xf+=b;a.A.send("ide-read-end",[a.$,b,c])}function Mb(a,b){var c=b/a.l|0;a.C.pg+=c;a.C.yf+=b;a.A.send("ide-write-end",[a.$,b,c])}m.Z=function(a,b,c){const d=this.ia++;this.M.add(d);this.buffer.get(a,b,e=>{this.aa.delete(d)?this.M.has(d):(this.M.delete(d),c(e))})};
m.V=function(){var a=[];a[0]=this.Y;a[1]=this.F;a[2]=this.ja;a[3]=this.ga;a[4]=this.i;a[5]=0;a[6]=0;a[7]=0;a[8]=0;a[9]=this.ec;a[10]=this.error;a[11]=this.head;a[12]=this.D;a[13]=this.H;a[14]=this.Ad;a[15]=this.Rc;a[16]=this.data;a[17]=this.h;a[18]=this.qa;a[19]=this.j;a[20]=this.l;a[21]=this.J;a[22]=this.B;a[23]=this.status;a[24]=this.W;a[25]=this.o;a[26]=this.g;a[27]=this.S;a[28]=this.buffer;return a};
m.G=function(a){this.Y=a[0];this.F=a[1];this.ja=a[2];this.ga=a[3];this.i=a[4];this.ec=a[9];this.error=a[10];this.head=a[11];this.D=a[12];this.H=a[13];this.Ad=a[14];this.Rc=a[15];this.data=a[16];this.h=a[17];this.qa=a[18];this.j=a[19];this.l=a[20];this.J=a[21];this.B=a[22];this.status=a[23];this.W=a[24];this.o=a[25];this.g=a[26];this.S=a[27];this.U=new Uint16Array(this.data.buffer);this.L=new Int32Array(this.data.buffer);this.buffer&&this.buffer.G(a[28])};function Vb(a){this.hb=new Uint8Array(4);this.g=new Uint8Array(4);this.Yc=new Uint8Array(4);this.Zc=new Uint8Array(4);this.Xc=new Int32Array(this.hb.buffer);new Int32Array(this.g.buffer);this.Wf=new Int32Array(this.Yc.buffer);this.Yf=new Int32Array(this.Zc.buffer);this.rb=[];this.u=[];this.s=a;for(var b=0;256>b;b++)this.rb[b]=void 0,this.u[b]=void 0;this.v=a.v;J(a.v,3324,this,function(c){Wb(this,this.Xc[0],c)},function(c){Xb(this,this.Xc[0],c)},function(c){var d=this.Xc[0],e=d>>8&65535,f=d&255;d=
this.rb[e];e=this.u[e];if(d)if(16<=f&&40>f)if(e=e.bb[f-16>>2]){f>>=2;var k=d[f]&1;-1===(c|3|e.size-1)?(c=~(e.size-1)|k,0===k&&(d[f]=c)):0===k&&(d[f]=e.Tf);1===k&&(Yb(this,e,d[f]&65534,c&65534),d[f]=c|1)}else d[f>>2]=0;else 48===f?d[f>>2]=e.Xf?-1===(c|2047)?-e.Xf|0:e.rh|0:0:4!==f&&(d[f>>>2]=c)});J(a.v,3325,this,function(c){Wb(this,this.Xc[0]+1|0,c)});J(a.v,3326,this,function(c){Wb(this,this.Xc[0]+2|0,c)},function(c){Xb(this,this.Xc[0]+2|0,c)});J(a.v,3327,this,function(c){Wb(this,this.Xc[0]+3|0,c)});
a.v.dd(3324,this,function(){return this.Yc[0]},function(){return this.Yc[1]},function(){return this.Yc[2]},function(){return this.Yc[3]});a.v.dd(3320,this,function(){return this.Zc[0]},function(){return this.Zc[1]},function(){return this.Zc[2]},function(){return this.Zc[3]});a.v.Cb(3320,this,function(c){this.hb[0]=c&252},function(c){2===(this.hb[1]&6)&&6===(c&6)?Zb(a):this.hb[1]=c},function(c){this.hb[2]=c},function(c){this.hb[3]=c;c=this.hb[0]&252;var d=this.rb[this.hb[2]<<8|this.hb[1]];void 0!==
d?(this.Yf[0]=-2147483648,this.Wf[0]=c<d.byteLength?d[c>>2]:0):(this.Wf[0]=-1,this.Yf[0]=0)});Hb(this,{Ba:0,I:[134,128,55,18,0,0,0,0,2,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0],bb:[],name:"82441FX PMC"});this.i={Ba:8,I:[134,128,0,112,7,0,0,2,0,0,1,6,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],bb:[],name:"82371SB PIIX3 ISA"};
this.j=Hb(this,this.i);this.h=new Uint8Array(this.j.buffer)}Vb.prototype.V=function(){for(var a=[],b=0;256>b;b++)a[b]=this.rb[b];a[256]=this.hb;a[257]=this.g;a[258]=this.Yc;a[259]=this.Zc;return a};Vb.prototype.G=function(a){for(var b=0;256>b;b++){var c=this.u[b],d=a[b];if(c&&d){for(var e=0;e<c.bb.length;e++){var f=d[4+e];if(f&1){var k=c.bb[e];Yb(this,k,k.Tf&65534,f&65534)}}this.rb[b].set(d)}}this.hb.set(a[256]);this.g.set(a[257]);this.Yc.set(a[258]);this.Zc.set(a[259])};
function Wb(a,b,c){var d=b&255;(new Uint8Array(a.rb[b>>8&65535].buffer))[d]=c}function Xb(a,b,c){var d=b&255;a=new Uint16Array(a.rb[b>>8&65535].buffer);!a||16<=d&&44>d||(a[d>>>1]=c)}function Hb(a,b){var c=b.Ba,d=new Int32Array(64);d.set(new Int32Array((new Uint8Array(b.I)).buffer));a.rb[c]=d;a.u[c]=b;c=d.slice(4,10);for(var e=0;e<b.bb.length;e++){var f=b.bb[e];if(f){var k=c[e],g=k&1;f.Tf=k;f.entries=[];if(0!==g)for(k&=-2,g=0;g<f.size;g++)f.entries[g]=a.v.ports[k+g]}}return d}
function Yb(a,b,c,d){for(var e=b.size,f=a.v.ports,k=0;k<e;k++)f[c+k]=Wa(a.v),f[d+k]=b.entries[k]}Vb.prototype.wa=function(a){this.s.Fa(this.h[96+((this.rb[a][15]>>8&255)-1+((a>>3)-1&255)&3)])};function $b(a,b){P(a.s,a.h[96+((a.rb[b][15]>>8&255)+(b>>3&255)-2&3)])};function ac(a,b){this.v=a.v;this.s=a;this.Za=a.u.Za;this.h=0;this.L=new Uint8Array(10);this.M=0;this.j=null;this.g=new Uint8Array(10);this.C=this.l=this.i=0;this.H=b;this.J=this.D=this.W=this.ia=this.aa=this.$=0;this.S=1;this.o=0;if(b){this.C=b.byteLength;var c;if((c={160:{type:1,mb:40,jb:8,gb:1},180:{type:1,mb:40,jb:9,gb:1},200:{type:1,mb:40,jb:10,gb:1},320:{type:1,mb:40,jb:8,gb:2},360:{type:1,mb:40,jb:9,gb:2},400:{type:1,mb:40,jb:10,gb:2},720:{type:3,mb:80,jb:9,gb:2},1200:{type:2,mb:80,jb:15,gb:2},
1440:{type:4,mb:80,jb:18,gb:2},1722:{type:5,mb:82,jb:21,gb:2},2880:{type:5,mb:80,jb:36,gb:2}}[this.C>>10])&&0===(this.C&1023))a.u.Ac.P[16]=c.type<<4,a=c.jb,b=c.gb,c=c.mb;else throw"Unknown floppy size: "+O(b.byteLength);this.B=a;this.F=b;this.U=c}else a.u.Ac.P[16]=64,this.C=this.U=this.F=this.B=0;I(this.v,1008,this,this.xi);I(this.v,1010,this,this.yi);I(this.v,1012,this,this.Ai);I(this.v,1013,this,this.Bi);I(this.v,1015,this,this.Di);J(this.v,1010,this,this.zi);J(this.v,1013,this,this.Ci)}m=ac.prototype;
m.V=function(){var a=[];a[0]=this.h;a[1]=this.L;a[2]=this.M;a[4]=this.g;a[5]=this.i;a[6]=this.l;a[7]=this.C;a[8]=this.$;a[9]=this.aa;a[10]=this.ia;a[11]=this.W;a[12]=this.D;a[13]=this.J;a[14]=this.S;a[15]=this.o;a[16]=this.B;a[17]=this.F;a[18]=this.U;return a};
m.G=function(a){this.h=a[0];this.L=a[1];this.M=a[2];this.j=a[3];this.g=a[4];this.i=a[5];this.l=a[6];this.C=a[7];this.$=a[8];this.aa=a[9];this.ia=a[10];this.W=a[11];this.D=a[12];this.J=a[13];this.S=a[14];this.o=a[15];this.B=a[16];this.F=a[17];this.U=a[18]};m.xi=function(){return 0};m.Ai=function(){var a=128;this.i<this.l&&(a|=80);0===(this.o&8)&&(a|=32);return a};m.Di=function(){return 0};m.Bi=function(){return this.i<this.l?(P(this.s,6),this.g[this.i++]):255};
m.Ci=function(a){if(this.H)if(0<this.h)this.L[this.M++]=a,this.h--,0===this.h&&this.j.call(this,this.L);else{switch(a){case 3:this.j=this.Wg;this.h=2;break;case 4:this.j=this.Ag;this.h=1;break;case 5:case 197:this.j=function(b){bc(this,!0,b)};this.h=8;break;case 230:this.j=function(b){bc(this,!1,b)};this.h=8;break;case 7:this.j=this.zg;this.h=1;break;case 8:this.i=0;this.l=2;this.g[0]=32;this.g[1]=this.D;break;case 74:this.j=this.Ti;this.h=1;break;case 15:this.h=2;this.j=this.xg;break;case 14:this.g[0]=
128,this.i=0,this.l=1,this.h=0}this.M=0}};m.yi=function(){return this.o};m.zi=function(a){4===(a&4)&&0===(this.o&4)&&this.s.Fa(6);this.o=a};m.Ag=function(){this.i=0;this.l=1;this.g[0]=32};m.xg=function(a){this.D=a[1];this.J=a[0]>>2&1;this.wa()};m.zg=function(){this.wa()};function bc(a,b,c){var d=c[2],e=c[1],f=c[3],k=128<<c[4],g=c[5]-c[3]+1,h=((d+a.F*e)*a.B+f-1)*k;a.H&&(b?a.Za.Rd(a.H,h,g*k,2,a.done.bind(a,c,e,d,f)):cc(a.Za,a.H,h,a.done.bind(a,c,e,d,f)))}
m.done=function(a,b,c,d,e){e||(d++,d>this.B&&(d=1,c++,c>=this.F&&(c=0,b++)),this.D=b,this.J=c,this.S=d,this.i=0,this.l=7,this.g[0]=c<<2|32,this.g[1]=0,this.g[2]=0,this.g[3]=b,this.g[4]=c,this.g[5]=d,this.g[6]=a[4],this.wa())};m.Wg=function(){};m.Ti=function(){this.i=0;this.l=7;this.g[0]=0;this.g[1]=0;this.g[2]=0;this.g[3]=0;this.g[4]=0;this.g[5]=0;this.g[6]=0;this.wa()};m.wa=function(){this.o&8&&this.s.Fa(6)};function ia(a,b,c){b.length&&(a.ze(c),a.ze(c+b.length-1),a.hh(c,c+b.length),a.Na.set(b,c))};function dc(a){this.s=a;this.o=new Uint8Array(8);this.C=new Uint8Array(8);this.g=new Uint16Array(8);this.j=new Uint16Array(8);this.h=new Uint16Array(8);this.l=new Uint16Array(8);this.Nb=new Uint8Array(8);this.B=new Uint8Array(8);this.Pe=[];this.i=0;a=a.v;J(a,0,this,this.vc.bind(this,0));J(a,2,this,this.vc.bind(this,1));J(a,4,this,this.vc.bind(this,2));J(a,6,this,this.vc.bind(this,3));J(a,1,this,this.xc.bind(this,0));J(a,3,this,this.xc.bind(this,1));J(a,5,this,this.xc.bind(this,2));J(a,7,this,this.xc.bind(this,
3));I(a,0,this,this.uc.bind(this,0));I(a,2,this,this.uc.bind(this,1));I(a,4,this,this.uc.bind(this,2));I(a,6,this,this.uc.bind(this,3));I(a,1,this,this.wc.bind(this,0));I(a,3,this,this.wc.bind(this,1));I(a,5,this,this.wc.bind(this,2));I(a,7,this,this.wc.bind(this,3));J(a,192,this,this.vc.bind(this,4));J(a,196,this,this.vc.bind(this,5));J(a,200,this,this.vc.bind(this,6));J(a,204,this,this.vc.bind(this,7));J(a,194,this,this.xc.bind(this,4));J(a,198,this,this.xc.bind(this,5));J(a,202,this,this.xc.bind(this,
6));J(a,206,this,this.xc.bind(this,7));I(a,192,this,this.uc.bind(this,4));I(a,196,this,this.uc.bind(this,5));I(a,200,this,this.uc.bind(this,6));I(a,204,this,this.uc.bind(this,7));I(a,194,this,this.wc.bind(this,4));I(a,198,this,this.wc.bind(this,5));I(a,202,this,this.wc.bind(this,6));I(a,206,this,this.wc.bind(this,7));J(a,135,this,this.zc.bind(this,0));J(a,131,this,this.zc.bind(this,1));J(a,129,this,this.zc.bind(this,2));J(a,130,this,this.zc.bind(this,3));J(a,143,this,this.zc.bind(this,4));J(a,139,
this,this.zc.bind(this,5));J(a,137,this,this.zc.bind(this,6));J(a,138,this,this.zc.bind(this,7));I(a,135,this,this.yc.bind(this,0));I(a,131,this,this.yc.bind(this,1));I(a,129,this,this.yc.bind(this,2));I(a,130,this,this.yc.bind(this,3));I(a,143,this,this.yc.bind(this,4));I(a,139,this,this.yc.bind(this,5));I(a,137,this,this.yc.bind(this,6));I(a,138,this,this.yc.bind(this,7));J(a,1159,this,this.bd.bind(this,0));J(a,1155,this,this.bd.bind(this,1));J(a,1153,this,this.bd.bind(this,2));J(a,1154,this,this.bd.bind(this,
3));J(a,1163,this,this.bd.bind(this,5));J(a,1161,this,this.bd.bind(this,6));J(a,1162,this,this.bd.bind(this,7));I(a,1159,this,this.ad.bind(this,0));I(a,1155,this,this.ad.bind(this,1));I(a,1153,this,this.ad.bind(this,2));I(a,1154,this,this.ad.bind(this,3));I(a,1163,this,this.ad.bind(this,5));I(a,1161,this,this.ad.bind(this,6));I(a,1162,this,this.ad.bind(this,7));J(a,10,this,this.mg.bind(this,0));J(a,212,this,this.mg.bind(this,4));J(a,15,this,this.lg.bind(this,0));J(a,222,this,this.lg.bind(this,4));
I(a,15,this,this.kg.bind(this,0));I(a,222,this,this.kg.bind(this,4));J(a,11,this,this.jg.bind(this,0));J(a,214,this,this.jg.bind(this,4));J(a,12,this,this.ig);J(a,216,this,this.ig)}m=dc.prototype;m.V=function(){return[this.o,this.C,this.g,this.j,this.h,this.l,this.Nb,this.B,this.i]};m.G=function(a){this.o=a[0];this.C=a[1];this.g=a[2];this.j=a[3];this.h=a[4];this.l=a[5];this.Nb=a[6];this.B=a[7];this.i=a[8]};m.xc=function(a,b){this.h[a]=ec(this,this.h[a],b,!1);this.l[a]=ec(this,this.l[a],b,!0)};
m.wc=function(a){return fc(this,this.h[a])};m.vc=function(a,b){this.g[a]=ec(this,this.g[a],b,!1);this.j[a]=ec(this,this.j[a],b,!0)};m.uc=function(a){return fc(this,this.g[a])};m.bd=function(a,b){this.C[a]=b};m.ad=function(a){return this.C[a]};m.zc=function(a,b){this.o[a]=b};m.yc=function(a){return this.o[a]};m.mg=function(a,b){gc(this,(b&3)+a,b&4?1:0)};m.lg=function(a,b){for(var c=0;4>c;c++)gc(this,a+c,b&1<<c)};
m.kg=function(a){var b=0|this.Nb[a+0];b|=this.Nb[a+1]<<1;b|=this.Nb[a+2]<<2;return b|=this.Nb[a+3]<<3};m.jg=function(a,b){this.B[(b&3)+a]=b};m.ig=function(){this.i=0};function gc(a,b,c){if(a.Nb[b]!==c&&(a.Nb[b]=c,!c))for(c=0;c<a.Pe.length;c++)a.Pe[c].xe.call(a.Pe[c].nf,b)}function cc(a,b,c,d){var e=a.h[2]+1,f=hc(a,2);if(c+e>b.byteLength)d(!0);else{var k=a.s;a.g[2]+=e;b.get(c,e,function(g){ia(k,g,f);d(!1)})}}
m.Rd=function(a,b,c,d,e){var f=this.h[d]+1&65535,k=5<=d?2:1,g=f*k,h=hc(this,d),l=!1,p=!1,q=this.B[d]&16;c<g?(f=Math.floor(c/k),g=f*k,l=!0):c>g&&(p=!0);b+g>a.byteLength?e(!0):(this.g[d]+=f,this.h[d]-=f,!l&&q&&(this.g[d]=this.j[d],this.h[d]=this.l[d]),a.set(b,this.s.Na.subarray(h,h+g),()=>{p&&q?this.Rd(a,b+g,c-g,d,e):e(!1)}))};function hc(a,b){var c=a.g[b];5<=b&&(c<<=1);c=c&65535|a.o[b]<<16;return c|=a.C[b]<<24}function ec(a,b,c,d){d||(a.i^=1);return a.i?b&-256|c:b&-65281|c<<8}
function fc(a,b){a.i^=1;return a.i?b&255:b>>8&255};function ic(a,b){this.s=a;this.A=b;this.l=new Float64Array(3);this.o=new Uint16Array(3);this.h=new Uint8Array(4);this.j=new Uint8Array(4);this.i=new Uint8Array(4);this.D=new Uint8Array(4);this.C=new Uint8Array(4);this.B=new Uint16Array(3);this.g=new Uint16Array(3);I(a.v,97,this,function(){var c=L(),d=66.66666666666667*c&1;c=jc(this,2,c);return d<<4|c<<5});J(a.v,97,this,function(c){c&1?this.A.send("pcspeaker-enable"):this.A.send("pcspeaker-disable")});I(a.v,64,this,function(){return kc(this,0)});I(a.v,
65,this,function(){return kc(this,1)});I(a.v,66,this,function(){return kc(this,2)});J(a.v,64,this,function(c){lc(this,0,c)});J(a.v,65,this,function(c){lc(this,1,c)});J(a.v,66,this,function(c){lc(this,2,c)});J(a.v,67,this,this.F)}ic.prototype.V=function(){var a=[];a[0]=this.h;a[1]=this.j;a[2]=this.i;a[3]=this.D;a[4]=this.C;a[5]=this.B;a[6]=this.g;a[7]=this.l;a[8]=this.o;return a};
ic.prototype.G=function(a){this.h=a[0];this.j=a[1];this.i=a[2];this.D=a[3];this.C=a[4];this.B=a[5];this.g=a[6];this.l=a[7];this.o=a[8]};ic.prototype.lb=function(a,b){b||(this.j[0]&&jc(this,0,a)?(this.o[0]=mc(this,0,a),this.l[0]=a,P(this.s,0),this.s.Fa(0),0===this.i[0]&&(this.j[0]=0)):P(this.s,0))};function mc(a,b,c){if(!a.j[b])return 0;c=a.o[b]-Math.floor(1193.1816666*(c-a.l[b]));a=a.g[b];c>=a?c%=a:0>c&&(c=c%a+a);return c}
function jc(a,b,c){c-=a.l[b];return 0>c?!0:a.o[b]<Math.floor(1193.1816666*c)}function kc(a,b){var c=a.C[b];if(c)return a.C[b]--,2===c?a.B[b]&255:a.B[b]>>8;c=a.h[b];3===a.i[b]&&(a.h[b]^=1);a=mc(a,b,L());return c?a&255:a>>8}function lc(a,b,c){a.g[b]=a.h[b]?a.g[b]&-256|c:a.g[b]&255|c<<8;3===a.D[b]&&a.h[b]||(a.g[b]||(a.g[b]=65535),a.o[b]=a.g[b],a.j[b]=!0,a.l[b]=L());3===a.D[b]&&(a.h[b]^=1);a.A.send("pcspeaker-update",[a.i[2],a.g[2]])}
ic.prototype.F=function(a){var b=a>>1&7,c=a>>6&3;a=a>>4&3;3!==c&&(0===a?(this.C[c]=2,b=mc(this,c,L()),this.B[c]=b?b-1:0):(6<=b&&(b&=-5),this.h[c]=1===a?0:1,0===c&&P(this.s,0),this.i[c]=b,this.D[c]=a,this.A.send("pcspeaker-update",[this.i[2],this.g[2]])))};var nc=Uint32Array.from([655360,655360,720896,753664]),oc=Uint32Array.from([131072,65536,32768,32768]);
function pc(a,b,c){this.A=b;this.oa=c;this.D=0;this.ic=14;this.fc=15;this.H=80;this.Ib=25;this.$d=this.Ia=this.qc=this.W=0;this.Vb=[];this.sc=this.ta=0;this.Ya=new Uint8Array(25);this.o=this.J=this.pc=this.L=this.g=this.i=this.Fb=this.Gb=this.xa=0;this.jc=!0;this.va=!1;setTimeout(()=>{b.send("screen-set-mode",this.va)},0);this.Va=new Int32Array(256);this.B=this.Ha=this.h=0;this.Da=!1;this.$b=32;this.kb=this.La=0;this.I=[52,18,17,17,3,1,0,0,2,0,0,3,0,0,0,0,8,14680064,57344,224,0,0,0,0,0,0,191,254,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,26,0,17,0,0,190,254,0,0,0,0,0,0,0,0,0,0,0,0];this.Ba=144;this.bb=[{size:c}];this.Xf=65536;this.rh=4272947200;this.name="vga";this.C={Of:!1,Vi:0,Wi:0,wf:0};this.aa=this.nb=this.$=this.F=0;this.Pd=new Uint8Array(16);this.l=-1;this.Jb=32;this.Kc=this.Hb=this.td=this.Ma=0;this.Lb=-1;this.Kb=15;this.Xa=this.Mb=0;this.Eb=-1;this.Ka=this.Yb=this.oc=0;this.kc=255;this.U=this.S=this.M=this.Ja=this.lc=this.Db=0;this.j=this.Vc=255;c=a.v;J(c,960,this,this.ci);I(c,960,this,
this.eg,this.bi);I(c,961,this,this.fg);J(c,962,this,this.di);c.Cb(964,this,this.fi,this.hi);I(c,964,this,this.ei);I(c,965,this,this.gi);c.Cb(974,this,this.ri,this.ti);I(c,974,this,this.pi);I(c,975,this,this.si);J(c,967,this,this.ji);I(c,967,this,this.ii);J(c,968,this,this.li);I(c,968,this,this.ki);J(c,969,this,this.ni);I(c,969,this,this.mi);I(c,972,this,this.oi);c.Cb(980,this,this.vi,this.wi);I(c,980,this,this.ui);I(c,981,this,this.gg,()=>this.gg());I(c,970,this,function(){return 0});I(c,986,this,
this.hg);I(c,954,this,this.hg);this.ob=-1;this.ia=0;J(c,462,this,void 0,this.th);J(c,463,this,void 0,this.vh);I(c,463,this,void 0,this.uh);void 0===this.oa||786432>this.oa?this.oa=786432:this.oa&65535&&(this.oa|=65535,this.oa++);this.fa=new Uint8Array(this.oa);this.Ca=this.oa;this.ya=0;this.xd=this.oa;this.wd=0;this.vd=void 0;b.register("screen-tell-buffer",function(e){this.vd&&e[0]&&e[0].set(this.vd.subarray(0,e[0].length));this.vd=e[0]},this);b.register("screen-fill-buffer",function(){if(this.va&&
this.vd)if(this.ya<this.Ca&&this.wd<this.xd)this.A.send("screen-fill-buffer-end",this.Vb);else{if(this.Da){var e=this.vd,f=this.Ca,k=this.ya;switch(this.$b){case 32:var g=f-this.kb>>2,h=(k-this.kb>>2)+1,l=f>>2;for(f=g;f<h;f++)k=this.ug[l++],e[f]=k<<16|k>>16&255|k&65280|4278190080;break;case 24:f-=f%3;k+=3-k%3;g=(f-this.kb)/3|0;h=((k-this.kb)/3|0)+1;l=f;for(f=g;l<k;f++){var p=this.fa[l++],q=this.fa[l++],v=this.fa[l++];e[f]=p<<16|q<<8|v|4278190080}break;case 16:g=f-this.kb>>1;h=(k-this.kb>>1)+1;l=f>>
1;for(f=g;f<h;f++)k=this.bj[l++],v=255*(k>>11)/31|0,q=255*(k>>5&63)/63|0,p=255*(k&31)/31|0,e[f]=p<<16|q<<8|v|4278190080;break;case 8:for(g=f-this.kb,h=k-this.kb+1,l=f;f<=k;f++)q=this.Va[this.fa[l++]],e[f]=q&65280|q<<16|q>>16|4278190080}e=g/this.Ha|0;this.A.send("screen-fill-buffer-end",[{ge:0,he:e,qd:0,rd:e,Md:this.Ha,Ld:(h/this.Ha|0)-e+1}])}else{h=Math.min(this.wd|15,524287);e=qc(this);g=~this.xa&3;l=this.Yb&96;f=this.Ma&64;for(k=this.xd&-16;k<=h;){var n=k>>>e;if(g){q=k/this.Ia|0;v=k-this.Ia*q;switch(g){case 1:n=
(q&1)<<13;q>>>=1;break;case 2:n=(q&1)<<14;q>>>=1;break;case 3:n=(q&3)<<13,q>>>=2}n|=(q*this.Ia+v>>>e)+this.ta}q=this.Ie[n];v=this.Je[n];p=this.Ke[n];var r=this.Le[n];n=new Uint8Array(8);switch(l){case 0:q<<=0;v<<=1;p<<=2;r<<=3;for(var y=7;0<=y;y--)n[7-y]=q>>y&1|v>>y&2|p>>y&4|r>>y&8;break;case 32:n[0]=q>>6&3|p>>4&12;n[1]=q>>4&3|p>>2&12;n[2]=q>>2&3|p>>0&12;n[3]=q>>0&3|p<<2&12;n[4]=v>>6&3|r>>4&12;n[5]=v>>4&3|r>>2&12;n[6]=v>>2&3|r>>0&12;n[7]=v>>0&3|r<<2&12;break;case 64:case 96:n[0]=q>>4&15,n[1]=q>>0&
15,n[2]=v>>4&15,n[3]=v>>0&15,n[4]=p>>4&15,n[5]=p>>0&15,n[6]=r>>4&15,n[7]=r>>0&15}if(f)for(q=y=0;4>y;y++,k++,q+=2)this.He[k]=n[q]<<4|n[q+1];else for(y=0;8>y;y++,k++)this.He[k]=n[y]}f=this.Ca;h=Math.min(this.ya,524287);if(e=this.vd)if(g=255,l=0,this.Ma&128&&(g&=207,l|=this.Kc<<4&48),this.Ma&64)for(;f<=h;f++)k=this.He[f]&g|l,k=this.Va[k],e[f]=k&65280|k<<16|k>>16|4278190080;else for(g&=63,l|=this.Kc<<4&192;f<=h;f++)k=this.Pd[this.He[f]&this.td]&g|l,k=this.Va[k],e[f]=k&65280|k<<16|k>>16|4278190080;this.A.send("screen-fill-buffer-end",
this.Vb)}this.Ca=this.oa;this.ya=0;this.xd=this.oa;this.wd=0}rc(this)},this);this.bj=new Uint16Array(this.fa.buffer);this.ug=new Int32Array(this.fa.buffer);this.Ob=new Uint8Array(this.fa.buffer,0,262144);this.Ie=new Uint8Array(this.fa.buffer,0,65536);this.Je=new Uint8Array(this.fa.buffer,65536,65536);this.Ke=new Uint8Array(this.fa.buffer,131072,65536);this.Le=new Uint8Array(this.fa.buffer,196608,65536);this.He=new Uint8Array(this.fa.buffer,262144,524288);var d=this;Xa(c,655360,131072,function(e){return sc(d,
e)},function(e,f){if(d.Da&&d.va&&d.jc){var k=e-655360|d.La;d.Ca=k<d.Ca?k:d.Ca;d.ya=k>d.ya?k:d.ya;d.fa[k]=f}else{var g=d.Ja>>2&3;e-=nc[g];if(!(0>e||e>=oc[g]))if(d.va){var h=f;f=tc(d.kc);var l=uc(d.Db);g=uc(d.lc);switch(d.Yb&3){case 0:h=(h|h<<8)>>>(d.Ka&7)&255;k=tc(h);h=uc(d.Db);k=vc(d,(k|g&h)&(~g|h),d.h);k=f&k|~f&d.h;break;case 1:k=d.h;break;case 2:k=uc(h);k=vc(d,k,d.h);k=f&k|~f&d.h;break;case 3:h=(h|h<<8)>>>(d.Ka&7)&255,f&=tc(h),k=f&l|~f&d.h}f=15;switch(d.Mb&12){case 0:f=5<<(e&1);e&=-2;break;case 8:case 12:f=
1<<(e&3),e&=-4}f&=d.Kb;f&1&&(d.Ie[e]=k>>0&255);f&2&&(d.Je[e]=k>>8&255);f&4&&(d.Ke[e]=k>>16&255);f&8&&(d.Le[e]=k>>24&255);f=wc(d,e);k=f+7;f<d.xd&&(d.xd=f);k>d.wd&&(d.wd=k);f<d.Ca&&(d.Ca=f);k>d.ya&&(d.ya=k)}else d.Kb&3&&(k=e,g=(k>>1)-d.ta,e=g/d.H|0,g%=d.H,k&1?(l=f,h=d.Ob[k&-2]):(h=f,l=d.Ob[k|1]),d.A.send("screen-put-char",[e,g,h,d.Va[l>>4&15],d.Va[l&15]]),d.Ob[k]=f)}});Xa(c,3758096384,this.oa,function(e){return d.fa[e&268435455]},function(e,f){e&=268435455;d.fa[e]=f;d.Ca=e<d.Ca?e:d.Ca;d.ya=e>d.ya?e:
d.ya},function(e){e&=268435455;return e&3?d.fa[e]|d.fa[e+1]<<8|d.fa[e+2]<<16|d.fa[e+3]<<24:d.ug[e>>2]},function(e,f){e&=268435455;d.Ca=e<d.Ca?e:d.Ca;d.ya=e+3>d.ya?e+3:d.ya;d.fa[e]=f;d.fa[e+1]=f>>8;d.fa[e+2]=f>>16;d.fa[e+3]=f>>24});Hb(a.u.Aa,this)}m=pc.prototype;
m.V=function(){var a=[];a[0]=this.oa;a[1]=this.D;a[2]=this.ic;a[3]=this.fc;a[4]=this.H;a[5]=this.Ib;a[6]=this.Vb.map(b=>[b.ge,b.he,b.qd,b.rd,b.Md,b.Ld]);a[7]=this.aa;a[8]=this.ta;a[9]=this.va;a[10]=this.Va;a[11]=this.h;a[12]=this.M;a[13]=this.S;a[14]=this.Ja;a[15]=this.Ha;a[16]=this.B;a[17]=this.xa;a[18]=this.Da;a[19]=this.$b;a[20]=this.La;a[21]=this.kb;a[22]=this.F;a[23]=this.$;a[24]=this.nb;a[25]=this.Pd;a[26]=this.Lb;a[27]=this.Kb;a[28]=this.Mb;a[29]=this.Eb;a[30]=this.oc;a[31]=this.Yb;a[32]=this.Ka;
a[33]=this.kc;a[34]=this.U;a[35]=this.Vc;a[36]=this.j;a[37]=this.ob;a[38]=this.ia;a[39]=this.fa;a[40]=this.jc;a[41]=this.l;a[42]=this.J;a[43]=this.Db;a[44]=this.lc;a[45]=this.sc;a[46]=this.Ya;a[47]=this.Gb;a[48]=this.Fb;a[49]=this.i;a[50]=this.g;a[51]=this.L;a[52]=this.pc;a[53]=this.J;a[54]=this.Jb;a[55]=this.Ma;a[56]=this.td;a[57]=this.Hb;a[58]=this.Kc;a[59]=this.Xa;a[60]=this.o;return a};
m.G=function(a){this.oa=a[0];this.D=a[1];this.ic=a[2];this.fc=a[3];this.H=a[4];this.Ib=a[5];this.Vb=a[6].map(b=>({ge:b[0],he:b[1],qd:b[2],rd:b[3],Md:b[4],Ld:b[5]}));this.aa=a[7];this.ta=a[8];this.va=a[9];this.Va=a[10];this.h=a[11];this.M=a[12];this.S=a[13];this.Ja=a[14];this.Ha=a[15];this.B=a[16];this.xa=a[17];this.Da=a[18];this.$b=a[19];this.La=a[20];this.kb=a[21];this.F=a[22];this.$=a[23];this.nb=a[24];this.Pd=a[25];this.Lb=a[26];this.Kb=a[27];this.Mb=a[28];this.Eb=a[29];this.oc=a[30];this.Yb=a[31];
this.Ka=a[32];this.kc=a[33];this.U=a[34];this.Vc=a[35];this.j=a[36];this.ob=a[37];this.ia=a[38];this.fa.set(a[39]);this.jc=a[40];this.l=a[41];this.J=a[42];this.Db=a[43];this.lc=a[44];this.sc=a[45];this.Ya.set(a[46]);this.Gb=a[47];this.Fb=a[48];this.i=a[49];this.g=a[50];this.L=a[51];this.pc=a[52];this.J=a[53];this.Jb=a[54];this.Ma=a[55];this.td=a[56];this.Hb=a[57];this.Kc=a[58];this.Xa=a[59];this.o=a[60];this.A.send("screen-set-mode",this.va);this.va?(this.qc=this.W=0,this.Da?(this.ed(this.Ha,this.B,
this.$b,this.Ha,this.B),xc(this)):(yc(this),zc(this))):(this.fd(this.H,this.Ib),this.ld(),this.kd());Ac(this)};
function sc(a,b){if(a.Da&&a.jc)return b=b-655360|a.La,a.fa[b];var c=a.Ja>>2&3;b-=nc[c];if(0>b||b>=oc[c])return 0;a.h=a.Ie[b];a.h|=a.Je[b]<<8;a.h|=a.Ke[b]<<16;a.h|=a.Le[b]<<24;if(a.Yb&8)return c=255,a.S&1&&(c&=a.Ie[b]^~(a.M&1?255:0)),a.S&2&&(c&=a.Je[b]^~(a.M&2?255:0)),a.S&4&&(c&=a.Ke[b]^~(a.M&4?255:0)),a.S&8&&(c&=a.Le[b]^~(a.M&8?255:0)),c;c=a.oc;a.va?a.Mb&8?(c=b&3,b&=-4):a.Yb&16&&(c=b&1,b&=-2):c=0;return a.Ob[c<<16|b]}function tc(a){return a|a<<8|a<<16|a<<24}
function uc(a){return(a&1?255:0)|(a&2?255:0)<<8|(a&4?255:0)<<16|(a&8?255:0)<<24}function vc(a,b,c){switch(a.Ka&24){case 8:return b&c;case 16:return b|c;case 24:return b^c}return b}function Bc(a){for(var b=a.ta<<1,c,d,e=0;e<a.Ib;e++)for(var f=0;f<a.H;f++)c=a.Ob[b],d=a.Ob[b|1],a.A.send("screen-put-char",[e,f,c,a.Va[d>>4&15],a.Va[d&15]]),b+=2}m.kd=function(){var a=(this.D-this.ta)/this.H|0,b=(this.D-this.ta)%this.H;a=Math.min(this.Ib-1,a);this.A.send("screen-update-cursor",[a,b])};
function Ac(a){a.va?(a.Ca=0,a.Da?a.ya=a.oa:a.ya=524288):Bc(a)}function zc(a){a.va&&!a.Da&&(a.xd=0,a.wd=524288,Ac(a))}m.Ea=function(){};function qc(a){var b=128+(~a.L&a.xa&64);b-=a.L&64;b-=a.Ma&64;return b>>>6}function wc(a,b){var c=qc(a);if(~a.xa&3){var d=b-a.ta;d&=a.xa<<13|-24577;d<<=c;var e=d/a.Ia|0;d%=a.Ia;switch(a.xa&3){case 2:e=e<<1|b>>13&1;break;case 1:e=e<<1|b>>14&1;break;case 0:e=e<<2|b>>13&3}return e*a.Ia+d+(a.ta<<c)}return b<<c}
function Cc(a,b){a.U&128&&(b>>>=1);b=Math.ceil(b/(1+(a.U&31)));a.xa&1||(b<<=1);a.xa&2||(b<<=1);return b}m.fd=function(a,b){this.H=a;this.Ib=b;this.A.send("screen-set-size-text",[a,b])};m.ed=function(a,b,c,d,e){this.C.Of&&this.C.wf===c&&this.W===a&&this.qc===b&&this.Ia===d&&this.$d===e||(this.W=a,this.qc=b,this.Ia=d,this.$d=e,this.C.wf=c,this.C.Of=!0,this.C.Vi=a,this.C.Wi=b,this.A.send("screen-set-size-graphical",[a,b,d,e,c]))};
function yc(a){if(!a.Da){var b=Math.min(1+a.Gb,a.Fb),c=Math.min(1+a.i,a.g);if(b&&c)if(a.va){b<<=3;var d=a.J<<4;a.Ma&64&&(b>>>=1,d>>>=1);var e=a.J<<2;a.L&64?e<<=1:a.xa&64&&(e>>>=1);a.ed(b,Cc(a,c),8,d,Math.ceil(oc[0]/e));rc(a);xc(a)}else a.U&128&&(c>>>=1),c=c/(1+(a.U&31))|0,b&&c&&a.fd(b,c)}}
function xc(a){a.va||Bc(a);if(a.Da)a.Vb=[];else if(a.Ia&&a.W)if(!a.Jb||a.Xa&32)a.Vb=[],a.A.send("screen-clear");else{var b=a.sc,c=a.Hb;a.Ma&64&&(c>>>=1);var d=a.pc>>5&3,e=wc(a,b+d);b=e/a.Ia|0;var f=e%a.Ia+c;e=Cc(a,1+a.o);e=Math.min(e,a.qc);var k=a.qc-e;a.Vb=[];f=-f;for(var g=0;f<a.W;f+=a.Ia,g++)a.Vb.push({ge:f,he:0,qd:0,rd:b+g,Md:a.Ia,Ld:e});b=0;a.Ma&32||(b=wc(a,d)+c);f=-b;for(g=0;f<a.W;f+=a.Ia,g++)a.Vb.push({ge:f,he:e,qd:0,rd:g,Md:a.Ia,Ld:k})}}
function rc(a){a.j|=8;a.sc!==a.ta&&(a.sc=a.ta,xc(a))}m.ld=function(){this.A.send("screen-update-cursor-scanline",[this.ic,this.fc])};
m.ci=function(a){if(-1===this.l)this.l=a&31,this.Jb!==(a&32)&&(this.Jb=a&32,xc(this));else{if(16>this.l)this.Pd[this.l]=a,this.Ma&64||Ac(this);else switch(this.l){case 16:if(this.Ma!==a){var b=this.Ma;this.Ma=a;var c=0<(a&1);this.Da||this.va===c||(this.va=c,this.A.send("screen-set-mode",this.va));(b^a)&64&&zc(this);yc(this);Ac(this)}break;case 18:this.td!==a&&(this.td=a,Ac(this));break;case 19:this.Hb!==a&&(this.Hb=a&15,xc(this));break;case 20:this.Kc!==a&&(this.Kc=a,Ac(this))}this.l=-1}};
m.eg=function(){return this.l|this.Jb};m.bi=function(){return this.eg()&255|this.fg()<<8&65280};m.fg=function(){if(16>this.l)return this.Pd[this.l]&255;switch(this.l){case 16:return this.Ma;case 18:return this.td;case 19:return this.Hb;case 20:return this.Kc}return 255};m.di=function(a){this.Vc=a};m.fi=function(a){this.Lb=a};m.ei=function(){return this.Lb};m.hi=function(a){switch(this.Lb){case 1:var b=this.Xa;this.Xa=a;(b^a)&32&&xc(this);break;case 2:this.Kb=a;break;case 4:this.Mb=a}};
m.gi=function(){switch(this.Lb){case 1:return this.Xa;case 2:return this.Kb;case 4:return this.Mb;case 6:return 18}return 0};m.ji=function(a){this.nb=3*a;this.aa&=0};m.ii=function(){return this.aa};m.li=function(a){this.$=3*a;this.aa|=3};m.ki=function(){return this.$/3&255};m.ni=function(a){var b=this.$/3|0,c=this.$%3,d=this.Va[b];a=255*(a&63)/63|0;d=0===c?d&-16711681|a<<16:1===c?d&-65281|a<<8:d&-256|a;this.Va[b]!==d&&(this.Va[b]=d,Ac(this));this.$++};
m.mi=function(){var a=this.nb%3,b=this.Va[this.nb/3|0];this.nb++;return(b>>8*(2-a)&255)/255*63|0};m.oi=function(){return this.Vc};m.ri=function(a){this.Eb=a};m.pi=function(){return this.Eb};m.ti=function(a){switch(this.Eb){case 0:this.Db=a;break;case 1:this.lc=a;break;case 2:this.M=a;break;case 3:this.Ka=a;break;case 4:this.oc=a;break;case 5:var b=this.Yb;this.Yb=a;(b^a)&96&&zc(this);break;case 6:this.Ja!==a&&(this.Ja=a,yc(this));break;case 7:this.S=a;break;case 8:this.kc=a}};
m.si=function(){switch(this.Eb){case 0:return this.Db;case 1:return this.lc;case 2:return this.M;case 3:return this.Ka;case 4:return this.oc;case 5:return this.Yb;case 6:return this.Ja;case 7:return this.S;case 8:return this.kc}return 0};m.vi=function(a){this.F=a};m.ui=function(){return this.F};
m.wi=function(a){switch(this.F){case 1:this.Gb!==a&&(this.Gb=a,yc(this));break;case 2:this.Fb!==a&&(this.Fb=a,yc(this));break;case 7:var b=this.i;this.i&=255;this.i=this.i|a<<3&512|a<<7&256;b!=this.i&&yc(this);this.o=this.o&767|a<<4&256;b=this.g;this.g=this.g&767|a<<5&256;b!==this.g&&yc(this);xc(this);break;case 8:this.pc=a;xc(this);break;case 9:this.U=a;this.o=this.o&511|a<<3&512;b=this.g;this.g=this.g&511|a<<4&512;b!==this.g&&yc(this);xc(this);break;case 10:this.ic=a;this.ld();break;case 11:this.fc=
a;this.ld();break;case 12:(this.ta>>8&255)!==a&&(this.ta=this.ta&255|a<<8,xc(this),~this.xa&3&&zc(this));break;case 13:(this.ta&255)!==a&&(this.ta=this.ta&65280|a,xc(this),~this.xa&3&&zc(this));break;case 14:this.D=this.D&255|a<<8;this.kd();break;case 15:this.D=this.D&65280|a;this.kd();break;case 18:(this.i&255)!==a&&(this.i=this.i&768|a,yc(this));break;case 19:this.J!==a&&(this.J=a,yc(this),~this.xa&3&&zc(this));break;case 20:this.L!==a&&(b=this.L,this.L=a,yc(this),(b^a)&64&&zc(this));break;case 21:(this.g&
255)!==a&&(this.g=this.g&768|a,yc(this));break;case 23:this.xa!==a&&(b=this.xa,this.xa=a,yc(this),(b^a)&67&&zc(this));break;case 24:this.o=this.o&768|a;xc(this);break;default:this.F<this.Ya.length&&(this.Ya[this.F]=a)}};
m.gg=function(){switch(this.F){case 1:return this.Gb;case 2:return this.Fb;case 7:return this.i>>7&2|this.g>>5&8|this.o>>4&16|this.i>>3&64;case 8:return this.pc;case 9:return this.U;case 10:return this.ic;case 11:return this.fc;case 12:return this.ta&255;case 13:return this.ta>>8;case 14:return this.D>>8;case 15:return this.D&255;case 18:return this.i&255;case 19:return this.J;case 20:return this.L;case 21:return this.g&255;case 23:return this.xa;case 24:return this.o&255}return this.F<this.Ya.length?
this.Ya[this.F]:0};m.hg=function(){var a=this.j;this.va?(this.j^=1,this.j&=1):(this.j&1&&(this.j^=8),this.j^=1);this.l=-1;return a};m.th=function(a){this.ob=a};
m.vh=function(a){switch(this.ob){case 1:this.Ha=a;2560<this.Ha&&(this.Ha=2560);break;case 2:this.B=a;1600<this.B&&(this.B=1600);break;case 3:this.$b=a;break;case 4:this.Da=1===(a&1);this.ia=a;break;case 5:this.La=a<<16;break;case 9:this.kb=this.Ha*(15===this.$b?16:this.$b)/8*a,Ac(this)}!this.Da||this.Ha&&this.B||(this.Da=!1);this.Da&&4===this.ob&&(this.ed(this.Ha,this.B,this.$b,this.Ha,this.B),this.A.send("screen-set-mode",!0),this.jc=this.va=!0);this.Da||(this.La=0);xc(this)};
m.uh=function(){return Dc(this,this.ob)};function Dc(a,b){switch(b){case 0:return 45248;case 1:return a.ia&2?2560:a.Ha;case 2:return a.ia&2?1600:a.B;case 3:return a.ia&2?32:a.$b;case 4:return a.ia;case 5:return a.La>>>16;case 6:return a.W?a.W:1;case 8:return 0;case 10:return a.oa/65536|0}return 255};function Ec(a,b){this.s=a;this.A=b;this.md=this.hc=!1;this.Xd=!0;this.Uc=this.Ab=this.zb=0;this.S=!0;this.H=this.F=this.C=this.D=this.J=this.B=this.Sd=!1;this.ca=new sb(1024);this.i=0;this.Bc=100;this.Fd=4;this.l=!1;this.g=new sb(1024);this.o=this.j=!1;this.A.register("keyboard-code",function(c){this.Sd&&(this.ca.push(c),this.wa())},this);this.A.register("mouse-click",function(c){this.Xd&&this.md&&(this.Uc=c[0]|c[2]<<1|c[1]<<2,this.hc&&Fc(this,0,0))},this);this.A.register("mouse-delta",function(c){var d=
c[1];if(this.Xd&&this.md){var e=this.Fd*this.Bc/80;this.zb+=c[0]*e;this.Ab+=d*e;this.hc&&(c=this.zb|0,d=this.Ab|0,c||d)&&(this.zb-=c,this.Ab-=d,Fc(this,c,d))}},this);this.A.register("mouse-wheel",function(){},this);this.h=5;this.L=this.M=!1;I(a.v,96,this,this.Ki);I(a.v,100,this,this.Mi);J(a.v,96,this,this.Li);J(a.v,100,this,this.Ni)}m=Ec.prototype;
m.V=function(){var a=[];a[0]=this.hc;a[1]=this.md;a[2]=this.Xd;a[3]=this.zb;a[4]=this.Ab;a[5]=this.Uc;a[6]=this.S;a[7]=this.Sd;a[8]=this.B;a[9]=this.J;a[10]=this.D;a[11]=this.C;a[12]=this.F;a[13]=this.H;a[15]=this.i;a[16]=this.Bc;a[17]=this.Fd;a[18]=this.l;a[20]=this.h;a[21]=this.M;a[22]=this.L;return a};
m.G=function(a){this.hc=a[0];this.md=a[1];this.Xd=a[2];this.zb=a[3];this.Ab=a[4];this.Uc=a[5];this.S=a[6];this.Sd=a[7];this.B=a[8];this.J=a[9];this.D=a[10];this.C=a[11];this.F=a[12];this.H=a[13];this.i=a[15];this.Bc=a[16];this.Fd=a[17];this.l=a[18];this.h=a[20];this.M=a[21];this.L=a[22];this.o=this.j=!1;this.ca.clear();this.g.clear();this.A.send("mouse-enable",this.md)};m.wa=function(){this.j||(this.ca.length?Gc(this):this.g.length&&Hc(this))};
function Hc(a){a.j=!0;a.o=!0;a.h&2&&(P(a.s,12),a.s.Fa(12))}function Gc(a){a.j=!0;a.o=!1;a.h&1&&(P(a.s,1),a.s.Fa(1))}function Fc(a,b,c){a.g.push((0>c)<<5|(0>b)<<4|8|a.Uc);a.g.push(b);a.g.push(c);a.wa()}m.Ki=function(){this.j=!1;if(!this.ca.length&&!this.g.length)return this.i;this.o?(P(this.s,12),this.i=this.g.shift()):(P(this.s,1),this.i=this.ca.shift());(this.ca.length||this.g.length)&&this.wa();return this.i};m.Mi=function(){var a=16;this.j&&(a|=1);this.o&&(a|=32);return a};
m.Li=function(a){if(this.L)this.h=a,this.L=!1;else if(this.M)this.M=!1,this.g.clear(),this.g.push(a),Hc(this);else if(this.J)this.J=!1,this.g.clear(),this.g.push(250),this.Bc=a,this.Bc||(this.Bc=100),Hc(this);else if(this.H)this.H=!1,this.g.clear(),this.g.push(250),this.Fd=3<a?4:1<<a,Hc(this);else if(this.D)this.D=!1,this.ca.push(250),Gc(this);else if(this.C)this.C=!1,this.ca.push(250),Gc(this),a||this.ca.push(2);else if(this.F)this.F=!1,this.ca.push(250),Gc(this);else if(this.B){if(this.B=!1,this.Xd){this.ca.clear();
this.g.clear();this.g.push(250);switch(a){case 230:this.l=!1;break;case 231:this.l=!0;break;case 232:this.H=!0;break;case 233:Fc(this,0,0);break;case 235:Fc(this,0,0);break;case 242:this.g.push(0);this.g.push(0);this.Uc=this.zb=this.Ab=0;break;case 243:this.J=!0;break;case 244:this.md=this.hc=!0;this.A.send("mouse-enable",!0);this.Uc=this.zb=this.Ab=0;break;case 245:this.hc=!1;break;case 246:this.hc=!1;this.Bc=100;this.l=!1;this.Fd=4;break;case 255:this.g.push(170),this.g.push(0),this.md=!0,this.A.send("mouse-enable",
!0),this.hc=!1,this.Bc=100,this.l=!1,this.Fd=4,this.Uc=this.zb=this.Ab=0}Hc(this)}}else{this.g.clear();this.ca.clear();this.ca.push(250);switch(a){case 237:this.D=!0;break;case 240:this.C=!0;break;case 242:this.ca.push(171);this.ca.push(83);break;case 243:this.F=!0;break;case 244:this.Sd=!0;break;case 245:this.Sd=!1;break;case 255:this.ca.clear(),this.ca.push(250),this.ca.push(170),this.ca.push(0)}Gc(this)}};
m.Ni=function(a){switch(a){case 32:this.ca.clear();this.g.clear();this.ca.push(this.h);Gc(this);break;case 96:this.L=!0;break;case 211:this.M=!0;break;case 212:this.B=!0;break;case 167:this.h|=32;break;case 168:this.h&=-33;break;case 169:this.ca.clear();this.g.clear();this.ca.push(0);Gc(this);break;case 170:this.ca.clear();this.g.clear();this.ca.push(85);Gc(this);break;case 171:this.ca.clear();this.g.clear();this.ca.push(0);Gc(this);break;case 173:this.h|=16;break;case 174:this.h&=-17;break;case 254:Zb(this.s)}};function Ic(a,b){this.h=this.g=this.N=this.B=this.l=0;this.i=-1;this.da=b;this.D=void 0===this.da;this.ea=void 0;this.name=this.D?"master":"slave ";this.F=!1;this.H=this.state=0;this.o=1;this.C=this.J=0;this.s=a;this.D?(this.ea=new Ic(this.s,this),this.j=function(){if(0<=this.i)cb(this.s);else{var c=this.g&this.l;if(c){c&=-c;var d=this.J?this.l:-1;this.N&&(this.N&-this.N&d)<=c||(this.i=hb(c),cb(this.s))}}},this.Kd=function(){if(-1!==this.i)if(0===this.g)this.i=-1;else{var c=1<<this.i;0===(this.C&
c)&&(this.g&=~c);this.o||(this.N|=c);2===this.i?this.ea.Kd():this.s.F(this.B|this.i);this.i=-1;this.j()}}):(this.j=function(){if(0<=this.i)cb(this.s);else{var c=this.g&this.l;if(c){c&=-c;var d=this.J?this.l:-1;this.N&&(this.N&-this.N&d)<=c||(this.i=hb(c),this.da.Id(2))}}},this.Kd=function(){if(-1!==this.i)if(0===this.g)this.i=-1,this.da.h&=-5,this.s.F(this.B|7);else{var c=1<<this.i;0===(this.C&c)&&(this.g&=~c);this.o||(this.N|=c);this.da.h&=-5;this.s.F(this.B|this.i);this.i=-1;this.j()}});this.D?
(a=32,b=1232):(a=160,b=1233);J(this.s.v,a,this,this.xh);I(this.s.v,a,this,this.wh);J(this.s.v,a|1,this,this.zh);I(this.s.v,a|1,this,this.yh);J(this.s.v,b,this,this.Ji);I(this.s.v,b,this,this.Ii);this.D?(this.Id=function(c){8<=c?this.ea.Id(c-8):(c=1<<c,0===(this.h&c)&&(this.g|=c,this.h|=c,this.j()))},this.Nd=function(c){8<=c?this.ea.Nd(c-8):(c=1<<c,this.h&c&&(this.h&=~c,this.g&=~c,this.j()))}):(this.Id=function(c){c=1<<c;0===(this.h&c)&&(this.g|=c,this.h|=c,this.j())},this.Nd=function(c){c=1<<c;this.h&
c&&(this.h&=~c,this.g&=~c,this.j())})}m=Ic.prototype;m.V=function(){var a=[];a[0]=this.l;a[1]=this.B;a[2]=this.N;a[3]=this.g;a[4]=this.D;a[5]=this.ea;a[6]=this.F;a[7]=this.state;a[8]=this.H;a[9]=this.o;a[10]=this.C;return a};m.G=function(a){this.l=a[0];this.B=a[1];this.N=a[2];this.g=a[3];this.D=a[4];this.ea&&this.ea.G(a[5]);this.F=a[6];this.state=a[7];this.H=a[8];this.o=a[9];this.C=a[10]};
m.xh=function(a){if(a&16)this.h=this.l=this.g=this.N=0,this.o=1,this.i=-1,this.F=a&1,this.state=1;else if(a&8)a&2&&(this.H=a&1),a&64&&(this.J=32===(a&32));else{var b=a>>5;1===b?this.N&=this.N-1:3===b?this.N&=~(1<<(a&7)):192!==(a&200)&&(this.N&=this.N-1);this.j()}};m.wh=function(){return this.H?this.N:this.g};m.zh=function(a){0===this.state?this.F?(this.F=!1,this.o=a&2):(this.l=~a,this.j()):1===this.state?(this.B=a,this.state++):2===this.state&&(this.state=0)};m.yh=function(){return~this.l&255};
m.Ii=function(){return this.C};m.Ji=function(a){this.C=a};function Jc(a){this.s=a;this.Jc=0;this.P=new Uint8Array(128);this.B=this.g=Date.now();this.o=this.j=0;this.D=!1;this.C=.9765625;this.l=38;this.h=2;this.df=this.i=0;J(a.v,112,this,function(b){this.Jc=b&127;this.df=b>>7});J(a.v,113,this,this.Eg);I(a.v,113,this,this.Dg)}m=Jc.prototype;m.V=function(){var a=[];a[0]=this.Jc;a[1]=this.P;a[2]=this.g;a[3]=this.B;a[4]=this.j;a[5]=this.o;a[6]=this.D;a[7]=this.C;a[8]=this.l;a[9]=this.h;a[10]=this.i;a[11]=this.df;return a};
m.G=function(a){this.Jc=a[0];this.P=a[1];this.g=a[2];this.B=a[3];this.j=a[4];this.o=a[5];this.D=a[6];this.C=a[7];this.l=a[8];this.h=a[9];this.i=a[10];this.df=a[11]};m.lb=function(a){a=Date.now();this.g+=a-this.B;this.B=a;this.D&&this.j<a?(this.s.Fa(8),this.i|=192,this.j+=this.C*Math.ceil((a-this.j)/this.C)):this.o&&this.o<a&&(this.s.Fa(8),this.i|=160,this.o=0)};function Kc(a,b){if(a.h&4)a=b;else{a=b;for(var c=b=0,d;a;)d=a%10,c|=d<<4*b,b++,a=(a-d)/10;a=c}return a}
function Lc(a,b){var c;a.h&4?c=b:c=(b&15)+10*(b>>4&15);return c}
m.Dg=function(){switch(this.Jc){case 0:return Kc(this,(new Date(this.g)).getUTCSeconds());case 2:return Kc(this,(new Date(this.g)).getUTCMinutes());case 4:return Kc(this,(new Date(this.g)).getUTCHours());case 7:return Kc(this,(new Date(this.g)).getUTCDate());case 8:return Kc(this,(new Date(this.g)).getUTCMonth()+1);case 9:return Kc(this,(new Date(this.g)).getUTCFullYear()%100);case 10:return this.l;case 11:return this.h;case 12:P(this.s,8);var a=this.i;this.i&=-241;return a;case 13:return 255;case 50:return Kc(this,
(new Date(this.g)).getUTCFullYear()/100|0);default:return this.P[this.Jc]}};m.Eg=function(a){switch(this.Jc){case 10:this.l=a&127;this.C=1E3/(32768>>(this.l&15)-1);break;case 11:this.h=a;this.h&64&&(this.j=Date.now());if(this.h&32){a=new Date;const b=Lc(this,this.P[1]),c=Lc(this,this.P[3]),d=Lc(this,this.P[5]);this.o=+new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),d,c,b))}break;case 1:case 3:case 5:this.P[this.Jc]=a}this.D=64===(this.h&64)&&0<(this.l&15)};function Mc(a,b,c){this.A=c;this.s=a;this.Sa=4;this.rc=this.bc=0;this.Tc=96;this.Nc=this.We=0;this.mc=1;this.X=this.Ne=this.bf=this.De=0;this.input=new sb(4096);this.h=[];switch(b){case 1016:this.g=0;this.X=4;break;case 760:this.g=1;this.X=3;break;case 1E3:this.g=2;this.X=4;break;case 744:this.X=this.g=3;break;default:this.g=0,this.X=4}this.A.register("serial"+this.g+"-input",function(d){this.input.push(d);this.Tc|=1;this.Sa|=4096;Nc(this)},this);a=a.v;J(a,b,this,function(d){Oc(this,d)},function(d){Oc(this,
d&255);Oc(this,d>>8)});J(a,b|1,this,function(d){this.rc&128?this.bc=this.bc&255|d<<8:(this.Nc=d&15,Nc(this))});I(a,b,this,function(){if(this.rc&128)return this.bc&255;var d=this.input.shift();0===this.input.length&&(this.Tc&=-2,this.Sa&=-4097,Nc(this));return d});I(a,b|1,this,function(){return this.rc&128?this.bc>>8:this.Nc&15});I(a,b|2,this,function(){var d=this.mc&15|192;2==this.mc&&(this.Sa&=-5,Nc(this));return d});J(a,b|2,this,function(d){this.We=d});I(a,b|3,this,function(){return this.rc});J(a,
b|3,this,function(d){this.rc=d});I(a,b|4,this,function(){return this.De});J(a,b|4,this,function(d){this.De=d});I(a,b|5,this,function(){return this.Tc});J(a,b|5,this,function(){});I(a,b|6,this,function(){return this.bf});J(a,b|6,this,function(){});I(a,b|7,this,function(){return this.Ne});J(a,b|7,this,function(d){this.Ne=d})}
Mc.prototype.V=function(){var a=[];a[0]=this.Sa;a[1]=this.bc;a[2]=this.rc;a[3]=this.Tc;a[4]=this.We;a[5]=this.Nc;a[6]=this.mc;a[7]=this.De;a[8]=this.bf;a[9]=this.Ne;a[10]=this.X;return a};Mc.prototype.G=function(a){this.Sa=a[0];this.bc=a[1];this.rc=a[2];this.Tc=a[3];this.We=a[4];this.Nc=a[5];this.mc=a[6];this.De=a[7];this.bf=a[8];this.Ne=a[9];this.X=a[10]};
function Nc(a){a.Sa&4096&&a.Nc&1?(a.mc=12,a.s.Fa(a.X)):a.Sa&4&&a.Nc&2?(a.mc=2,a.s.Fa(a.X)):a.Sa&1&&a.Nc&8?(a.mc=0,a.s.Fa(a.X)):(a.mc=1,P(a.s,a.X))}function Oc(a,b){if(a.rc&128)a.bc=a.bc&-256|b;else if(a.Sa|=4,Nc(a),255!==b){var c=String.fromCharCode(b);a.A.send("serial"+a.g+"-output-char",c);a.h.push(b);"\n"===c&&(a.A.send("serial"+a.g+"-output-line",String.fromCharCode.apply("",a.h)),a.h=[])}};function Pc(a){this.s=a;var b=a.v;Hb(a.u.Aa,{Ba:56,I:[134,128,19,113,7,0,128,2,8,0,128,6,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,1,0,0],bb:[],name:"acpi"});this.g=this.h=0;this.status=1;this.ae=this.$c=0;this.i=Qc(this,L());this.xb=new Uint8Array(4);I(b,45056,this,void 0,function(){return this.$c});J(b,45056,this,void 0,function(c){this.$c&=~c});I(b,45058,this,void 0,function(){return this.ae});J(b,45058,this,void 0,function(c){this.ae=c});
I(b,45060,this,void 0,function(){return this.status});J(b,45060,this,void 0,function(c){this.status=c});I(b,45064,this,void 0,void 0,function(){return Qc(this,L())&16777215});I(b,45024,this,function(){return this.xb[0]});I(b,45025,this,function(){return this.xb[1]});I(b,45026,this,function(){return this.xb[2]});I(b,45027,this,function(){return this.xb[3]});J(b,45024,this,function(c){this.xb[0]=c});J(b,45025,this,function(c){this.xb[1]=c});J(b,45026,this,function(c){this.xb[2]=c});J(b,45027,this,function(c){this.xb[3]=
c})}Pc.prototype.lb=function(a){a=Qc(this,a);var b=0!==((a^this.i)&8388608);this.ae&1&&b?(this.$c|=1,this.s.Fa(9)):P(this.s,9);this.i=a};function Qc(a,b){b=Math.round(3579.545*b);b===a.h?3579.545>a.g&&a.g++:a.h+a.g<=b&&(a.g=0,a.h=b);return a.h+a.g}Pc.prototype.V=function(){var a=[];a[0]=this.status;a[1]=this.$c;a[2]=this.ae;a[3]=this.xb;return a};Pc.prototype.G=function(a){this.status=a[0];this.$c=a[1];this.ae=a[2];this.xb=a[3]};function Rc(a){this.s=a;this.aa=this.ia=0;this.B=1;this.g=this.l=0;this.j=L();this.L=this.S=this.M=this.U=this.h=65536;this.H=this.F=this.C=0;this.i=new Int32Array(8);this.N=new Int32Array(8);this.o=new Int32Array(8);this.$=254;this.D=-1;this.W=this.error=this.J=0;Xa(a.v,4276092928,1048576,b=>{var c=b&3;return this.de(b&-4)>>8*c&255},()=>{},b=>this.de(b),(b,c)=>this.Dc(b,c))}m=Rc.prototype;
m.de=function(a){a=a-4276092928|0;switch(a){case 32:return this.ia;case 48:return 327700;case 128:return this.C;case 208:return this.J;case 224:return this.D;case 240:return this.$;case 256:case 272:case 288:case 304:case 320:case 336:case 352:case 368:return this.N[a-256>>4];case 384:case 400:case 416:case 432:case 448:case 464:case 480:case 496:return this.o[a-384>>4];case 512:case 528:case 544:case 560:case 576:case 592:case 608:case 624:return this.i[a-512>>4];case 640:return this.W;case 768:return this.F;
case 784:return this.H;case 800:return this.h;case 832:return this.U;case 848:return this.M;case 864:return this.S;case 880:return this.L;case 992:return this.aa;case 896:return this.l;case 912:return this.g;default:return 0}};
m.Dc=function(a,b){switch(a-4276092928|0){case 128:this.C=b&255;Sc(this);break;case 176:b=Tc(this.N);if(-1!==b){Uc(this.N,b);if(this.o[b>>5]>>(b&31)&1){a=this.s.u.nc;for(var c=0;24>c;c++){var d=a.g[c];(d&255)===b&&d&16384&&(a.g[c]&=-16385,Vc(a,c))}}Sc(this)}break;case 208:this.J=b&4278190080;break;case 224:this.D=b|16777215;break;case 240:this.$=b;break;case 640:this.W=this.error;this.error=0;break;case 768:a=b&255;c=b>>8&7;d=b>>15&1;var e=b>>18&3;this.F=b&-4097;0===e?Zc(this,a,c,d):1===e?Zc(this,
a,0,d):2===e&&Zc(this,a,c,d);break;case 784:this.H=b;break;case 800:this.h=b;break;case 832:this.U=b;break;case 848:this.M=b;break;case 864:this.S=b;break;case 880:this.L=b;break;case 992:this.aa=b;b=b&3|(b&8)>>1;this.B=7===b?0:b+1;break;case 896:this.l=b>>>0,this.g=b>>>0,this.j=L()}};
m.lb=function(a){0!==this.g&&(a=1E6*(a-this.j)/(1<<this.B)>>>0,0!==a&&(this.j+=a/1E6*(1<<this.B),this.g-=a,0>=this.g&&(a=this.h&393216,131072===a?(this.g%=this.l,0>=this.g&&(this.g+=this.l),0===(this.h&65536)&&Zc(this,this.h&255,0,!1)):0===a&&(this.g=0,0===(this.h&65536)&&Zc(this,this.h&255,0,!1)))))};function Zc(a,b,c,d){5===c||4===c||a.i[b>>5]>>(b&31)&1||($c(a.i,b),d?$c(a.o,b):Uc(a.o,b),Sc(a))}function Sc(a){var b=Tc(a.i);-1!==b&&(Tc(a.N)>=b||(b&240)<=(a.C&240)||cb(a.s))}
m.Kd=function(){var a=Tc(this.i);-1===a||Tc(this.N)>=a||(a&240)<=(this.C&240)||(Uc(this.i,a),$c(this.N,a),this.s.F(a),Sc(this))};m.V=function(){var a=[];a[0]=this.ia;a[1]=this.aa;a[2]=this.B;a[3]=this.l;a[4]=this.g;a[5]=this.j;a[6]=this.h;a[7]=this.U;a[8]=this.M;a[9]=this.S;a[10]=this.L;a[11]=this.C;a[12]=this.F;a[13]=this.H;a[14]=this.i;a[15]=this.N;a[16]=this.o;a[17]=this.$;a[18]=this.D;a[19]=this.J;a[20]=this.error;a[21]=this.W;return a};
m.G=function(a){this.ia=a[0];this.aa=a[1];this.B=a[2];this.l=a[3];this.g=a[4];this.j=a[5];this.h=a[6];this.U=a[7];this.M=a[8];this.S=a[9];this.L=a[10];this.C=a[11];this.F=a[12];this.H=a[13];this.i=a[14];this.N=a[15];this.o=a[16];this.$=a[17];this.D=a[18];this.J=a[19];this.error=a[20];this.W=a[21]};function $c(a,b){a[b>>5]|=1<<(b&31)}function Uc(a,b){a[b>>5]&=~(1<<(b&31))}function Tc(a){for(var b=7;0<=b;b--){var c=a[b];if(c)return ib(c>>>0)|b<<5}return-1};function ad(a){this.s=a;this.g=new Int32Array(24);this.o=new Int32Array(24);for(var b=0;b<this.g.length;b++)this.g[b]=65536;this.i=this.h=this.l=this.j=0;Xa(a.v,4273995776,131072,c=>{c=c-4273995776|0;return 16<=c&&20>c?(c-=16,this.read(this.j)>>8*c&255):0},()=>{},c=>{c=c-4273995776|0;return 0===c?this.j:16===c?this.read(this.j):0},(c,d)=>{c=c-4273995776|0;0===c?this.j=d:16===c&&this.write(this.j,d)})}
function Vc(a,b){var c=1<<b;if(0!==(a.h&c)){var d=a.g[b];if(0===(d&65536)){var e=d>>8&7;if(0===(d&32768))a.h&=~c;else if(a.g[b]|=16384,d&16384)return;0!==e&&1!==e||Zc(a.s.u.Fc,d&255,e,32768===(d&32768));a.g[b]&=-4097}}}m=ad.prototype;m.Id=function(a){if(!(24<=a)){var b=1<<a;0===(this.i&b)&&(this.i|=b,65536!==(this.g[a]&98304)&&(this.h|=b,Vc(this,a)))}};m.Nd=function(a){if(!(24<=a)){var b=1<<a;(this.i&b)===b&&(this.i&=~b,this.g[a]&32768&&(this.h&=~b))}};
m.read=function(a){if(0===a)return this.l<<24;if(1===a)return 1507345;if(2===a)return this.l<<24;if(16<=a&&64>a){var b=a-16>>1;return a&1?this.o[b]:this.g[b]}return 0};m.write=function(a,b){if(0===a)this.l=b>>>24&15;else if(1!==a&&2!==a&&16<=a&&64>a){var c=a-16>>1;a&1?this.o[c]=b&4278190080:(this.g[c]=b&110591|this.g[c]&-110592,Vc(this,c))}};m.V=function(){var a=[];a[0]=this.g;a[1]=this.o;a[2]=this.j;a[3]=this.l;a[4]=this.h;a[5]=this.i;return a};
m.G=function(a){this.g=a[0];this.o=a[1];this.j=a[2];this.l=a[3];this.h=a[4];this.i=a[5]};function bd(a){this.message=a}bd.prototype=Error();const cd={Uint8Array,Int8Array,Uint16Array,Int16Array,Uint32Array,Int32Array,Float32Array,Float64Array};
function dd(a,b){if("object"!==typeof a||null===a)return a;if(a instanceof Array)return a.map(e=>dd(e,b));a.constructor===Object&&console.log(a);if(a.BYTES_PER_ELEMENT){var c=new Uint8Array(a.buffer,a.byteOffset,a.length*a.BYTES_PER_ELEMENT);return{__state_type__:a.constructor.name.replace("bound ",""),buffer_id:b.push(c)-1}}a=a.V();c=[];for(var d=0;d<a.length;d++)c[d]=dd(a[d],b);return c}
function ed(a,b){if("object"!==typeof a||null===a)return a;if(a instanceof Array){for(let c=0;c<a.length;c++)a[c]=ed(a[c],b);return a}return new cd[a.__state_type__](b[a.buffer_id])}
Za.prototype.fe=function(){for(var a=[],b=dd(this,a),c=[],d=0,e=0;e<a.length;e++){var f=a[e].byteLength;c[e]={offset:d,length:f};d+=f;d=d+3&-4}e=JSON.stringify({buffer_infos:c,state:b});e=(new TextEncoder).encode(e);b=16+e.length;b=b+3&-4;f=b+d;d=new ArrayBuffer(f);var k=new Int32Array(d,0,4);(new Uint8Array(d,16,e.length)).set(e);b=new Uint8Array(d,b);k[0]=-2039052682;k[1]=6;k[2]=f;k[3]=e.length;for(e=0;e<a.length;e++)b.set(a[e],c[e].offset);return d};
Za.prototype.Gd=function(a){function b(q,v){const n=q.length;if(16>n)throw new bd("Invalid length: "+n);q=new Int32Array(q.buffer,q.byteOffset,4);if(-2039052682!==q[0])throw new bd("Invalid header: "+O(q[0]>>>0));if(6!==q[1])throw new bd("Version mismatch: dump="+q[1]+" we=6");if(v&&q[2]!==n)throw new bd("Length doesn't match header: real="+n+" header="+q[2]);return q[3]}function c(q){q=(new TextDecoder).decode(q);return JSON.parse(q)}a=new Uint8Array(a);if(4247762216===(new Uint32Array(a.buffer,
0,1))[0]){var d=this.qj(a.length);(new Uint8Array(this.ac.buffer,this.sj(d),a.length)).set(a);var e=this.qe(d,16),f=new Uint8Array(this.ac.buffer,e,16),k=b(f,!1);this.re(e,16);e=this.qe(d,k);f=new Uint8Array(this.ac.buffer,e,k);f=c(f);this.re(e,k);e=f.state;var g=f.buffer_infos;f=[];k=16+k;for(var h of g){g=(k+3&-4)-k;if(1048576<h.length){var l=this.qe(d,g);this.re(l,g);l=new Uint8Array(h.length);f.push(l.buffer);for(var p=0;p<h.length;){const q=Math.min(h.length-p,1048576),v=this.qe(d,q);l.set(new Uint8Array(this.ac.buffer,
v,q),p);this.re(v,q);p+=q}}else l=this.qe(d,g+h.length),p=l+g,f.push(this.ac.buffer.slice(p,p+h.length)),this.re(l,g+h.length);k+=g+h.length}e=ed(e,f);this.G(e);this.rj(d)}else{h=b(a,!0);if(0>h||h+12>=a.length)throw new bd("Invalid info block length: "+h);e=c(a.subarray(16,16+h));d=e.state;e=e.buffer_infos;let q=16+h;q=q+3&-4;h=e.map(v=>{const n=q+v.offset;return a.buffer.slice(n,n+v.length)});d=ed(d,h);this.G(d)}};function fd(a,b,c){this.s=a;this.Aa=a.u.Aa;this.Cd=c;this.A=b;this.A.register("net0-receive",function(d){if(!(this.Qa&1)&&(this.A.send("eth-receive-end",[d.length]),this.Hd&16||this.Hd&4&&255===d[0]&&255===d[1]&&255===d[2]&&255===d[3]&&255===d[4]&&255===d[5]||!(this.Hd&8&&1===(d[0]&1)||d[0]!==this.pa[0]||d[1]!==this.pa[1]||d[2]!==this.pa[2]||d[3]!==this.pa[3]||d[4]!==this.pa[4]||d[5]!==this.pa[5]))){var e=this.pb<<8,f=Math.max(60,d.length)+4,k=e+4,g=this.pb+1+(f>>8);if(!((this.cc>this.pb?this.cc-
this.pb:this.Pa-this.pb+this.cc-this.Bb)<1+(f>>8)&&0!==this.cc)){if(e+f>this.Pa<<8){var h=(this.Pa<<8)-k;this.memory.set(d.subarray(0,h),k);this.memory.set(d.subarray(h),this.Bb<<8)}else this.memory.set(d,k),60>d.length&&this.memory.fill(0,k+d.length,k+60);g>=this.Pa&&(g+=this.Bb-this.Pa);this.memory[e]=1;this.memory[e+1]=g;this.memory[e+2]=f;this.memory[e+3]=f>>8;this.pb=g;gd(this,1)}}},this);this.port=768;this.name="ne2k";this.I=[236,16,41,128,3,1,0,0,0,0,0,2,0,0,0,0,this.port&255|1,this.port>>
8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,26,0,17,0,0,184,254,0,0,0,0,0,0,0,0,0,1,0,0];this.Ba=40;this.bb=[{size:32}];this.ye=this.N=0;this.Qa=1;this.Oe=this.jd=this.ib=this.Qd=0;this.memory=new Uint8Array(32768);this.qf=this.Hd=0;this.pf=1;this.pa=new Uint8Array([0,34,21,255*Math.random()|0,255*Math.random()|0,255*Math.random()|0]);for(b=0;6>b;b++)this.memory[b<<1]=this.memory[b<<1|1]=this.pa[b];this.memory[28]=this.memory[29]=87;this.memory[30]=this.memory[31]=87;this.na=0;this.Bb=
64;this.Pa=128;this.cc=this.pb=76;b=a.v;I(b,this.port|0,this,function(){return this.Qa});J(b,this.port|0,this,function(d){this.Qa=d;this.Qa&1||(d&24&&0===this.ib&&gd(this,64),d&4&&(d=this.Oe<<8,d=this.memory.subarray(d,d+this.jd),this.A.send("net0-send",d),this.A.send("eth-transmit-end",[d.length]),this.Qa&=-5,gd(this,2)))});I(b,this.port|13,this,function(){return 0});I(b,this.port|14,this,function(){return 0});I(b,this.port|15,this,function(){return 0});I(b,this.port|31,this,function(){0===Q(this)&&
gd(this,128);return 0});J(b,this.port|31,this,function(){});I(b,this.port|1,this,function(){var d=Q(this);return 0===d?this.Bb:1===d?this.pa[0]:2===d?this.Bb:0});J(b,this.port|1,this,function(d){var e=Q(this);0===e?this.Bb=d:1===e&&(this.pa[0]=d)});I(b,this.port|2,this,function(){var d=Q(this);return 0===d?this.Pa:1===d?this.pa[1]:2===d?this.Pa:0});J(b,this.port|2,this,function(d){var e=Q(this);0===e?(d>this.memory.length>>8&&(d=this.memory.length>>8),this.Pa=d):1===e&&(this.pa[1]=d)});I(b,this.port|
7,this,function(){var d=Q(this);if(0===d)return this.N;if(1===d)return this.pb});J(b,this.port|7,this,function(d){var e=Q(this);0===e?(this.N&=~d,hd(this)):1===e&&(this.pb=d)});J(b,this.port|13,this,function(d){0===Q(this)&&(this.qf=d)});J(b,this.port|14,this,function(d){0===Q(this)&&(this.Qd=d)});I(b,this.port|10,this,function(){return 0===Q(this)?80:0});J(b,this.port|10,this,function(d){0===Q(this)&&(this.ib=this.ib&65280|d&255)});I(b,this.port|11,this,function(){return 0===Q(this)?67:0});J(b,this.port|
11,this,function(d){0===Q(this)&&(this.ib=this.ib&255|d<<8&65280)});I(b,this.port|8,this,function(){if(0===Q(this))return this.na&255});J(b,this.port|8,this,function(d){0===Q(this)&&(this.na=this.na&65280|d&255)});I(b,this.port|9,this,function(){if(0===Q(this))return this.na>>8&255});J(b,this.port|9,this,function(d){0===Q(this)&&(this.na=this.na&255|d<<8&65280)});J(b,this.port|15,this,function(d){0===Q(this)&&(this.ye=d,hd(this))});I(b,this.port|3,this,function(){var d=Q(this);return 0===d?this.cc:
1===d?this.pa[2]:0});J(b,this.port|3,this,function(d){var e=Q(this);0===e?this.cc=d:1===e&&(this.pa[2]=d)});I(b,this.port|4,this,function(){var d=Q(this);return 0===d?this.pf:1===d?this.pa[3]:0});J(b,this.port|4,this,function(d){var e=Q(this);0===e?this.Oe=d:1===e&&(this.pa[3]=d)});I(b,this.port|5,this,function(){var d=Q(this);return 0===d?0:1===d?this.pa[4]:0});J(b,this.port|5,this,function(d){var e=Q(this);0===e?this.jd=this.jd&-256|d:1===e&&(this.pa[4]=d)});I(b,this.port|6,this,function(){var d=
Q(this);return 0===d?0:1===d?this.pa[5]:0});J(b,this.port|6,this,function(d){var e=Q(this);0===e?this.jd=this.jd&255|d<<8:1===e&&(this.pa[5]=d)});I(b,this.port|12,this,function(){return 0===Q(this)?9:0});J(b,this.port|12,this,function(d){0===Q(this)&&(this.Hd=d)});I(b,this.port|16,this,this.Gg,this.Af,this.Fg);J(b,this.port|16,this,this.Bf,this.Bf,this.Hg);Hb(a.u.Aa,this)}m=fd.prototype;
m.V=function(){var a=[];a[0]=this.N;a[1]=this.ye;a[2]=this.Qa;a[3]=this.Qd;a[4]=this.ib;a[5]=this.jd;a[6]=this.Oe;a[7]=this.na;a[8]=this.Bb;a[9]=this.pb;a[10]=this.cc;a[11]=this.Pa;a[12]=this.Hd;a[13]=this.qf;a[14]=this.pf;a[15]=this.pa;a[16]=this.memory;return a};
m.G=function(a){this.N=a[0];this.ye=a[1];this.Qa=a[2];this.Qd=a[3];this.ib=a[4];this.jd=a[5];this.Oe=a[6];this.na=a[7];this.Bb=a[8];this.pb=a[9];this.cc=a[10];this.Pa=a[11];this.Hd=a[12];this.qf=a[13];this.pf=a[14];this.Cd&&(this.pa=a[15],this.memory=a[16])};function gd(a,b){a.N|=b;hd(a)}function hd(a){a.ye&a.N?a.Aa.wa(a.Ba):$b(a.Aa,a.Ba)}function id(a,b){if(16>=a.na||16384<=a.na&&32768>a.na)a.memory[a.na]=b;a.na++;a.ib--;a.na>=a.Pa<<8&&(a.na+=a.Bb-a.Pa<<8);0===a.ib&&gd(a,64)}
m.Bf=function(a){id(this,a);this.Qd&1&&id(this,a>>8)};m.Hg=function(a){id(this,a);id(this,a>>8);id(this,a>>16);id(this,a>>24)};function jd(a){let b=0;32768>a.na&&(b=a.memory[a.na]);a.na++;a.ib--;a.na>=a.Pa<<8&&(a.na+=a.Bb-a.Pa<<8);0===a.ib&&gd(a,64);return b}m.Gg=function(){return this.Af()&255};m.Af=function(){return this.Qd&1?jd(this)|jd(this)<<8:jd(this)};m.Fg=function(){return jd(this)|jd(this)<<8|jd(this)<<16|jd(this)<<24};function Q(a){return a.Qa>>6&3};var kd=new Uint8Array(256),ld=[],md=[],nd=[],od=new Uint8Array(256),pd=[];
function qd(a,b){this.s=a;this.A=b;this.ua=new sb(64);this.Z=new sb(64);this.i=this.o=this.cb=this.H=0;this.K=new Uint8Array(256);rd(this);this.yd=!1;this.je=0;this.fb=this.eb=this.Mc=this.Rb=!1;this.qb=[new tb,new tb];this.Za=a.u.Za;this.$a=this.Qb=this.j=this.tb=this.l=this.D=0;this.ub=1;this.Lc=5;this.sb=!1;this.g=new ArrayBuffer(65536);this.$=new Int8Array(this.g);this.B=new Uint8Array(this.g);this.W=new Int16Array(this.g);this.aa=new Uint16Array(this.g);this.Ja=new qb(this.g);this.vb=this.C=
!1;this.Ua=22050;b.send("dac-tell-sampling-rate",this.Ua);this.h=1;this.L=170;this.J=0;this.Gc=new Uint8Array(256);this.F=new sb(64);this.S=this.M=this.La=0;this.Xg=!1;this.X=5;this.Qc=new Uint8Array(16);a.v.dd(544,this,this.ag,this.cg,this.Ah,this.Ch);a.v.dd(904,this,this.ag,this.cg);a.v.dd(548,this,this.Eh,this.Gh);I(a.v,550,this,this.Ih);I(a.v,551,this,this.Kh);I(a.v,552,this,this.Mh);I(a.v,553,this,this.Oh);I(a.v,554,this,this.Qh);I(a.v,555,this,this.Sh);I(a.v,556,this,this.Uh);I(a.v,557,this,
this.Wh);a.v.dd(558,this,this.Yh,this.$h);a.v.Cb(544,this,this.bg,this.dg,this.Bh,this.Dh);a.v.Cb(904,this,this.bg,this.dg);a.v.Cb(548,this,this.Fh,this.Hh);J(a.v,550,this,this.Jh);J(a.v,551,this,this.Lh);a.v.Cb(552,this,this.Nh,this.Ph);J(a.v,554,this,this.Rh);J(a.v,555,this,this.Th);J(a.v,556,this,this.Vh);J(a.v,557,this,this.Xh);J(a.v,558,this,this.Zh);J(a.v,559,this,this.ai);a.v.dd(816,this,this.Ei,this.Gi);a.v.Cb(816,this,this.Fi,this.Hi);this.Za.Pe.push({xe:this.ia,nf:this});b.register("dac-request-data",
function(){!this.tb||this.vb?sd(this):td(this)},this);b.register("speaker-has-initialized",function(){rd(this)},this);b.send("speaker-confirm-initialized");ud(this)}function ud(a){a.ua.clear();a.Z.clear();a.cb=0;a.o=0;a.yd=!1;a.je=0;a.Rb=!1;a.Mc=!1;a.eb=!1;a.fb=!1;a.qb[0].clear();a.qb[1].clear();a.D=0;a.l=0;a.tb=0;a.j=0;a.Qb=0;a.$a=0;a.sb=!1;a.B.fill(0);a.C=!1;a.vb=!1;a.L=170;a.J=0;a.Ua=22050;a.h=1;vd(a,1);a.Qc.fill(0);a.Gc.fill(0);a.Gc[5]=1;a.Gc[9]=248}m=qd.prototype;
m.V=function(){var a=[];a[2]=this.H;a[3]=this.cb;a[4]=this.o;a[5]=this.i;a[6]=this.K;a[7]=this.yd;a[8]=this.je;a[9]=this.Rb;a[10]=this.Mc;a[11]=this.eb;a[12]=this.fb;a[15]=this.D;a[16]=this.l;a[17]=this.tb;a[18]=this.j;a[19]=this.Qb;a[20]=this.$a;a[21]=this.ub;a[22]=this.Lc;a[23]=this.sb;a[24]=this.B;a[25]=this.C;a[26]=this.vb;a[27]=this.Ua;a[28]=this.h;a[29]=this.L;a[30]=this.J;a[31]=this.Gc;a[33]=this.Ya;a[34]=this.X;a[35]=this.Qc;return a};
m.G=function(a){this.H=a[2];this.cb=a[3];this.o=a[4];this.i=a[5];this.K=a[6];wd(this);this.yd=a[7];this.je=a[8];this.Rb=a[9];this.Mc=a[10];this.eb=a[11];this.fb=a[12];this.D=a[15];this.l=a[16];this.tb=a[17];this.j=a[18];this.Qb=a[19];this.$a=a[20];this.ub=a[21];this.Lc=a[22];this.sb=a[23];this.B=a[24];this.C=a[25];this.vb=a[26];this.Ua=a[27];this.h=a[28];this.L=a[29];this.J=a[30];this.Gc=a[31];this.Ya=a[33];this.X=a[34];this.Qc=a[35];this.g=this.B.buffer;this.$=new Int8Array(this.g);this.W=new Int16Array(this.g);
this.aa=new Uint16Array(this.g);this.Ja=new qb(this.g);this.vb?this.A.send("dac-disable"):this.A.send("dac-enable")};m.ag=function(){return 255};m.cg=function(){return 255};m.Ah=function(){return 255};m.Ch=function(){return 255};m.Eh=function(){return this.i};m.Gh=function(){var a=this.i,b=md[a];return b?b.call(this):this.K[a]};m.Ih=function(){return 255};m.Kh=function(){return 255};m.Mh=function(){return 255};m.Oh=function(){return 255};m.Qh=function(){this.Z.length&&(this.H=this.Z.shift());return this.H};
m.Sh=function(){return 255};m.Uh=function(){return 127};m.Wh=function(){return 255};m.Yh=function(){this.Qc[1]&&vd(this,1);return(this.Z.length&&!this.Rb)<<7|127};m.$h=function(){vd(this,2);return 0};m.bg=function(){this.M=0};m.dg=function(a){var b=pd[this.M];b||(b=this.U);b.call(this,a,0,this.M)};m.Bh=function(){this.S=0};m.Dh=function(a){var b=pd[this.S];b||(b=this.U);b.call(this,a,1,this.S)};m.Fh=function(a){this.i=a};m.Hh=function(a){xd(this,this.i,a)};
m.Jh=function(a){this.Rb?this.Rb=!1:a&&ud(this);this.Z.clear();this.Z.push(170)};m.Lh=function(){};m.Nh=function(){};m.Ph=function(){};m.Rh=function(){};m.Th=function(){};m.Vh=function(a){0===this.cb?(this.cb=a,this.ua.clear(),this.o=kd[a]):this.ua.push(a);this.ua.length>=this.o&&(a=ld[this.cb],a||(a=this.Ff),a.call(this),this.o=this.cb=0,this.ua.clear())};m.Xh=function(){};m.Zh=function(){};m.ai=function(){};m.Ei=function(){this.F.length&&(this.La=this.F.shift());return this.La};m.Fi=function(){};
m.Gi=function(){return 0|128*!this.F.length};m.Hi=function(a){255==a&&(this.F.clear(),this.F.push(254))};m.Ff=function(){};function S(a,b,c){c||(c=qd.prototype.Ff);for(var d=0;d<a.length;d++)kd[a[d]]=b,ld[a[d]]=c}function yd(a){for(var b=[],c=0;16>c;c++)b.push(a+c);return b}S([14],2,function(){this.Gc[this.ua.shift()]=this.ua.shift()});S([15],1,function(){this.Z.clear();this.Z.push(this.Gc[this.ua.shift()])});
S([16],1,function(){var a=this.ua.shift();a=zd(a/127.5+-1);this.qb[0].push(a);this.qb[1].push(a);this.A.send("dac-enable")});S([20,21],2,function(){this.Qb=1;this.$a=this.ub;this.Rb=this.eb=this.fb=this.sb=!1;Ad(this);Bd(this)});S([22],2);S([23],2);S([28],0,function(){this.Qb=1;this.$a=this.ub;this.sb=!0;this.Rb=this.eb=this.fb=!1;Bd(this)});S([31],0);S([32],0,function(){this.Z.clear();this.Z.push(127)});S([36],2);S([44],0);S([48],0);S([49],0);S([52],0);S([53],0);S([54],0);S([55],0);S([56],0);
S([64],1,function(){Cd(this,1E6/(256-this.ua.shift())/(this.Mc?2:1))});S([65,66],2,function(){Cd(this,this.ua.shift()<<8|this.ua.shift())});S([72],2,function(){Ad(this)});S([116],2);S([117],2);S([118],2);S([119],2);S([125],0);S([127],0);S([128],2);S([144],0,function(){this.Qb=1;this.$a=this.ub;this.sb=!0;this.fb=!1;this.Rb=!0;this.eb=!1;Bd(this)});S([145],0);S([152],0);S([153],0);S([160],0);S([168],0);
S(yd(176),3,function(){if(!(this.cb&8)){var a=this.ua.shift();this.Qb=2;this.$a=this.Lc;this.sb=!!(this.cb&4);this.fb=!!(a&16);this.Mc=!!(a&32);this.eb=!0;Ad(this);Bd(this)}});S(yd(192),3,function(){if(!(this.cb&8)){var a=this.ua.shift();this.Qb=1;this.$a=this.ub;this.sb=!!(this.cb&4);this.fb=!!(a&16);this.Mc=!!(a&32);this.eb=!1;Ad(this);Bd(this)}});S([208],0,function(){this.vb=!0;this.A.send("dac-disable")});S([209],0,function(){this.yd=!0});S([211],0,function(){this.yd=!1});
S([212],0,function(){this.vb=!1;this.A.send("dac-enable")});S([213],0,function(){this.vb=!0;this.A.send("dac-disable")});S([214],0,function(){this.vb=!1;this.A.send("dac-enable")});S([216],0,function(){this.Z.clear();this.Z.push(255*this.yd)});S([217,218],0,function(){this.sb=!1});S([224],1,function(){this.Z.clear();this.Z.push(~this.ua.shift())});S([225],0,function(){this.Z.clear();this.Z.push(4);this.Z.push(5)});S([226],1);
S([227],0,function(){this.Z.clear();for(var a=0;44>a;a++)this.Z.push("COPYRIGHT (C) CREATIVE TECHNOLOGY LTD, 1992.".charCodeAt(a));this.Z.push(0)});S([228],1,function(){this.je=this.ua.shift()});S([232],0,function(){this.Z.clear();this.Z.push(this.je)});S([242,243],0,function(){this.wa()});var Dd=new Uint8Array(256);Dd[14]=255;Dd[15]=7;Dd[55]=56;S([249],1,function(){var a=this.ua.shift();this.Z.clear();this.Z.push(Dd[a])});function xd(a,b,c){(b=nd[b])&&b.call(a,c)}qd.prototype.Ka=function(){return this.K[this.i]};
qd.prototype.Xa=function(a){this.K[this.i]=a};function rd(a){a.K[4]=204;a.K[34]=204;a.K[38]=204;a.K[40]=0;a.K[46]=0;a.K[10]=0;a.K[48]=192;a.K[49]=192;a.K[50]=192;a.K[51]=192;a.K[52]=192;a.K[53]=192;a.K[54]=0;a.K[55]=0;a.K[56]=0;a.K[57]=0;a.K[59]=0;a.K[60]=31;a.K[61]=21;a.K[62]=11;a.K[63]=0;a.K[64]=0;a.K[65]=0;a.K[66]=0;a.K[67]=0;a.K[68]=128;a.K[69]=128;a.K[70]=128;a.K[71]=128;wd(a)}function wd(a){for(var b=1;b<a.K.length;b++)od[b]||xd(a,b,a.K[b])}function Ed(a,b){b||(b=qd.prototype.Ka);md[a]=b}
function Fd(a,b){b||(b=qd.prototype.Xa);nd[a]=b}function Gd(a,b,c){od[a]=1;md[a]=function(){return this.K[b]&240|this.K[c]>>>4};nd[a]=function(d){this.K[a]=d;var e=d<<4&240|this.K[c]&15;xd(this,b,d&240|this.K[b]&15);xd(this,c,e)}}function Hd(a,b,c){md[a]=qd.prototype.Ka;nd[a]=function(d){this.K[a]=d;this.A.send("mixer-volume",[b,c,(d>>>2)-62])}}Ed(0,function(){rd(this);return 0});Fd(0);Gd(4,50,51);Gd(34,48,49);Gd(38,52,53);Gd(40,54,55);Gd(46,56,57);Hd(48,0,0);Hd(49,0,1);Hd(50,2,0);Hd(51,2,1);Ed(59);
Fd(59,function(a){this.K[59]=a;this.A.send("mixer-volume",[1,2,6*(a>>>6)-18])});Ed(65);Fd(65,function(a){this.K[65]=a;this.A.send("mixer-gain-left",6*(a>>>6))});Ed(66);Fd(66,function(a){this.K[66]=a;this.A.send("mixer-gain-right",6*(a>>>6))});Ed(68);Fd(68,function(a){this.K[68]=a;a>>>=3;this.A.send("mixer-treble-left",a-(16>a?14:16))});Ed(69);Fd(69,function(a){this.K[69]=a;a>>>=3;this.A.send("mixer-treble-right",a-(16>a?14:16))});Ed(70);
Fd(70,function(a){this.K[70]=a;a>>>=3;this.A.send("mixer-bass-right",a-(16>a?14:16))});Ed(71);Fd(71,function(a){this.K[71]=a;a>>>=3;this.A.send("mixer-bass-right",a-(16>a?14:16))});Ed(128,function(){switch(this.X){case 2:return 1;case 5:return 2;case 7:return 4;case 10:return 8;default:return 0}});Fd(128,function(a){a&1&&(this.X=2);a&2&&(this.X=5);a&4&&(this.X=7);a&8&&(this.X=10)});
Ed(129,function(){var a=0;switch(this.ub){case 0:a|=1;break;case 1:a|=2;break;case 3:a|=8}switch(this.Lc){case 5:a|=32;break;case 6:a|=64;break;case 7:a|=128}return a});Fd(129,function(a){a&1&&(this.ub=0);a&2&&(this.ub=1);a&8&&(this.ub=3);a&32&&(this.Lc=5);a&64&&(this.Lc=6);a&128&&(this.Lc=7)});Ed(130,function(){for(var a=32,b=0;16>b;b++)a|=b*this.Qc[b];return a});qd.prototype.U=function(){};function T(a,b){b||(b=qd.prototype.U);for(var c=0;c<a.length;c++)pd[a[c]]=b}
function Id(a,b){for(var c=[];a<=b;a++)c.push(a);return c}var U=new Uint8Array(32);U[0]=0;U[1]=1;U[2]=2;U[3]=3;U[4]=4;U[5]=5;U[8]=6;U[9]=7;U[10]=8;U[11]=9;U[12]=10;U[13]=11;U[16]=12;U[17]=13;U[18]=14;U[19]=15;U[20]=16;U[21]=17;T([1],function(a,b){this.Xg[b]=a&1});T([2]);T([3]);T([4],function(){});T([5],function(){});T([8],function(){});T(Id(32,53),function(){});T(Id(64,85),function(){});T(Id(96,117),function(){});T(Id(128,149),function(){});T(Id(160,168),function(){});T(Id(176,184),function(){});
T([189],function(){});T(Id(192,200),function(){});T(Id(224,245),function(){});function Cd(a,b){a.Ua=b;a.A.send("dac-tell-sampling-rate",b)}function Ad(a){a.D=1+(a.ua.shift()<<0)+(a.ua.shift()<<8)}function Bd(a){a.h=1;a.eb&&(a.h*=2);a.l=a.D*a.h;a.j=1024*a.h;a.j=Math.min(Math.max(a.l>>2&-4,32),a.j);a.C=!0;a.Za.Nb[a.$a]||a.ia(a.$a)}qd.prototype.ia=function(a){a===this.$a&&this.C&&(this.C=!1,this.tb=this.l,this.vb=!1,this.A.send("dac-enable"))};
function td(a){var b=Math.min(a.tb,a.j),c=Math.floor(b/a.h);a.Za.Rd(a.Ja,0,b,a.$a,d=>{if(!d){d=a.eb?32767.5:127.5;var e=a.fb?0:-1,f=a.Mc?1:2,k;a.eb?k=a.fb?a.W:a.aa:k=a.fb?a.$:a.B;for(var g=0,h=0;h<c;h++)for(var l=zd(k[h]/d+e),p=0;p<f;p++)a.qb[g].push(l),g^=1;sd(a);a.tb-=b;a.tb||(a.wa(a.Qb),a.sb&&(a.tb=a.l))}})}function sd(a){if(a.qb[0].length){var b=ub(a.qb[0],a.qb[0].length),c=ub(a.qb[1],a.qb[1].length);a.A.send("dac-send-data",[b,c],[b.buffer,c.buffer])}}
qd.prototype.wa=function(a){this.Qc[a]=1;this.s.Fa(this.X)};function vd(a,b){a.Qc[b]=0;P(a.s,a.X)}function zd(a){return-1*(-1>a)+1*(1<a)+(-1<=a&&1>=a)*a};function ba(a,b){this.s=a;this.Aa=a.u.Aa;this.ue=b.ue;this.I=[244,26,b.ue&255,b.ue>>8,7,5,16,0,1,0,2,0,0,0,0,0,1,168,0,0,0,16,191,254,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,26,b.tg&255,b.tg>>8,0,0,0,0,64,0,0,0,0,0,0,0,0,1,0,0];this.I=this.I.concat(Array(256-this.I.length).fill(0));this.Ba=b.Ba;this.bb=[];this.name=b.name;this.i=this.C=0;this.l=new Uint32Array(4);this.h=new Uint32Array(4);for(var c of b.te.Gf)this.l[c>>>5]|=1<<(c&31),this.h[c>>>5]|=1<<(c&31);b.te.Gf.includes(32);this.B=!0;this.j=
0;this.F=!1;this.D=0;this.Ta=[];for(const d of b.te.Ta)this.Ta.push(new Jd(a,this,d));this.o=0;this.g=this.Ta[0];this.Ub=0;c=[];c.push(Kd(this,b.te));c.push(Ld(b.notification));c.push(Md(this,b.Ub));b.Cf&&(b=b.Cf,c.push.call(c,{type:4,od:3,port:b.Oc,ne:!1,offset:0,Td:new Uint8Array(0),hd:b.hd}));Nd(this,c);Hb(a.u.Aa,this);this.reset()}
function Kd(a,b){return{type:1,od:0,port:b.Oc,ne:!1,offset:0,Td:new Uint8Array(0),hd:[{bytes:4,name:"device_feature_select",read:()=>a.C,write:c=>{a.C=c}},{bytes:4,name:"device_feature",read:()=>a.l[a.C]||0,write:()=>{}},{bytes:4,name:"driver_feature_select",read:()=>a.i,write:c=>{a.i=c}},{bytes:4,name:"driver_feature",read:()=>a.h[a.i]||0,write:c=>{const d=a.l[a.i];a.i<a.h.length&&(a.h[a.i]=c&d);a.B=a.B&&!(c&~d)}},{bytes:2,name:"msix_config",read:()=>65535,write:()=>{}},{bytes:2,name:"num_queues",
read:()=>a.Ta.length,write:()=>{}},{bytes:1,name:"device_status",read:()=>a.j,write:c=>{0===c&&a.reset();c&~a.j&4&&a.j&64&&(a.F=!0,a.j&4&&a.wa(2));a.B||(c&=-9);a.j=c}},{bytes:1,name:"config_generation",read:()=>a.D,write:()=>{}},{bytes:2,name:"queue_select",read:()=>a.o,write:c=>{a.o=c;a.o<a.Ta.length||(a.g=null)}},{bytes:2,name:"queue_size",read:()=>a.g?a.g.size:0,write:c=>{if(a.g){c&c-1&&(c=1<<ib(c-1)+1);c>a.g.Cc&&(c=a.g.Cc);var d=a.g;d.size=c;d.o=c-1}}},{bytes:2,name:"queue_msix_vector",read:()=>
65535,write:()=>{}},{bytes:2,name:"queue_enable",read:()=>a.g?a.g.enabled|0:0,write:c=>{a.g&&1===c&&(c=a.g,c.l&&c.h&&c.g&&(a.g.enabled=!0))}},{bytes:2,name:"queue_notify_off",read:()=>a.g?a.g.Zd:0,write:()=>{}},{bytes:4,name:"queue_desc (low dword)",read:()=>a.g?a.g.l:0,write:c=>{a.g&&(a.g.l=c)}},{bytes:4,name:"queue_desc (high dword)",read:()=>0,write:()=>{}},{bytes:4,name:"queue_avail (low dword)",read:()=>a.g?a.g.h:0,write:c=>{a.g&&(a.g.h=c)}},{bytes:4,name:"queue_avail (high dword)",read:()=>
0,write:()=>{}},{bytes:4,name:"queue_used (low dword)",read:()=>a.g?a.g.g:0,write:c=>{a.g&&(a.g.g=c)}},{bytes:4,name:"queue_used (high dword)",read:()=>0,write:()=>{}}]}}function Ld(a){const b=[];let c;c=a.$i?0:2;for(const [d,e]of a.bh.entries())b.push({bytes:2,name:"notify"+d,read:()=>65535,write:e||(()=>{})});return{type:2,od:1,port:a.Oc,ne:!1,offset:0,Td:new Uint8Array([c&255,c>>8&255,c>>16&255,c>>24]),hd:b}}
function Md(a,b){return{type:3,od:2,port:b.Oc,ne:!1,offset:0,Td:new Uint8Array(0),hd:[{bytes:1,name:"isr_status",read:()=>{const c=a.Ub;a.Ub=0;$b(a.Aa,a.Ba);return c},write:()=>{}}]}}
function Nd(a,b){let c=a.I[52]=64;var d=c;for(const f of b){b=16+f.Td.length;d=c;c=d+b;var e=f.hd.reduce((k,g)=>k+g.bytes,0);e+=f.offset;e=16>e?16:1<<ib(e-1)+1;a.bb[f.od]={size:e};a.I[d]=9;a.I[d+1]=c;a.I[d+2]=b;a.I[d+3]=f.type;a.I[d+4]=f.od;a.I[d+5]=0;a.I[d+6]=0;a.I[d+7]=0;a.I[d+8]=f.offset&255;a.I[d+9]=f.offset>>>8&255;a.I[d+10]=f.offset>>>16&255;a.I[d+11]=f.offset>>>24;a.I[d+12]=e&255;a.I[d+13]=e>>>8&255;a.I[d+14]=e>>>16&255;a.I[d+15]=e>>>24;for(const [k,g]of f.Td.entries())a.I[d+16+k]=g;d=16+4*
f.od;a.I[d]=f.port&254|!f.ne;a.I[d+1]=f.port>>>8&255;a.I[d+2]=f.port>>>16&255;a.I[d+3]=f.port>>>24&255;d=f.port+f.offset;for(const k of f.hd){let g=k.read;b=k.write;if(!f.ne){e=function(l){return g(l&-2)>>((l&1)<<3)&255};const h=function(l){return g(l&-4)>>((l&3)<<3)&255};switch(k.bytes){case 4:I(a.s.v,d,a,h,void 0,g);J(a.s.v,d,a,void 0,void 0,b);break;case 2:I(a.s.v,d,a,e,g);J(a.s.v,d,a,void 0,b);break;case 1:I(a.s.v,d,a,g),J(a.s.v,d,a,b)}}d+=k.bytes}}a.I[c]=9;a.I[c+1]=0;a.I[c+2]=20;a.I[c+3]=5;a.I[c+
4]=0;a.I[c+5]=0;a.I[c+6]=0;a.I[c+7]=0;a.I[c+8]=0;a.I[c+9]=0;a.I[c+10]=0;a.I[c+11]=0;a.I[c+12]=0;a.I[c+13]=0;a.I[c+14]=0;a.I[c+15]=0;a.I[c+16]=0;a.I[c+17]=0;a.I[c+18]=0;a.I[c+19]=0}ba.prototype.V=function(){let a=[];a[0]=this.C;a[1]=this.i;a[2]=this.l;a[3]=this.h;a[4]=this.B;a[5]=this.j;a[6]=this.F;a[7]=this.D;a[8]=this.Ub;a[9]=this.o;return a=a.concat(this.Ta)};
ba.prototype.G=function(a){this.C=a[0];this.i=a[1];this.l=a[2];this.h=a[3];this.B=a[4];this.j=a[5];this.F=a[6];this.D=a[7];this.Ub=a[8];this.o=a[9];let b=0;for(let c of a.slice(10))this.Ta[b].G(c),b++;this.g=this.Ta[this.o]||null};ba.prototype.reset=function(){this.i=this.C=0;this.h.set(this.l);this.B=!0;this.o=this.j=0;this.g=this.Ta[0];for(const a of this.Ta)a.reset();this.F=!1;this.Ub=this.D=0;$b(this.Aa,this.Ba)};ba.prototype.wa=function(a){this.Ub|=a;this.Aa.wa(this.Ba)};
function Jd(a,b,c){this.s=a;this.Wa=b;this.Cc=this.size=c.Cc;this.o=this.size-1;this.enabled=!1;this.Zd=c.Zd;this.i=this.g=this.j=this.h=this.l=0;this.reset()}Jd.prototype.V=function(){const a=[];a[0]=this.size;a[1]=this.Cc;a[2]=this.enabled;a[3]=this.Zd;a[4]=this.l;a[5]=this.h;a[6]=this.j;a[7]=this.g;a[8]=this.i;return a};Jd.prototype.G=function(a){this.size=a[0];this.Cc=a[1];this.enabled=a[2];this.Zd=a[3];this.l=a[4];this.h=a[5];this.j=a[6];this.g=a[7];this.i=a[8];this.o=this.size-1};
Jd.prototype.reset=function(){this.enabled=!1;this.i=this.g=this.j=this.h=this.l=0;var a=this.Cc;this.size=a;this.o=a-1};function ca(a){return(a.s.Ga(a.h+2)&a.o)!==a.j}
function da(a,b){this.s=a.s;this.Wa=a.Wa;this.eh=b;this.i=[];this.$e=this.g=this.h=0;this.vf=[];this.af=this.pe=this.uf=0;let c=a.l;var d=b;b=0;let e=a.size,f=!1;const k=0<(this.Wa.h[0]&268435456);do{var g=a,h=c;g={Se:g.s.i(h+16*d),wj:g.s.i(h+16*d+4),Ae:g.s.i(h+16*d+8),flags:g.s.Ga(h+16*d+12),next:g.s.Ga(h+16*d+14)};if(k&&g.flags&4)c=g.Se,b=d=0,e=g.Ae/16;else{if(g.flags&2)f=!0,this.vf.push(g);else{if(f)break;this.i.push(g);this.$e+=g.Ae}b++;if(b>e)break;if(g.flags&1)d=g.next;else break}}while(1)}
function ja(a,b){let c=0,d=b.length;for(;d&&a.h!==a.i.length;){var e=a.i[a.h],f=e.Se+a.g;let l=e.Ae-a.g;l>d?(l=d,a.g+=d):(a.h++,a.g=0);e=b;var k=e.set,g=a.s,h=l;h&&(g.ze(f),g.ze(f+h-1));k.call(e,g.Na.subarray(f,f+h),c);c+=l;d-=l}};function Od(){this.Yd={};this.g=void 0}Od.prototype.register=function(a,b,c){var d=this.Yd[a];void 0===d&&(d=this.Yd[a]=[]);d.push({xe:b,nf:c})};Od.prototype.unregister=function(a,b){var c=this.Yd[a];void 0!==c&&(this.Yd[a]=c.filter(function(d){return d.xe!==b}))};Od.prototype.send=function(a,b){if(this.g&&(a=this.g.Yd[a],void 0!==a))for(var c=0;c<a.length;c++){var d=a[c];d.xe.call(d.nf,b)}};function Pd(){var a=new Od,b=new Od;a.g=b;b.g=a;return[a,b]};function Qd(){};function Za(a,b){this.ra=b;Rd(this);b=Object.create(null);b.m=this.ra.exports.memory;for(var c of Object.keys(this.ra.exports))c.startsWith("_")||c.startsWith("ZSTD")||c.startsWith("zstd")||c.endsWith("_js")||(b[c]=this.ra.exports[c]);this.nj=b;this.ac=c=this.ra.exports.memory;this.la=N(Uint32Array,c,812,1);this.Na=new Uint8Array(0);this.jc=new Int32Array(this.Na.buffer);this.Xa=N(Uint8Array,c,724,8);this.nb=N(Int32Array,c,736,8);this.Ya=N(Uint32Array,c,768,8);this.Ka=N(Int32Array,c,800,1);this.Mb=
N(Int32Array,c,564,1);this.Lb=N(Int32Array,c,568,1);this.Db=N(Int32Array,c,572,1);this.Jb=N(Int32Array,c,576,1);this.Uf=N(Int32Array,c,1128,1);this.kc=N(Uint32Array,c,540,8);this.Qa=N(Int32Array,c,580,8);this.Eb=N(Uint8Array,c,612,1);this.ia=N(Int32Array,c,804,1);this.ob=N(Int32Array,c,808,1);this.h=N(Uint8Array,c,616,1);this.ic=N(Int32Array,c,620,1);this.Gb=N(Int32Array,c,624,1);this.sc=N(Int32Array,c,636,1);this.$d=N(Int32Array,c,640,1);this.Vc=N(Int32Array,c,644,1);this.lc=N(Int32Array,c,648,1);
this.flags=N(Int32Array,c,120,1);this.Hb=N(Int32Array,c,116,1);this.Ob=N(Int32Array,c,96,1);this.fc=N(Int32Array,c,104,1);N(Int32Array,c,112,1);this.Xi=N(Uint32Array,c,960,2);this.u={};this.D=N(Int32Array,c,556,1);this.oc=N(Int32Array,c,560,1);N(Uint8Array,c,548,1);this.H=N(Uint8Array,c,552,1);this.l=[];this.C=[];this.Ja=[];this.o=[];this.pd={Rf:null,Jd:null};this.gh=N(Uint32Array,c,664,1);this.j=N(Int32Array,c,64,8);this.Ib=N(Int32Array,c,1152,32);this.$=N(Uint8Array,c,816,1);this.$[0]=255;this.aa=
N(Uint8Array,c,1032,1);this.aa[0]=0;this.J=N(Uint16Array,c,1036,1);this.J[0]=895;this.dj=N(Uint16Array,c,1040,1);this.dj[0]=0;this.S=N(Int32Array,c,1048,1);this.S[0]=0;this.U=N(Int32Array,c,1052,1);this.U[0]=0;this.W=N(Int32Array,c,1044,1);this.W[0]=0;this.L=N(Int32Array,c,1056,1);this.L[0]=0;this.M=N(Int32Array,c,1060,1);this.M[0]=0;this.pc=N(Int32Array,c,832,32);N(Int32Array,c,824,1);this.g=N(Uint16Array,c,668,8);this.Fb=N(Int32Array,c,684,8);this.Ra=[];this.Xe=0;this.Wc=[];this.v=void 0;this.A=
a;this.qc(0,0);Sd(this)}
function Rd(a){const b=c=>{const d=a.ra.exports[c];console.assert(d,"Missing import: "+c);return d};a.La=b("reset_cpu");b("getiopl");b("get_eflags");a.B=b("get_eflags_no_arith");a.F=b("pic_call_irq");a.cj=b("do_many_cycles_native");b("cycle_internal");a.Ed=b("read8");a.Ga=b("read16");a.i=b("read32s");a.oe=b("write16");a.Dc=b("write32");a.ze=b("in_mapped_range");b("fpu_load_tag_word");b("fpu_load_status_word");b("fpu_get_sti_f64");b("translate_address_system_read_js");a.Kb=b("get_seg_cs");b("get_real_eip");
b("clear_tlb");a.hj=b("full_clear_tlb");a.qc=b("set_tsc");a.oj=b("store_current_tsc");a.lj=b("jit_clear_cache_js");a.hh=b("jit_dirty_cache");a.Si=b("codegen_finalize_finished");a.Ri=b("allocate_memory");a.wg=b("zero_memory");a.qj=b("zstd_create_ctx");a.sj=b("zstd_get_src_ptr");a.rj=b("zstd_free_ctx");a.qe=b("zstd_read");a.re=b("zstd_read_free")}
Za.prototype.V=function(){var a=[];a[0]=this.la[0];a[1]=this.Xa;a[2]=this.nb;a[3]=this.Ya;a[4]=this.Ka[0];a[5]=this.Lb[0];a[6]=this.Mb[0];a[7]=this.Jb[0];a[8]=this.Db[0];a[9]=this.kc[0];a[10]=this.Qa;a[11]=this.Eb[0];a[13]=this.ia[0];a[16]=this.ob[0];a[17]=this.h[0];a[18]=this.ic[0];a[19]=this.Gb[0];a[22]=this.sc[0];a[23]=this.Vc[0];a[24]=this.$d[0];a[25]=this.lc[0];a[26]=this.flags[0];a[27]=this.Hb[0];a[28]=this.Ob[0];a[30]=this.fc[0];a[37]=this.D[0];a[38]=this.oc[0];a[39]=this.j;a[40]=this.g;a[41]=
this.Fb;this.oj();a[43]=this.Xi;a[45]=this.u.tf;a[46]=this.u.Fc;a[47]=this.u.Ac;a[48]=this.u.Aa;a[49]=this.u.Za;a[50]=this.u.Ec;a[51]=this.u.Nf;a[52]=this.u.Jd;a[53]=this.u.ff;a[54]=this.u.rf;a[55]=this.u.Ve;a[56]=this.u.sd;a[57]=this.u.ab;a[58]=this.u.Ge;a[59]=this.u.cf;a[60]=this.u.Xb;a[61]=this.u.kf;a[62]=this.Ra;a[63]=this.u.nc;a[64]=this.Uf[0];a[66]=this.pc;a[67]=this.Ib;a[68]=this.$[0];a[69]=this.aa[0];a[70]=this.J[0];a[71]=this.S[0];a[72]=this.U[0];a[73]=this.L[0];a[74]=this.M[0];a[75]=this.W[0];
var b=this.Na.length>>12;var c=[];for(var d=0;d<b;d++){var e=d<<12;e=this.jc.subarray(e>>2,e+4096>>2);let g=!0;for(let h=0;h<e.length;h++)if(0!==e[h]){g=!1;break}g||c.push(d)}b=new vb(b);d=new Uint8Array(c.length<<12);for(let [g,h]of c.entries())b.set(h,1),c=h<<12,d.set(this.Na.subarray(c,c+4096),g<<12);c={yg:b,qh:d};const {qh:f,yg:k}=c;a[77]=f;a[78]=new Uint8Array(k.Tb());a[79]=this.u.ke;a[80]=this.u.le;a[81]=this.u.me;return a};
Za.prototype.G=function(a){this.la[0]=a[0];this.Na.length!==this.la[0]&&console.warn("Note: Memory size mismatch. we="+this.Na.length+" state="+this.la[0]);this.Xa.set(a[1]);this.nb.set(a[2]);this.Ya.set(a[3]);this.Ka[0]=a[4];this.Lb[0]=a[5];this.Mb[0]=a[6];this.Jb[0]=a[7];this.Db[0]=a[8];this.kc[0]=a[9];this.Qa.set(a[10]);this.Eb[0]=a[11];this.ia[0]=a[13];this.ob[0]=a[16];this.h[0]=a[17];this.ic[0]=a[18];this.Gb[0]=a[19];this.sc[0]=a[22];this.Vc[0]=a[23];this.$d[0]=a[24];this.lc[0]=a[25];this.flags[0]=
a[26];this.Hb[0]=a[27];this.Ob[0]=a[28];this.fc[0]=a[30];this.D[0]=a[37];this.oc[0]=a[38];this.j.set(a[39]);this.g.set(a[40]);this.Fb.set(a[41]);this.qc(a[43][0],a[43][1]);this.u.tf&&this.u.tf.G(a[45]);this.u.Fc&&this.u.Fc.G(a[46]);this.u.Ac&&this.u.Ac.G(a[47]);this.u.Aa&&this.u.Aa.G(a[48]);this.u.Za&&this.u.Za.G(a[49]);this.u.Ec&&this.u.Ec.G(a[50]);this.u.Nf&&this.u.Nf.G(a[51]);this.u.Jd&&this.u.Jd.G(a[52]);this.u.ff&&this.u.ff.G(a[53]);this.u.rf&&this.u.rf.G(a[54]);this.u.Ve&&this.u.Ve.G(a[55]);
this.u.sd&&this.u.sd.G(a[56]);this.u.ab&&this.u.ab.G(a[57]);this.u.Ge&&this.u.Ge.G(a[58]);this.u.cf&&this.u.cf.G(a[59]);this.u.Xb&&this.u.Xb.G(a[60]);this.u.kf&&this.u.kf.G(a[61]);this.u.ke&&this.u.ke.G(a[79]);this.u.le&&this.u.le.G(a[80]);this.u.me&&this.u.me.G(a[81]);this.Ra=a[62];this.u.nc&&this.u.nc.G(a[63]);this.Uf[0]=a[64];this.pc.set(a[66]);this.Ib.set(a[67]);this.$[0]=a[68];this.aa[0]=a[69];this.J[0]=a[70];this.S[0]=a[71];this.U[0]=a[72];this.L[0]=a[73];this.M[0]=a[74];this.W[0]=a[75];{var b=
new vb(a[78].buffer);a=a[77];this.wg(this.la[0]);const c=this.la[0]>>12;let d=0;for(let e=0;e<c;e++)if(b.get(e)){let f=d<<12;this.Na.set(a.subarray(f,f+4096),e<<12);d++}}this.hj();this.lj()};function Zb(a){a.La();a.Ra=[];a.u.Wa&&a.u.Wa.reset();db(a)}function Td(a,b){1048576>b?b=1048576:0>(b|0)&&(b=Math.pow(2,31)-131072);b=(b-1|131071)+1|0;console.assert(0===a.la[0],"Expected uninitialised memory");a.la[0]=b;const c=a.Ri(b);a.Na=N(Uint8Array,a.ac,c,b);a.jc=N(Uint32Array,a.ac,c,b>>2)}
Za.prototype.yb=function(a,b){Td(this,"number"===typeof a.la?a.la:67108864);this.H[0]=+a.Ec;this.La();var c=new Va(this);this.v=c;this.pd.Rf=a.pd;this.pd.Jd=a.kj;db(this);if(a.se){const {ph:e}=Ud(this.Na,a.se,a.Ye,a.Cg||"");e&&this.Wc.push(e)}I(c,179,this,function(){return 0});var d=0;I(c,146,this,function(){return d});J(c,146,this,function(e){d=e});I(c,1297,this,function(){return this.Xe<this.Ra.length?this.Ra[this.Xe++]:0});J(c,1296,this,void 0,function(e){function f(h){return new Uint8Array((new Int32Array([h])).buffer)}
function k(h){return h>>8|h<<8&65280}function g(h){return h<<24|h<<8&16711680|h>>8&65280|h>>>24}this.Xe=0;if(0===e)this.Ra=f(1431127377);else if(1===e)this.Ra=f(0);else if(3===e)this.Ra=f(this.la[0]);else if(5===e)this.Ra=f(1);else if(15===e)this.Ra=f(1);else if(13===e)this.Ra=new Uint8Array(16);else if(25===e){e=new Int32Array(4+64*this.Wc.length);const h=new Uint8Array(e.buffer);e[0]=g(this.Wc.length);for(let l=0;l<this.Wc.length;l++){const {name:p,data:q}=this.Wc[l],v=4+64*l;e[v>>2]=g(q.length);
e[v+4>>2]=k(49152+l);for(let n=0;n<p.length;n++)h[v+8+n]=p.charCodeAt(n)}this.Ra=h}else this.Ra=32768<=e&&49152>e?f(0):49152<=e&&e-49152<this.Wc.length?this.Wc[e-49152].data:f(0)});this.u={};a.ih&&(this.u.Xb=new Ic(this),this.u.Aa=new Vb(this),this.H[0]&&(this.u.nc=new ad(this),this.u.Fc=new Rc(this),this.u.Ec=new Pc(this)),this.u.Ac=new Jc(this),Vd(this,this.u.Ac,a),this.u.Za=new dc(this),this.u.Jd=new pc(this,b,a.oa||8388608),this.u.ff=new Ec(this,b),this.u.rf=new Mc(this,1016,b),a.ke&&(this.u.ke=
new Mc(this,760,b)),a.le&&(this.u.le=new Mc(this,1E3,b)),a.me&&(this.u.me=new Mc(this,1E3,b)),this.u.Ve=new ac(this,a.we),c=0,a.ab&&(this.u.ab=new wb(this,a.ab,a.dh,!1,c++,b)),a.sd&&(this.u.sd=new wb(this,a.sd,void 0,!0,c++,b)),this.u.Ge=new ic(this,b),a.Sg&&(this.u.cf=new fd(this,b,a.Cd)),a.wb&&(this.u.tf=new aa(a.wb,this,b)),this.u.kf=new qd(this,b));a.Sf&&Wd(this,a.Sf)};
function Wd(a,b){if(8192>b.byteLength){var c=new Int32Array(2048);(new Uint8Array(c.buffer)).set(new Uint8Array(b))}else c=new Int32Array(b,0,2048);for(var d=0;8192>d;d+=4)if(464367618===c[d>>2]){var e=c[d+4>>2];if(!(464367618+e+c[d+8>>2]|0)){a.j[0]=732803074;a.j[3]=31744;a.Dc(31744,0);a.Qa[0]=1;a.Ka[0]=1;a.flags[0]=2;a.ia[0]=1;a.ob[0]=1;for(var f=0;6>f;f++)a.Xa[f]=0,a.nb[f]=0,a.Ya[f]=4294967295,a.g[f]=45058;if(e&65536){var k=c[d+16>>2];f=c[d+20>>2];e=c[d+28>>2];b=new Uint8Array(b,d-(c[d+12>>2]-k),
0===f?void 0:f-k);ia(a,b,k);a.D[0]=a.Kb()+e|0}else if(1179403647===c[0]){c=Xd(b);a.D[0]=a.Kb()+c.fh.Tg|0;for(k of c.Qi)0!==k.type&&1===k.type&&k.Vf+k.mh<a.la[0]&&k.Hf&&(c=new Uint8Array(b,k.offset,k.Hf),ia(a,c,k.Vf))}a.v.Cb(244,a,function(g){console.log("Test exited with code "+O(g,2));throw"HALT";},function(){},function(){},function(){});for(let g=14;15>=g;g++)J(a.v,8192+g,a,function(h){h?this.Fa(g):P(this,g)});break}}}
function Vd(a,b,c){var d=c.Ic||531;b.P[56]=1|d>>4&240;b.P[61]=d&255;b.P[21]=128;b.P[22]=2;d=0;1048576<=a.la[0]&&(d=a.la[0]-1048576>>10,d=Math.min(d,65535));b.P[23]=d&255;b.P[24]=d>>8&255;b.P[48]=d&255;b.P[49]=d>>8&255;d=0;16777216<=a.la[0]&&(d=a.la[0]-16777216>>16,d=Math.min(d,65535));b.P[52]=d&255;b.P[53]=d>>8&255;b.P[91]=0;b.P[92]=0;b.P[93]=0;b.P[20]=47;b.P[95]=0;c.Ug&&(b.P[63]=1)}
function db(a){var b=a.pd.Rf,c=a.pd.Jd;if(b){var d=new Uint8Array(b);ia(a,d,1048576-b.byteLength);if(c){var e=new Uint8Array(c);ia(a,e,786432);Xa(a.v,4272947200,1048576,function(f){f=f-4272947200|0;return f<e.length?e[f]:0},function(){})}Xa(a.v,4293918720,1048576,function(f){return this.Na[f&1048575]}.bind(a),function(f,k){this.Na[f&1048575]=k}.bind(a))}}
function Yd(a,b,c,d,e,f){const k=new Uint8Array(a.ac.buffer,e>>>0,f>>>0);WebAssembly.instantiate(k,{e:a.nj}).then(g=>{g=g.instance.exports.f;a.Si(b,c,d);a.ra.Re.set(b+1024,g);a.pj&&a.pj(k)})}function ab(a){return a.B()&512?(bb(a,L()),cb(a),0):100}function bb(a,b){a.u.Ge.lb(b,!1);a.u.Ac.lb(b,!1);a.H[0]&&(a.u.Ec.lb(b),a.u.Fc.lb(b))}function cb(a){a.B()&512&&Zd(a)}function Zd(a){a.B();a.u.Xb&&a.u.Xb.Kd();a.u.Fc&&a.u.Fc.Kd()}Za.prototype.Fa=function(a){this.u.Xb&&this.u.Xb.Id(a);this.u.nc&&this.u.nc.Id(a)};
function P(a,b){a.u.Xb&&a.u.Xb.Nd(b);a.u.nc&&a.u.nc.Nd(b)}"undefined"!==typeof window?window.CPU=Za:"undefined"!==typeof module&&"undefined"!==typeof module.exports?module.exports.CPU=Za:"function"===typeof importScripts&&(self.CPU=Za);function Sd(a){var b={};a.debug=b;b.ek=!1;b.Xj=void 0;b.zj=[];b.fk=!1;b.show=function(f){if("undefined"!==typeof document){var k=document.getElementById("log");if(k){k.textContent+=f+"\n";k.style.display="block";k.scrollTop=1E9;return}}console.log(f)};b.yb=function(){};b.Qj=function(){for(var f={eax:0,ecx:1,edx:2,ebx:3,esp:4,ebp:5,esi:6,edi:7},k="eax ecx edx ebx esp ebp esi edi".split(" "),g="",h="",l=0;4>l;l++)g+=k[l]+"="+O(a.j[f[k[l]]]>>>0,8)+" ",h+=k[l+4]+"="+O(a.j[f[k[l+4]]]>>>0,8)+" ";g+="  ds="+
O(a.g[3],4)+" es="+O(a.g[0],4)+" fs="+O(a.g[4],4);h+="  gs="+O(a.g[5],4)+" cs="+O(a.g[1],4)+" ss="+O(a.g[2],4);return[g,h]};b.Ij=function(){};b.Gj=function(){};b.Oj=function(){};b.V=function(){};b.Kj=function(){};b.Jj=function(){};b.Hj=function(){};b.Ej=function(){};b.Fj=function(){};b.Pj=function(){};b.Vj=function(){};b.gk=function(){};b.step=function(){};b.bk=function(){};b.jh=function(){};b.Aj=function(){};let c,d;b.Dj=function(f,k,g){if(!d){if(void 0===c&&(c="function"===typeof require?require("./capstone-x86.min.js"):
window.cs,void 0===c))return;d=[new c.Capstone(c.ARCH_X86,c.MODE_16),new c.Capstone(c.ARCH_X86,c.MODE_32)]}try{d[f].disasm(k,g).forEach(function(h){Qd(O(h.yj>>>0)+": "+ob(h.bytes.map(l=>O(l,2).slice(-2)).join(" "),20)+" "+h.mnemonic+" "+h.op_str)})}catch(h){Qd("Could not disassemble: "+Array.from(k).map(l=>O(l,2)).join(" "))}};let e;b.Lj=function(f){if(void 0===e&&(e="function"===typeof require?require("./libwabt.js"):new window.WabtModule,void 0===e))return;f=f.slice();try{var k=e.readWasm(f,{ak:!1});
k.generateNames();k.applyNames();k.toText({Nj:!0,Sj:!0})}catch(l){var g=new Blob([f]),h=document.createElement("a");h.download="failed.wasm";h.href=window.URL.createObjectURL(g);h.dataset.downloadurl=["application/octet-stream",h.download,h.href].join(":");h.click();window.URL.revokeObjectURL(h.src);console.log(l.toString())}finally{k&&k.Ea()}}};let $d=DataView.prototype,ae={size:1,get:$d.getUint8,set:$d.setUint8},be={size:2,get:$d.getUint16,set:$d.setUint16},V={size:4,get:$d.getUint32,set:$d.setUint32},de=ce([{kh:V},{Bg:ae},{data:ae},{ij:ae},{Yj:ae},{uj:ae},{Zj:function(a){return{size:a,get:()=>-1}}(7)},{type:be},{Uj:be},{jj:V},{Tg:V},{sh:V},{Yi:V},{flags:V},{Og:be},{Zf:be},{$f:be},{rg:be},{sg:be},{dk:be}]);console.assert(52===de.reduce((a,b)=>a+b.size,0));let ee=ce([{type:V},{offset:V},{hk:V},{Vf:V},{Hf:V},{mh:V},{flags:V},{align:V}]);
console.assert(32===ee.reduce((a,b)=>a+b.size,0));let fe=ce([{name:V},{type:V},{flags:V},{vj:V},{offset:V},{size:V},{link:V},{info:V},{xj:V},{Mj:V}]);console.assert(40===fe.reduce((a,b)=>a+b.size,0));function ce(a){return a.map(function(b){var c=Object.keys(b);console.assert(1===c.length);c=c[0];b=b[c];console.assert(0<b.size);return{name:c,type:b,size:b.size,get:b.get,set:b.set}})}
function Xd(a){var b=new DataView(a);let [c,d]=ge(b,de);console.assert(52===d);console.assert(1179403647===c.kh,"Bad magic");console.assert(1===c.Bg,"Unimplemented: 64 bit elf");console.assert(1===c.data,"Unimplemented: big endian");console.assert(1===c.ij,"Bad version0");console.assert(2===c.type,"Unimplemented type");console.assert(1===c.jj,"Bad version1");console.assert(52===c.Og,"Bad header size");console.assert(32===c.Zf,"Bad program header size");console.assert(40===c.rg,"Bad section header size");
[a]=he(new DataView(b.buffer,b.byteOffset+c.sh,c.Zf*c.$f),ee,c.$f);[b]=he(new DataView(b.buffer,b.byteOffset+c.Yi,c.rg*c.sg),fe,c.sg);return{fh:c,Qi:a,ck:b}}function ge(a,b){let c={},d=0;for(let e of b)b=e.get.call(a,d,!0),console.assert(void 0===c[e.name]),c[e.name]=b,d+=e.size;return[c,d]}function he(a,b,c){let d=[],e=0;for(var f=0;f<c;f++){let [k,g]=ge(new DataView(a.buffer,a.byteOffset+e,void 0),b);d.push(k);e+=g}return[d,e]};function Ud(a,b,c,d){var e=new Uint8Array(b);const f=new Uint16Array(b);var k=new Uint32Array(b),g=e[497]||4;if(43605===f[255]&&1400005704===(f[257]|f[258]<<16)){var h=e[529];e[528]=255;e[529]=h&-97|128;f[274]=56832;f[253]=65535;d+="\x00";k[138]=581632;for(e=0;e<d.length;e++)a[581632+e]=d.charCodeAt(e);g=512*(g+1);d=new Uint8Array(b,0,g);b=new Uint8Array(b,g);e=g=0;c&&(g=67108864,e=c.byteLength,a.set(new Uint8Array(c),g));k[134]=g;k[135]=e;a.set(d,524288);a.set(b,1048576);a=new Uint8Array(256);(new Uint16Array(a.buffer))[0]=
43605;a[2]=1;c=3;a[c++]=250;a[c++]=184;a[c++]=32768;a[c++]=128;a[c++]=142;a[c++]=192;a[c++]=142;a[c++]=216;a[c++]=142;a[c++]=224;a[c++]=142;a[c++]=232;a[c++]=142;a[c++]=208;a[c++]=188;a[c++]=57344;a[c++]=224;a[c++]=234;a[c++]=0;a[c++]=0;a[c++]=32800;a[c++]=128;k=a[c]=0;for(b=0;b<a.length;b++)k+=a[b];a[c]=-k;return{ph:{name:"genroms/kernel.bin",data:a}}}};var va=16384,Ca=4;function ie(a){this.g=[];this.B=[];this.j=a;this.C={Ze:0};this.h={};this.l=274877906944;this.o=0;this.i=[];ua(this,"",-1)}ie.prototype.V=function(){let a=[];a[0]=this.g;a[1]=this.C.Ze;a[2]=[];for(const [b,c]of Object.entries(this.h))0===(this.g[b].mode&va)&&a[2].push([b,c]);a[3]=this.l;a[4]=this.o;return a=a.concat(this.i)};
ie.prototype.G=function(a){this.g=a[0].map(b=>{const c=new je(0);c.G(b);return c});this.C.Ze=a[1];this.h={};for(let [b,c]of a[2])c.buffer.byteLength!==c.byteLength&&(c=c.slice()),this.h[b]=c;this.l=a[3];this.o=a[4];this.i=a.slice(5)};function pa(a,b,c){var d=a.g[b];0==d.status||2==d.status?c():5===d.status?pa(X(a,d),d.g,c):a.B.push({id:b,tj:c})}
function ke(a,b){if(3!==b.version)throw"The filesystem JSON format has changed. Please update your fs2json (https://github.com/copy/fs2json) and recreate the filesystem JSON.";var c=b.fsroot;a.o=b.size;for(b=0;b<c.length;b++)le(a,c[b],0)}
function le(a,b,c){var d=me(a);const e=b[0];d.size=b[1];d.Wb=b[2];d.ud=d.Wb;d.Hc=d.Wb;d.mode=b[3];d.uid=b[4];d.za=b[5];var f=d.mode&61440;if(f===va)for(ne(a,d,c,e),c=a.g.length-1,b=b[6],d=0;d<b.length;d++)le(a,b[d],c);else 32768===f?(d.status=2,d.gd=b[6],ne(a,d,c,e)):40960===f&&(d.ie=b[6],ne(a,d,c,e))}function oe(a,b,c,d){const e=a.g[c],f=a.g[b];Y(a,b);f.ba.has(d);f.ba.set(d,c);e.Oa++;Y(a,c)&&(e.ba.has(".."),e.ba.has(".")||e.Oa++,e.ba.set(".",c),e.ba.set("..",b),f.Oa++)}
function pe(a,b,c){const d=Ia(a,b,c),e=a.g[d],f=a.g[b];Y(a,b);f.ba.delete(c)&&(e.Oa--,Y(a,d)&&(e.ba.get(".."),e.ba.delete(".."),f.Oa--))}function ne(a,b,c,d){-1!=c?(a.g.push(b),b.Sb=a.g.length-1,oe(a,c,b.Sb,d)):0==a.g.length&&(a.g.push(b),b.ba.set(".",0),b.ba.set("..",0),b.Oa=2)}
function je(a){this.ba=new Map;this.Ce=this.Be=this.Wb=this.Hc=this.ud=this.Sb=this.za=this.uid=this.size=this.status=0;this.ie="";this.mode=493;this.sa={type:0,version:0,path:a};this.Oa=0;this.gd="";this.h=[];this.g=this.i=-1}
je.prototype.V=function(){const a=[];a[0]=this.mode;a[1]=(this.mode&61440)===va?[...this.ba]:32768===(this.mode&61440)?this.gd:40960===(this.mode&61440)?this.ie:49152===(this.mode&61440)?[this.Ce,this.Be]:null;a[2]=this.h;a[3]=this.status;a[4]=this.size;a[5]=this.uid;a[6]=this.za;a[7]=this.Sb;a[8]=this.ud;a[9]=this.Hc;a[10]=this.Wb;a[11]=this.sa.version;a[12]=this.sa.path;a[13]=this.Oa;return a};
je.prototype.G=function(a){this.mode=a[0];if((this.mode&61440)===va){this.ba=new Map;for(const [b,c]of a[1])this.ba.set(b,c)}else 32768===(this.mode&61440)?this.gd=a[1]:40960===(this.mode&61440)?this.ie=a[1]:49152===(this.mode&61440)&&([this.Ce,this.Be]=a[1]);this.h=[];for(const b of a[2]){const c=new qe;c.G(b);this.h.push(c)}this.status=a[3];this.size=a[4];this.uid=a[5];this.za=a[6];this.Sb=a[7];this.ud=a[8];this.Hc=a[9];this.Wb=a[10];this.sa.type=(this.mode&61440)>>8;this.sa.version=a[11];this.sa.path=
a[12];this.Oa=a[13]};function re(a,b){Object.assign(b,a,{Sb:b.Sb,ba:b.ba,Oa:b.Oa})}function me(a){const b=Math.round(Date.now()/1E3);a=new je(++a.C.Ze);a.Hc=a.ud=a.Wb=b;return a}function ua(a,b,c){var d=a.g[c];if(0<=c&&5===d.status)return c=d.g,b=ua(X(a,d),b,c),se(a,d.i,b);d=me(a);d.mode=511|va;0<=c&&(d.uid=a.g[c].uid,d.za=a.g[c].za,d.mode=a.g[c].mode&511|va);d.sa.type=va>>8;ne(a,d,c,b);return a.g.length-1}
function wa(a,b,c){var d=a.g[c];if(5===d.status)return c=d.g,b=wa(X(a,d),b,c),se(a,d.i,b);d=me(a);d.uid=a.g[c].uid;d.za=a.g[c].za;d.sa.type=128;d.mode=a.g[c].mode&438|32768;ne(a,d,c,b);return a.g.length-1}function ta(a,b,c,d,e){var f=a.g[c];if(5===f.status)return c=f.g,b=ta(X(a,f),b,c,d,e),se(a,f.i,b);f=me(a);f.Be=d;f.Ce=e;f.uid=a.g[c].uid;f.za=a.g[c].za;f.sa.type=192;f.mode=a.g[c].mode&438;ne(a,f,c,b);return a.g.length-1}
function sa(a,b,c,d){var e=a.g[c];if(5===e.status)return c=e.g,b=sa(X(a,e),b,c,d),se(a,e.i,b);e=me(a);e.uid=a.g[c].uid;e.za=a.g[c].za;e.sa.type=160;e.ie=d;e.mode=40960;ne(a,e,c,b);return a.g.length-1}async function te(a,b,c,d){var e=a.g[c];if(5===e.status)return c=e.g,d=await te(X(a,e),b,c,d),se(a,e.i,d);e=wa(a,b,c);b=a.g[e];c=new Uint8Array(d.length);c.set(d);await ue(a,e,c);b.size=d.length;return e}
function oa(a,b,c){var d=a.g[b];if(5===d.status)return oa(X(a,d),d.g,c);(d.mode&61440)==va&&ze(a,b);return!0}async function Ka(a,b){var c=a.g[b];if(5===c.status)return await Ka(X(a,c),c.g);2===c.status&&a.j.g(c.gd);c.status==Ca&&(c.status=-1,await Ae(a,b))}
async function Ha(a,b,c,d,e){if(b==d&&c==e)return 0;var f=Ia(a,b,c);if(-1===f)return-2;var k=b;Y(a,k);for(var g="";0!=k;)g="/"+Be(a,k)+g,k=Ce(a,k);if(-1!=Ia(a,d,e)&&(k=Ja(a,d,e),0>k))return k;g=a.g[f];var h=a.g[b];k=a.g[d];if(5===h.status||5===k.status)if(5===h.status&&h.i===k.i){if(a=await Ha(X(a,h),h.g,c,k.g,e),0>a)return a}else{if(0===H(a,f).Sb||!Y(a,f)&&1<H(a,f).Oa)return-1;{h=Ia(a,b,c);var l=a.g[h],p=new je(-1);Y(a,h);Object.assign(p,l);const q=a.g.length;a.g.push(p);p.Sb=q;5===l.status&&a.i[l.i].g.set(l.g,
q);if(5!==l.status||0===l.g)pe(a,b,c),oe(a,b,q,c);if(Y(a,h)&&5!==l.status)for(const [v,n]of p.ba)"."!==v&&".."!==v&&Y(a,n)&&a.g[n].ba.set("..",q);a.h[q]=a.h[h];delete a.h[h];l.ba=new Map;l.Oa=0;h=q}l=H(a,f);p=await Fa(a,h,0,l.size);5===k.status?(d=X(a,k),e=Y(a,h)?ua(d,e,k.g):wa(d,e,k.g),d=H(d,e),re(l,d),De(a,f,k.i,e)):(g.status=-1,a.i[g.i].g.delete(g.g),re(l,g),oe(a,d,f,e));await Da(a,f,l.size);p&&p.length&&await Ga(a,f,0,p.length,p);if(Y(a,f))for(const q of Ee(a,h))if(e=await Ha(a,h,q,f,q),0>e)return e;
await Ae(a,h);a=Ja(a,b,c);if(0>a)return a}else pe(a,b,c),oe(a,d,f,e),g.sa.version++;return 0}async function Ga(a,b,c,d,e){var f=a.g[b];if(5===f.status)b=f.g,await Ga(X(a,f),b,c,d,e);else{var k=await a.Tb(b);!k||k.length<c+d?(await Da(a,b,Math.floor(3*(c+d)/2)),f.size=c+d,k=await a.Tb(b)):f.size<c+d&&(f.size=c+d);e&&k.set(e.subarray(0,d),c);await ue(a,b,k)}}async function Fa(a,b,c,d){const e=a.g[b];return 5===e.status?(b=e.g,await Fa(X(a,e),b,c,d)):await Fe(a,b,c,d)}
function Ia(a,b,c){b=a.g[b];if(5===b.status){const d=b.g;c=Ia(X(a,b),d,c);return-1===c?-1:Ge(a,b.i,c)}a=b.ba.get(c);return void 0===a?-1:a}function ma(a){let b=a.g.length;for(const {h:c,g:d}of a.i)b+=ma(c),b-=d.size;return b}function na(a){let b=1048576;for(const {h:c}of a.i)b+=na(c);return b}function ka(a){let b=a.o;for(const {h:c}of a.i)b+=ka(c);return b}function la(a){let b=a.l;for(const {h:c}of a.i)b+=la(c);return a.l}
function Be(a,b){const c=a.g[Ce(a,b)];if(5===c.status)return Be(X(a,c),a.g[b].g);if(!c)return"";for(const [d,e]of c.ba)if(e===b)return d;return""}function qa(a,b,c,d){if(Y(a,c))return-1;const e=a.g[b],f=a.g[c];if(5===e.status)return 5!==f.status||f.i!==e.i?-1:qa(X(a,e),e.g,f.g,d);if(5===f.status)return-1;oe(a,b,c,d);return 0}
function Ja(a,b,c){if("."===c||".."===c)return-1;var d=Ia(a,b,c);const e=a.g[d];var f=a.g[b];if(5===f.status)return b=f.g,Ja(X(a,f),b,c);if(f=Y(a,d)){a:if(d=a.g[d],5===d.status)var k=Y(X(a,d),d.g);else{for(k of d.ba.keys())if("."!==k&&".."!==k){k=!1;break a}k=!0}f=!k}if(f)return-39;pe(a,b,c);0===e.Oa&&(e.status=Ca);return 0}async function Ae(a,b){const c=a.g[b];5===c.status?await Ae(X(a,c),c.g):(c.size=0,delete a.h[b])}
ie.prototype.Tb=async function(a){const b=this.g[a];return this.h[a]?this.h[a]:2===b.status?await this.j.read(b.gd,0,b.size):null};async function Fe(a,b,c,d){const e=a.g[b];return a.h[b]?a.h[b].subarray(c,c+d):2===e.status?await a.j.read(e.gd,c,d):null}async function ue(a,b,c){a.h[b]=c;2===a.g[b].status&&(a.g[b].status=0,a.j.g(a.g[b].gd))}function H(a,b){b=a.g[b];return 5===b.status?H(X(a,b),b.g):b}
async function Da(a,b,c){var d=H(a,b),e=await Fe(a,b,0,d.size);if(c!=d.size){var f=new Uint8Array(c);d.size=c;e&&f.set(e.subarray(0,Math.min(e.length,d.size)),0);await ue(a,b,f)}}
function He(a,b){b=b.replace("//","/");b=b.split("/");0<b.length&&0===b[b.length-1].length&&b.pop();0<b.length&&0===b[0].length&&b.shift();const c=b.length;var d=-1,e=0;let f=null;for(var k=0;k<c;k++)if(d=e,e=Ia(a,d,b[k]),!f&&5===a.g[d].status&&(f="/"+b.slice(k).join("/")),-1==e)return k<c-1?{id:-1,ef:-1,name:b[k],Jf:f}:{id:-1,ef:d,name:b[k],Jf:f};return{id:e,ef:d,name:b[k],Jf:f}}
function ze(a,b){var c=a.g[b];if(5===c.status)ze(X(a,c),c.g);else{var d=0;for(const e of c.ba.keys())d+=24+Ie(e);b=a.h[b]=new Uint8Array(d);c.size=d;d=0;for(const [e,f]of c.ba)c=H(a,f),d+=u(["Q","d","b","s"],[c.sa,d+13+8+1+2+Ie(e),c.mode>>12,e],b,d)}}function Ea(a,b,c){a=a.h[b];if(c>=a.length)return a.length;for(b=0;;){const d=C(["Q","d"],a,{offset:b})[1];if(d>c)break;b=d}return b}function Y(a,b){b=a.g[b];return 5===b.status?Y(X(a,b),b.g):(b.mode&61440)===va}
function Ee(a,b){Y(a,b);b=a.g[b];if(5===b.status)return Ee(X(a,b),b.g);a=[];for(const c of b.ba.keys())"."!==c&&".."!==c&&a.push(c);return a}function Ce(a,b){Y(a,b);b=a.g[b];if(5!==b.status||0===b.g)return b.ba.get("..");{const c=Ce(X(a,b),b.g);return Ge(a,b.i,c)}}function De(a,b,c,d){const e=a.g[b];5===e.status&&a.i[e.i].g.delete(e.g);e.status=5;e.i=c;e.g=d;a.i[c].g.set(d,b)}function se(a,b,c){const d=me(a),e=a.g.length;a.g.push(d);d.Sb=e;De(a,e,b,c);return e}
function Ge(a,b,c){const d=a.i[b].g.get(c);return void 0===d?se(a,b,c):d}function X(a,b){return a.i[b.i].h}function qe(){this.type=2;this.start=0;this.length=Infinity;this.h=-1;this.g=""}qe.prototype.V=function(){const a=[];a[0]=this.type;a[1]=this.start;a[2]=Infinity===this.length?0:this.length;a[3]=this.h;a[4]=this.g;return a};qe.prototype.G=function(a){this.type=a[0];this.start=a[1];this.length=0===a[2]?Infinity:a[2];this.h=a[3];this.g=a[4]};function Je(a){const b=new qe;b.G(a.V());return b}
function Ke(a,b){return b.h===a.h&&b.g===a.g&&b.type===a.type}function Le(a,b){return Ke(a,b)&&b.start+b.length===a.start}function za(a,b,c,d,e){const f=new qe;f.type=a;f.start=b;f.length=c;f.h=d;f.g=e;return f}function Ba(a,b,c){b=a.g[b];if(5===b.status){var d=b.g;return Ba(X(a,b),d,c)}for(d of b.h)if(!(c.h===d.h&&c.g===d.g||2===c.type||2===d.type||1!==c.type&&1!==d.type||c.start+c.length<=d.start||d.start+d.length<=c.start))return Je(d);return null}
function Aa(a,b,c,d){const e=a.g[b];if(5===e.status)return b=e.g,Aa(X(a,e),b,c,d);c=Je(c);if(2!==c.type&&Ba(a,b,c))return 1;for(a=0;a<e.h.length;a++){d=e.h[a];if(d.start+d.length<=c.start)continue;if(c.start+c.length<=d.start)break;if(d.h!==c.h||d.g!==c.g)continue;b=c.start+c.length;const f=c.start-d.start,k=d.start+d.length-b;if(0<f&&0<k&&d.type===c.type)return 0;0<f&&(d.length=f);if(0>=f&&0<k)d.start=b,d.length=k;else if(0<k){for(;a<e.h.length&&e.h[a].start<b;)a++;e.h.splice(a,0,za(d.type,b,k,d.h,
d.g))}else 0>=f&&(e.h.splice(a,1),a--)}if(2!==c.type){a=c;d=!1;for(b=0;b<e.h.length&&!(Le(a,e.h[b])&&(e.h[b].length+=c.length,a=e.h[b],d=!0),c.start<=e.h[b].start);b++);d||(e.h.splice(b,0,a),b++);for(;b<e.h.length;b++)if(Ke(e.h[b],a)){Le(e.h[b],a)&&(a.length+=e.h[b].length,e.h.splice(b,1));break}}return 0}function Me(a,b){b=He(a,b);if(-1!==b.id)return a=H(a,b.id),Array.from(a.ba.keys()).filter(c=>"."!==c&&".."!==c)}
ie.prototype.ee=function(a){a=He(this,a);if(-1===a.id)return Promise.resolve(null);const b=H(this,a.id);return Fa(this,a.id,0,b.size)};function u(a,b,c,d){for(var e,f=0,k=0;k<a.length;k++)switch(e=b[k],a[k]){case "w":c[d++]=e&255;c[d++]=e>>8&255;c[d++]=e>>16&255;c[d++]=e>>24&255;f+=4;break;case "d":c[d++]=e&255;c[d++]=e>>8&255;c[d++]=e>>16&255;c[d++]=e>>24&255;c[d++]=0;c[d++]=0;c[d++]=0;c[d++]=0;f+=8;break;case "h":c[d++]=e&255;c[d++]=e>>8;f+=2;break;case "b":c[d++]=e;f+=1;break;case "s":var g=d,h=0;c[d++]=0;c[d++]=0;f+=2;for(var l of e)Ne(l.charCodeAt(0)).forEach(function(p){c[d++]=p;f+=1;h++});c[g+0]=h&255;c[g+1]=h>>8&255;break;
case "Q":u(["b","w","d"],[e.type,e.version,e.path],c,d),d+=13,f+=13}return f}
function C(a,b,c){let d=c.offset;for(var e=[],f=0;f<a.length;f++)switch(a[f]){case "w":var k=b[d++];k+=b[d++]<<8;k+=b[d++]<<16;k+=b[d++]<<24>>>0;e.push(k);break;case "d":k=b[d++];k+=b[d++]<<8;k+=b[d++]<<16;k+=b[d++]<<24>>>0;d+=4;e.push(k);break;case "h":k=b[d++];e.push(k+(b[d++]<<8));break;case "b":e.push(b[d++]);break;case "s":k=b[d++];k+=b[d++]<<8;for(var g="",h=new Oe,l=0;l<k;l++){var p=h.i(b[d++]);-1!=p&&(g+=String.fromCharCode(p))}e.push(g);break;case "Q":c.offset=d,k=C(["b","w","d"],b,c),d=
c.offset,e.push({type:k[0],version:k[1],path:k[2]})}c.offset=d;return e};function Oe(){this.g=new Uint8Array(5);this.h=0;this.i=function(a){this.g[this.h]=a;this.h++;switch(this.h){case 1:if(128>this.g[0])return this.h=0,this.g[0];break;case 2:if(192==(this.g[0]&224)&&128==(this.g[1]&192))return this.h=0,(this.g[0]&31)<<6|this.g[1]&63}return-1}}function Ne(a){if(128>a)return[a];if(2048>a)return[192|a>>6&31,128|a&63]}function Ie(a){for(var b=0,c=0;c<a.length;c++)b+=128>a.charCodeAt(c)?1:2;return b};function Pe(a){function b(n){!n.altKey&&g[56]&&f(56,!1);return e(n,!1)}function c(n){!n.altKey&&g[56]&&f(56,!1);return e(n,!0)}function d(){for(var n=Object.keys(g),r,y=0;y<n.length;y++)r=+n[y],g[r]&&f(r,!1);g={}}function e(n,r){if(h.A&&(n.shiftKey&&n.ctrlKey&&(73===n.keyCode||74===n.keyCode||75===n.keyCode)||!h.ve?0:n.target?n.target.classList.contains("phone_keyboard")||"INPUT"!==n.target.nodeName&&"TEXTAREA"!==n.target.nodeName:1)){a:{if(void 0!==n.code){var y=v[n.code];if(void 0!==y)break a}y=
l[n.keyCode]}if(y)return f(y,r,n.repeat),n.preventDefault&&n.preventDefault(),!1;console.log("Missing char in map: keyCode="+(n.keyCode||-1).toString(16)+" code="+n.code)}}function f(n,r,y){if(r)g[n]&&!y&&f(n,!1);else if(!g[n])return;(g[n]=r)||(n|=128);255<n?(k(n>>8),k(n&255)):k(n)}function k(n){h.A.send("keyboard-code",n)}var g={},h=this;this.ve=!0;var l=new Uint16Array([0,0,0,0,0,0,0,0,14,15,0,0,0,28,0,0,42,29,56,0,58,0,0,0,0,0,0,1,0,0,0,0,57,57417,57425,57423,57415,57419,57416,57421,80,0,0,0,0,
82,83,0,11,2,3,4,5,6,7,8,9,10,0,39,0,13,0,0,0,30,48,46,32,18,33,34,35,23,36,37,38,50,49,24,25,16,19,31,20,22,47,17,45,21,44,57435,57436,57437,0,0,82,79,80,81,75,76,77,71,72,73,0,0,0,0,0,0,59,60,61,62,63,64,65,66,67,68,87,88,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,69,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,39,13,51,12,52,53,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,26,43,27,40,0,57435,57400,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),p={8:8,10:13,32:32,39:222,
44:188,45:189,46:190,47:191,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,59:186,61:187,91:219,92:220,93:221,96:192,97:65,98:66,99:67,100:68,101:69,102:70,103:71,104:72,105:73,106:74,107:75,108:76,109:77,110:78,111:79,112:80,113:81,114:82,115:83,116:84,117:85,118:86,119:87,120:88,121:89,122:90},q={33:49,34:222,35:51,36:52,37:53,38:55,40:57,41:48,42:56,43:187,58:186,60:188,62:190,63:191,64:50,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,
81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,94:54,95:189,123:219,124:220,125:221,126:192},v={Escape:1,Digit1:2,Digit2:3,Digit3:4,Digit4:5,Digit5:6,Digit6:7,Digit7:8,Digit8:9,Digit9:10,Digit0:11,Minus:12,Equal:13,Backspace:14,Tab:15,KeyQ:16,KeyW:17,KeyE:18,KeyR:19,KeyT:20,KeyY:21,KeyU:22,KeyI:23,KeyO:24,KeyP:25,BracketLeft:26,BracketRight:27,Enter:28,ControlLeft:29,KeyA:30,KeyS:31,KeyD:32,KeyF:33,KeyG:34,KeyH:35,KeyJ:36,KeyK:37,KeyL:38,Semicolon:39,Quote:40,Backquote:41,ShiftLeft:42,
Backslash:43,KeyZ:44,KeyX:45,KeyC:46,KeyV:47,KeyB:48,KeyN:49,KeyM:50,Comma:51,Period:52,Slash:53,ShiftRight:54,NumpadMultiply:55,AltLeft:56,Space:57,CapsLock:58,F1:59,F2:60,F3:61,F4:62,F5:63,F6:64,F7:65,F8:66,F9:67,F10:68,NumLock:69,ScrollLock:70,Numpad7:71,Numpad8:72,Numpad9:73,NumpadSubtract:74,Numpad4:75,Numpad5:76,Numpad6:77,NumpadAdd:78,Numpad1:79,Numpad2:80,Numpad3:81,Numpad0:82,NumpadDecimal:83,IntlBackslash:86,F11:87,F12:88,NumpadEnter:57372,ControlRight:57373,NumpadDivide:57397,AltRight:57400,
Home:57415,ArrowUp:57416,PageUp:57417,ArrowLeft:57419,ArrowRight:57421,End:57423,ArrowDown:57424,PageDown:57425,Insert:57426,Delete:57427,OSLeft:57435,OSRight:57436,ContextMenu:57437};this.A=a;this.Ea=function(){"undefined"!==typeof window&&(window.removeEventListener("keyup",b,!1),window.removeEventListener("keydown",c,!1),window.removeEventListener("blur",d,!1))};this.yb=function(){"undefined"!==typeof window&&(this.Ea(),window.addEventListener("keyup",b,!1),window.addEventListener("keydown",c,
!1),window.addEventListener("blur",d,!1))};this.yb();this.g=function(n){n={keyCode:n};e(n,!0);e(n,!1)};this.Zi=function(n){var r=n.charCodeAt(0);r in p?this.g(p[r]):r in q?(k(42),this.g(q[r]),k(170)):console.log("ascii -> keyCode not found: ",r,n)}};function Qe(a,b){function c(z){if(!y.enabled||!y.ve)return!1;var D=b||document.body,K;if(!(K=document.pointerLockElement))a:{for(z=z.target;z.parentNode;){if(z===D){K=!0;break a}z=z.parentNode}K=!1}return K}function d(z){c(z)&&(z=z.changedTouches)&&z.length&&(z=z[z.length-1],n=z.clientX,r=z.clientY)}function e(){if(p||v||q)y.A.send("mouse-click",[!1,!1,!1]),p=v=q=!1}function f(z){if(y.A&&c(z)){var D=0,K=0,M=z.changedTouches;M?M.length&&(M=M[M.length-1],D=M.clientX-n,K=M.clientY-r,n=M.clientX,r=M.clientY,
z.preventDefault()):"number"===typeof z.movementX?(D=z.movementX,K=z.movementY):"number"===typeof z.webkitMovementX?(D=z.webkitMovementX,K=z.webkitMovementY):"number"===typeof z.mozMovementX?(D=z.mozMovementX,K=z.mozMovementY):(D=z.clientX-n,K=z.clientY-r,n=z.clientX,r=z.clientY);y.A.send("mouse-delta",[.15*D,-(.15*K)]);b&&y.A.send("mouse-absolute",[z.pageX-b.offsetLeft,z.pageY-b.offsetTop,b.offsetWidth,b.offsetHeight])}}function k(z){c(z)&&h(z,!0)}function g(z){c(z)&&h(z,!1)}function h(z,D){y.A&&
(1===z.which?p=D:2===z.which?v=D:3===z.which&&(q=D),y.A.send("mouse-click",[p,v,q]))}function l(z){if(c(z)){var D=z.wheelDelta||-z.detail;0>D?D=-1:0<D&&(D=1);y.A.send("mouse-wheel",[D,0]);z.preventDefault()}}var p=!1,q=!1,v=!1,n=0,r=0,y=this;this.enabled=!1;this.ve=!0;this.A=a;this.A.register("mouse-enable",function(z){this.enabled=z},this);this.Ea=function(){"undefined"!==typeof window&&(window.removeEventListener("touchstart",d,!1),window.removeEventListener("touchend",e,!1),window.removeEventListener("touchmove",
f,!1),window.removeEventListener("mousemove",f,!1),window.removeEventListener("mousedown",k,!1),window.removeEventListener("mouseup",g,!1),window.removeEventListener("DOMMouseScroll",l,!1),window.removeEventListener("mousewheel",l,{passive:!1}))};this.yb=function(){"undefined"!==typeof window&&(this.Ea(),window.addEventListener("touchstart",d,!1),window.addEventListener("touchend",e,!1),window.addEventListener("touchmove",f,!1),window.addEventListener("mousemove",f,!1),window.addEventListener("mousedown",
k,!1),window.addEventListener("mouseup",g,!1),window.addEventListener("DOMMouseScroll",l,!1),window.addEventListener("mousewheel",l,{passive:!1}))};this.yb()};function Re(a){if("undefined"!==typeof window)if(window.AudioContext||window.webkitAudioContext){var b=window.AudioWorklet?Se:Te;this.A=a;this.R=window.AudioContext?new AudioContext:new webkitAudioContext;this.g=new Ue(a,this.R);this.h=new Ve(a,this.R,this.g);new b(a,this.R,this.g);this.h.start();a.register("emulator-stopped",function(){this.R.suspend()},this);a.register("emulator-started",function(){this.R.resume()},this);a.register("speaker-confirm-initialized",function(){a.send("speaker-has-initialized")},
this);a.send("speaker-has-initialized")}else console.warn("Web browser doesn't support Web Audio API")}
function Ue(a,b){function c(d){return function(e){d.gain.setValueAtTime(e,this.R.currentTime)}}this.R=b;this.sources=new Map;this.Mf=this.Lf=this.F=this.D=this.C=1;this.i=this.R.createBiquadFilter();this.j=this.R.createBiquadFilter();this.i.type="highshelf";this.j.type="highshelf";this.i.frequency.setValueAtTime(2E3,this.R.currentTime);this.j.frequency.setValueAtTime(2E3,this.R.currentTime);this.g=this.R.createBiquadFilter();this.h=this.R.createBiquadFilter();this.g.type="lowshelf";this.h.type="lowshelf";
this.g.frequency.setValueAtTime(200,this.R.currentTime);this.h.frequency.setValueAtTime(200,this.R.currentTime);this.l=this.R.createGain();this.o=this.R.createGain();this.B=this.R.createChannelMerger(2);this.H=this.i;this.J=this.j;this.i.connect(this.g);this.g.connect(this.l);this.l.connect(this.B,0,0);this.j.connect(this.h);this.h.connect(this.o);this.o.connect(this.B,0,1);this.B.connect(this.R.destination);a.register("mixer-connect",function(d){var e=d[1];d=this.sources.get(d[0]);void 0===d||d.connect(e)},
this);a.register("mixer-disconnect",function(d){var e=d[1];d=this.sources.get(d[0]);void 0===d||d.disconnect(e)},this);a.register("mixer-volume",function(d){var e=d[0],f=d[1];d=Math.pow(10,d[2]/20);e=0===e?this:this.sources.get(e);void 0===e||e.qg(d,f)},this);a.register("mixer-gain-left",function(d){this.Lf=Math.pow(10,d/20);this.update()},this);a.register("mixer-gain-right",function(d){this.Mf=Math.pow(10,d/20);this.update()},this);a.register("mixer-treble-left",c(this.i),this);a.register("mixer-treble-right",
c(this.j),this);a.register("mixer-bass-left",c(this.g),this);a.register("mixer-bass-right",c(this.h),this)}function We(a,b,c){b=new Xe(a.R,b,a.H,a.J);a.sources.has(c);a.sources.set(c,b);return b}Ue.prototype.qg=function(a,b){void 0===b&&(b=2);switch(b){case 0:this.D=a;break;case 1:this.F=a;break;case 2:this.C=a;break;default:return}this.update()};
Ue.prototype.update=function(){var a=this.C*this.F*this.Mf;this.l.gain.setValueAtTime(this.C*this.D*this.Lf,this.R.currentTime);this.o.gain.setValueAtTime(a,this.R.currentTime)};function Xe(a,b,c,d){this.R=a;this.o=this.l=!0;this.D=this.B=this.j=this.g=1;this.C=a.createChannelSplitter(2);this.h=a.createGain();this.i=a.createGain();b.connect(this.C);this.C.connect(this.h,0);this.h.connect(c);this.C.connect(this.i,1);this.i.connect(d)}
Xe.prototype.update=function(){var a=this.o*this.g*this.j*this.D;this.h.gain.setValueAtTime(this.l*this.g*this.j*this.B,this.R.currentTime);this.i.gain.setValueAtTime(a,this.R.currentTime)};Xe.prototype.connect=function(a){var b=!a||2===a;if(b||0===a)this.l=!0;if(b||1===a)this.o=!0;this.update()};Xe.prototype.disconnect=function(a){var b=!a||2===a;if(b||0===a)this.l=!1;if(b||1===a)this.o=!1;this.update()};
Xe.prototype.qg=function(a,b){void 0===b&&(b=2);switch(b){case 0:this.B=a;break;case 1:this.D=a;break;case 2:this.j=a;break;default:return}this.update()};
function Ve(a,b,c){this.Bd=b.createOscillator();this.Bd.type="square";this.Bd.frequency.setValueAtTime(440,b.currentTime);this.g=We(c,this.Bd,1);this.g.disconnect();a.register("pcspeaker-enable",function(){var d=c.sources.get(1);void 0===d||d.connect(void 0)},this);a.register("pcspeaker-disable",function(){var d=c.sources.get(1);void 0===d||d.disconnect(void 0)},this);a.register("pcspeaker-update",function(d){var e=d[1],f=0;3===d[0]&&(f=Math.min(1193181.6665999999/e,this.Bd.frequency.maxValue),f=
Math.max(f,0));this.Bd.frequency.setValueAtTime(f,b.currentTime)},this)}Ve.prototype.start=function(){this.Bd.start()};
function Se(a,b,c){this.A=a;this.R=b;this.enabled=!1;this.Ua=48E3;b=function(){function e(g){if(0===g)return 1;g*=Math.PI;return Math.sin(g)/g}function f(){var g=Reflect.construct(AudioWorkletProcessor,[],f);g.D=3;g.l=Array(1024);g.C=0;g.H=0;g.o=0;g.F=g.l.length;g.B=0;g.J=k;g.g=k;g.L=1;g.j=0;g.i=0;g.h=0;g.port.onmessage=h=>{switch(h.data.type){case "queue":g.aa(h.data.value);break;case "sampling-rate":g.L=h.data.value/sampleRate}};return g}var k=[new Float32Array(256),new Float32Array(256)];Reflect.setPrototypeOf(f.prototype,
AudioWorkletProcessor.prototype);Reflect.setPrototypeOf(f,AudioWorkletProcessor);f.prototype.process=f.prototype.process=function(g,h){for(g=0;g<h[0][0].length;g++){for(var l=0,p=0,q=this.h+this.D,v=this.h-this.D+1;v<=q;v++){var n=this.j+v;l+=this.M(n,0)*this.S(this.i-v);p+=this.M(n,1)*this.S(this.i-v)}if(isNaN(l)||isNaN(p))l=p=0;h[0][0][g]=l;h[0][1][g]=p;this.i+=this.L;this.h=Math.floor(this.i)}h=this.h;h+=this.D+2;this.i-=this.h;this.j+=this.h;this.h=0;this.W(h);return!0};f.prototype.S=function(g){return e(g)*
e(g/this.D)};f.prototype.M=function(g,h){return 0>g?(g+=this.J[0].length,this.J[h][g]):this.g[h][g]};f.prototype.W=function(g){var h=this.g[0].length;h-this.j<g&&(this.$(),this.j-=h)};f.prototype.$=function(){this.J=this.g;this.g=this.U();var g=this.g[0].length;if(256>g){for(var h=this.C,l=0;256>g&&l<this.o;)g+=this.l[h][0].length,h=h+1&this.F-1,l++;g=Math.max(g,256);g=[new Float32Array(g),new Float32Array(g)];g[0].set(this.g[0]);g[1].set(this.g[1]);h=this.g[0].length;for(var p=0;p<l;p++){var q=this.U();
g[0].set(q[0],h);g[1].set(q[1],h);h+=q[0].length}this.g=g}this.Zb()};f.prototype.Zb=function(){1024>this.B/this.L&&this.port.postMessage({type:"pump"})};f.prototype.aa=function(g){this.o<this.F&&(this.l[this.H]=g,this.H=this.H+1&this.F-1,this.o++,this.B+=g[0].length,this.Zb())};f.prototype.U=function(){if(!this.o)return k;var g=this.l[this.C];this.l[this.C]=null;this.C=this.C+1&this.F-1;this.o--;this.B-=g[0].length;return g};registerProcessor("dac-processor",f)}.toString();var d=URL.createObjectURL(new Blob([b.substring(b.indexOf("{")+
1,b.lastIndexOf("}"))],{type:"application/javascript"}));this.tc=null;this.g=this.R.createGain();this.R.audioWorklet.addModule(d).then(()=>{URL.revokeObjectURL(d);this.tc=new AudioWorkletNode(this.R,"dac-processor",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[2],parameterData:{},processorOptions:{}});this.tc.port.postMessage({type:"sampling-rate",value:this.Ua});this.tc.port.onmessage=e=>{switch(e.data.type){case "pump":this.Zb()}};this.tc.connect(this.g)});this.h=We(c,this.g,2);this.h.g=
3;a.register("dac-send-data",function(e){this.hf(e)},this);a.register("dac-enable",function(){this.enabled=!0},this);a.register("dac-disable",function(){this.enabled=!1},this);a.register("dac-tell-sampling-rate",function(e){this.Ua=e;this.tc&&this.tc.port.postMessage({type:"sampling-rate",value:e})},this)}Se.prototype.hf=function(a){this.tc&&this.tc.port.postMessage({type:"queue",value:a},[a[0].buffer,a[1].buffer])};Se.prototype.Zb=function(){this.enabled&&this.A.send("dac-request-data")};
function Te(a,b,c){this.A=a;this.R=b;this.enabled=!1;this.Ua=22050;this.g=0;this.ce=1;this.Ee=this.R.createBiquadFilter();this.Ee.type="lowpass";this.i=this.Ee;this.h=We(c,this.i,2);this.h.g=3;a.register("dac-send-data",function(d){this.hf(d)},this);a.register("dac-enable",function(){this.enabled=!0;this.Zb()},this);a.register("dac-disable",function(){this.enabled=!1},this);a.register("dac-tell-sampling-rate",function(d){this.Ua=d;this.ce=Math.ceil(8E3/d);this.Ee.frequency.setValueAtTime(d/2,this.R.currentTime)},
this)}
Te.prototype.hf=function(a){var b=a[0].length,c=b/this.Ua;if(1<this.ce){var d=this.R.createBuffer(2,b*this.ce,this.Ua*this.ce);for(var e=d.getChannelData(0),f=d.getChannelData(1),k=0,g=0;g<b;g++)for(var h=0;h<this.ce;h++,k++)e[k]=a[0][g],f[k]=a[1][g]}else d=this.R.createBuffer(2,b,this.Ua),d.copyToChannel?(d.copyToChannel(a[0],0),d.copyToChannel(a[1],1)):(d.getChannelData(0).set(a[0]),d.getChannelData(1).set(a[1]));a=this.R.createBufferSource();a.buffer=d;a.connect(this.Ee);a.addEventListener("ended",this.Zb.bind(this));
d=this.R.currentTime;if(this.g<d)for(this.g=d,d=.2-c,b=0;b<=d;)b+=c,this.g+=c,setTimeout(()=>this.Zb(),1E3*b);a.start(this.g);this.g+=c;setTimeout(()=>this.Zb(),0)};Te.prototype.Zb=function(){this.enabled&&(.2<this.g-this.R.currentTime||this.A.send("dac-request-data"))};function Ye(a,b){this.A=b;this.g=void 0;this.h=[];this.url=a;this.i=Date.now()-1E4;this.A.register("net0-send",function(c){this.send(c)},this)}m=Ye.prototype;m.$g=function(a){this.A&&this.A.send("net0-receive",new Uint8Array(a.data))};m.Yg=function(){this.connect();setTimeout(this.connect.bind(this),1E4)};m.ah=function(){for(var a=0;a<this.h.length;a++)this.send(this.h[a]);this.h=[]};m.Zg=function(){};m.Ea=function(){this.g&&this.g.close()};
m.connect=function(){if("undefined"!==typeof WebSocket){if(this.g){var a=this.g.readyState;if(0===a||1===a)return}this.i+1E4>Date.now()||(this.i=Date.now(),this.g=new WebSocket(this.url),this.g.binaryType="arraybuffer",this.g.onopen=this.ah.bind(this),this.g.onmessage=this.$g.bind(this),this.g.onclose=this.Yg.bind(this),this.g.onerror=this.Zg.bind(this))}};m.send=function(a){this.g&&1===this.g.readyState?this.g.send(a):(this.h.push(a),128<this.h.length&&(this.h=this.h.slice(-64)),this.connect())};(function(){function a(g,h){var l=new XMLHttpRequest;l.open(h.method||"get",g,!0);l.responseType=h.nd?"json":"arraybuffer";if(h.headers)for(var p=Object.keys(h.headers),q=0;q<p.length;q++){var v=p[q];l.setRequestHeader(v,h.headers[v])}h.Dd&&(p=h.Dd.start,l.setRequestHeader("Range","bytes="+p+"-"+(p+h.Dd.length-1)),l.onreadystatechange=function(){200===l.status&&l.abort()});l.onload=function(){4===l.readyState&&(200!==l.status&&206!==l.status?console.error("Loading the image `"+g+"` failed (status %d)",
l.status):l.response&&h.done&&h.done(l.response,l))};h.progress&&(l.onprogress=function(n){h.progress(n)});l.send(null)}function b(g,h){let l=require("fs");h.Dd?l.open(g,"r",(p,q)=>{if(p)throw p;p=h.Dd.length;var v=Buffer.allocUnsafe(p);l.read(q,v,0,p,h.Dd.start,n=>{if(n)throw n;h.done&&h.done(new Uint8Array(v));l.close(q,r=>{if(r)throw r;})})}):l.readFile(g,{encoding:h.nd?"utf-8":null},function(p,q){p?console.log("Could not read file:",g,p):(p=q,h.nd?p=JSON.parse(p):p=(new Uint8Array(p)).buffer,
h.done(p))})}function c(g,h){this.filename=g;this.g=256;this.byteLength=h;this.h=Object.create(null);this.onload=void 0}function d(g,h,l){const p=g.match(/(.*)(\..*)/);p?(this.j=p[1],this.l=p[2]):(this.j=g,this.l="");this.g=256;this.byteLength=h;this.B="number"==typeof l;this.i=l;this.h=Object.create(null);this.onload=void 0}function e(g){this.g=g;this.byteLength=g.size;1073741824<g.size&&console.warn("SyncFileBuffer: Allocating buffer of "+(g.size>>20)+" MB ...");this.buffer=new ArrayBuffer(g.size);
this.onload=void 0}function f(g){this.i=g;this.byteLength=g.size;this.g=256;this.h=Object.create(null);this.onload=void 0}"undefined"===typeof XMLHttpRequest?jb=b:jb=a;kb=c;lb=d;mb=f;Ta=e;nb=function(g,h,l){return String.fromCharCode(...new Uint8Array(g.buffer,h>>>0,l>>>0))};var k="undefined"===typeof XMLHttpRequest?function(g,h){require("fs").stat(g,(l,p)=>{l?h(l):h(null,p.size)})}:function(g,h){jb(g,{done:(l,p)=>{l=p.getResponseHeader("Content-Range")||"";(p=l.match(/\/(\d+)\s*$/))?h(null,+p[1]):
h("`Range: bytes=...` header not supported (Got `"+l+"`)")},headers:{Range:"bytes=0-0"}})};c.prototype.load=function(){void 0!==this.byteLength?this.onload&&this.onload(Object.create(null)):k(this.filename,(g,h)=>{if(g)throw Error("Cannot use: "+this.filename+". "+g);this.byteLength=h;this.onload&&this.onload(Object.create(null))})};c.prototype.i=function(g,h){var l=h/this.g;g/=this.g;for(var p=0;p<l;p++)if(!this.h[g+p])return;if(1===l)return this.h[g];h=new Uint8Array(h);for(p=0;p<l;p++)h.set(this.h[g+
p],p*this.g);return h};c.prototype.get=function(g,h,l){console.assert(g+h<=this.byteLength);console.assert(0===g%this.g);console.assert(0===h%this.g);console.assert(h);var p=this.i(g,h,l);p?l(p):jb(this.filename,{done:function(q){q=new Uint8Array(q);this.j(g,h,q);l(q)}.bind(this),Dd:{start:g,length:h}})};c.prototype.set=function(g,h,l){console.assert(g+h.byteLength<=this.byteLength);var p=h.length;console.assert(0===g%this.g);console.assert(0===p%this.g);console.assert(p);g/=this.g;p/=this.g;for(var q=
0;q<p;q++){var v=this.h[g+q];void 0===v&&(v=this.h[g+q]=new Uint8Array(this.g));var n=h.subarray(q*this.g,(q+1)*this.g);v.set(n);console.assert(v.byteLength===n.length)}l()};c.prototype.j=function(g,h,l){g/=this.g;h/=this.g;for(var p=0;p<h;p++){var q=this.h[g+p];q&&l.set(q,p*this.g)}};c.prototype.Tb=function(g){g()};c.prototype.V=function(){const g=[],h=[];for(let [l,p]of Object.entries(this.h))h.push([+l,p]);g[0]=h;return g};c.prototype.G=function(g){g=g[0];this.h=Object.create(null);for(let [h,
l]of Object.values(g))this.h[h]=l};d.prototype.load=function(){this.onload&&this.onload(Object.create(null))};d.prototype.o=c.prototype.i;d.prototype.get=function(g,h,l){console.assert(g+h<=this.byteLength);console.assert(0===g%this.g);console.assert(0===h%this.g);console.assert(h);var p=this.o(g,h,l);if(p)l(p);else if(this.B){const n=parseInt(g/this.i,void 0)*this.i,r=g-n,y=parseInt(h/this.i,void 0)+2;var q=new Uint8Array(r+y*this.i),v=0;for(p=0;p<y;p++){const z=p*this.i;jb(this.j+"-"+(z+n)+this.l,
{done:function(D){D=new Uint8Array(D);q.set(D,z);D=q.slice(r,r+h);v++;v==y&&l(D)}.bind(this)})}}else jb(this.j+"-"+g+"-"+(g+h)+this.l,{done:function(n){n=new Uint8Array(n);this.C(g,h,n);l(n)}.bind(this)})};d.prototype.set=c.prototype.set;d.prototype.C=c.prototype.j;d.prototype.V=c.prototype.V;d.prototype.G=c.prototype.G;e.prototype.load=function(){this.h(0)};e.prototype.h=function(g){var h=new FileReader;h.onload=function(l){l=new Uint8Array(l.target.result);(new Uint8Array(this.buffer,g)).set(l);
this.h(g+4194304)}.bind(this);g<this.byteLength?h.readAsArrayBuffer(this.g.slice(g,Math.min(g+4194304,this.byteLength))):(this.g=void 0,this.onload&&this.onload({buffer:this.buffer}))};e.prototype.get=function(g,h,l){console.assert(g+h<=this.byteLength);l(new Uint8Array(this.buffer,g,h))};e.prototype.set=function(g,h,l){console.assert(g+h.byteLength<=this.byteLength);(new Uint8Array(this.buffer,g,h.byteLength)).set(h);l()};e.prototype.Tb=function(g){g(this.buffer)};e.prototype.V=function(){const g=
[];g[0]=this.byteLength;g[1]=new Uint8Array(this.buffer);return g};e.prototype.G=function(g){this.byteLength=g[0];this.buffer=g[1].slice().buffer};f.prototype.load=function(){this.onload&&this.onload(Object.create(null))};f.prototype.get=function(g,h,l){console.assert(0===g%this.g);console.assert(0===h%this.g);console.assert(h);var p=this.j(g,h,l);p?l(p):(p=new FileReader,p.onload=function(q){q=new Uint8Array(q.target.result);this.l(g,h,q);l(q)}.bind(this),p.readAsArrayBuffer(this.i.slice(g,g+h)))};
f.prototype.j=c.prototype.i;f.prototype.set=c.prototype.set;f.prototype.l=c.prototype.j;f.prototype.V=c.prototype.V;f.prototype.Tb=function(g){g()}})();function Na(a){this.Od=!1;const b=Pd();this.A=b[0];this.zd=b[1];var c,d;const e=new WebAssembly.Table({element:"anyfunc",initial:1924}),f={cpu_exception_hook:h=>this.cpu_exception_hook&&this.cpu_exception_hook(h),hlt_op:function(){var h=c;0===(h.B()&512)&&h.A.send("cpu-event-halt");h.h[0]=1;ab(h)},abort:function(){},logop:function(){return c.debug.jh()},microtick:L,get_rand_int:function(){return pb()},pic_acknowledge:function(){Zd(c)},io_port_read8:function(h){h=c.v.ports[h];return h.Ed.call(h.ha)},
io_port_read16:function(h){h=c.v.ports[h];return h.Ga.call(h.ha)},io_port_read32:function(h){h=c.v.ports[h];return h.de.call(h.ha)},io_port_write8:function(h,l){h=c.v.ports[h];h.vg.call(h.ha,l)},io_port_write16:function(h,l){h=c.v.ports[h];h.oe.call(h.ha,l)},io_port_write32:function(h,l){h=c.v.ports[h];h.Dc.call(h.ha,l)},mmap_read8:function(h){return c.l[h>>>17](h)},mmap_read16:function(h){var l=c.l[h>>>17];return l(h)|l(h+1|0)<<8},mmap_read32:function(h){return c.Ja[h>>>17](h)},mmap_write8:function(h,
l){c.C[h>>>17](h,l)},mmap_write16:function(h,l){var p=c.C[h>>>17];p(h,l&255);p(h+1|0,l>>8)},mmap_write32:function(h,l){c.o[h>>>17](h,l)},mmap_write64:function(h,l,p){var q=c.o[h>>>17];q(h,l);q(h+4,p)},mmap_write128:function(h,l,p,q,v){var n=c.o[h>>>17];n(h,l);n(h+4,p);n(h+8,q);n(h+12,v)},log_from_wasm:function(h,l){nb(d,h,l)},console_log_from_wasm:function(h,l){h=nb(d,h,l);console.error(h)},dbg_trace_from_wasm:function(){},codegen_finalize:(h,l,p,q,v)=>{Yd(c,h,l,p,q,v)},jit_clear_func:h=>{c.ra.Re.set(h+
1024,null)},jit_clear_all_funcs:()=>{{const h=c.ra.Re;for(let l=0;900>l;l++)h.set(1024+l,null)}},__indirect_function_table:e};let k="v86.wasm",g="v86-fallback.wasm";a.wasm_path?k=a.wasm_path:"undefined"===typeof window&&"string"===typeof __dirname?(k=__dirname+"/"+k,g=__dirname+"/"+g):(k="build/"+k,g="build/"+g);jb(k,{done:h=>{WebAssembly.instantiate(h,{env:f}).then(({instance:l})=>{l=l.exports;d=l.memory;l.rust_init();l=this.h=new Ya(this.zd,{exports:l,Re:e});c=l.s;Ze(this,l,a)},()=>{jb(g,{done:l=>
{WebAssembly.instantiate(l,{env:f}).then(({instance:p})=>{p=p.exports;d=p.memory;p.rust_init();p=this.h=new Ya(this.zd,{exports:p,Re:e});c=p.s;Ze(this,p,a)})}})})},progress:h=>{this.zd.send("download-progress",{Vd:0,Ud:1,Wd:k,lengthComputable:h.lengthComputable,total:h.total,loaded:h.loaded})}})}
async function Ze(a,b,c){function d(n,r){switch(n){case "hda":k.ab=this.dc.hda=r;break;case "hdb":k.dh=this.dc.hdb=r;break;case "cdrom":k.sd=this.dc.cdrom=r;break;case "fda":k.we=this.dc.fda=r;break;case "fdb":k.Vg=this.dc.fdb=r;break;case "multiboot":k.Sf=this.dc.multiboot=r.buffer;break;case "bzimage":k.se=this.dc.bzimage=r.buffer;break;case "initrd":k.Ye=this.dc.initrd=r.buffer;break;case "bios":k.pd=r.buffer;break;case "vga_bios":k.kj=r.buffer;break;case "initial_state":k.Pc=r.buffer;break;case "fs9p_json":k.Kf=
r}}function e(n,r){if(r)if(r.get&&r.set&&r.load)g.push({name:n,Sc:r});else{r={buffer:r.buffer,async:r.async,url:r.url,size:r.size,step:r.step,Qe:r.Qe};if("bios"===n||"vga_bios"===n||"initial_state"===n||"multiboot"===n||"bzimage"===n||"initrd"===n)r.async=!1;r.buffer instanceof ArrayBuffer?(r=new qb(r.buffer),g.push({name:n,Sc:r})):"undefined"!==typeof File&&r.buffer instanceof File?(void 0===r.async&&(r.async=268435456<=r.buffer.size),r=r.async?new mb(r.buffer):new Ta(r.buffer),g.push({name:n,Sc:r})):
r.url&&(r.async?(r=r.Qe?new lb(r.url,r.size,r.step):new kb(r.url,r.size),g.push({name:n,Sc:r})):g.push({name:n,url:r.url,size:r.size}))}}function f(){function n(){this.A.send("cpu-init",k);k.Pc&&(b.Gd(k.Pc),k.Pc=void 0);c.autostart&&this.A.send("cpu-run");this.zd.send("emulator-loaded")}if(k.wb&&k.Kf)if(k.Pc||ke(k.wb,k.Kf),c.bzimage_initrd_from_filesystem){const {se:r,Ye:y}=$e(k.wb);Promise.all([k.wb.ee(y),k.wb.ee(r)]).then(([z,D])=>{d.call(this,"initrd",new qb(z.buffer));d.call(this,"bzimage",new qb(D.buffer));
n.call(this)})}else n.call(this);else console.assert(!c.bzimage_initrd_from_filesystem,"bzimage_initrd_from_filesystem: Requires a filesystem"),n.call(this)}a.A.register("emulator-stopped",function(){this.Od=!1},a);a.A.register("emulator-started",function(){this.Od=!0},a);var k={};a.dc={fda:void 0,fdb:void 0,hda:void 0,hdb:void 0,cdrom:void 0};k.Ec=c.acpi;k.ih=!0;k.Tj=c.log_level;k.la=c.memory_size||67108864;k.oa=c.vga_memory_size||8388608;k.Ic=c.boot_order||531;k.Ug=c.fastboot||!1;k.we=void 0;k.Vg=
void 0;k.ke=c.uart1;k.le=c.uart2;k.me=c.uart3;k.Cg=c.cmdline;k.Cd=c.preserve_mac_from_state_image;c.network_adapter?a.l=c.network_adapter(a.A):c.network_relay_url&&(a.l=new Ye(c.network_relay_url,a.A));k.Sg=!0;c.disable_keyboard||(a.j=new Pe(a.A));c.disable_mouse||(a.i=new Qe(a.A,c.screen_container));c.screen_container?a.g=new La(c.screen_container,a.A):c.screen_dummy&&(a.g=new af(a.A));c.disable_speaker||new Re(a.A);var g=[];c.state&&console.warn("Warning: Unknown option 'state'. Did you mean 'initial_state'?");
for(var h="bios vga_bios cdrom hda hdb fda fdb initial_state multiboot bzimage initrd".split(" "),l=0;l<h.length;l++)e(h[l],c[h[l]]);if(c.filesystem){h=c.filesystem.basefs;l=c.filesystem.baseurl;let n=new bf;l&&(n=new cf(n,l));k.wb=a.wb=new ie(n);if(h){console.assert(l,"Filesystem: baseurl must be specified");if("object"===typeof h){var p=h.size;h=h.url}g.push({name:"fs9p_json",url:h,size:p,nd:!0})}}var q=g.length,v=function(n){if(n===q)setTimeout(f.bind(this),0);else{var r=g[n];r.Sc?(r.Sc.onload=
function(){d.call(this,r.name,r.Sc);v(n+1)}.bind(this),r.Sc.load()):jb(r.url,{done:function(y){d.call(this,r.name,r.nd?y:new qb(y));v(n+1)}.bind(this),progress:function(y){200===y.target.status?a.zd.send("download-progress",{Vd:n,Ud:q,Wd:r.url,lengthComputable:y.lengthComputable,total:y.total||r.size,loaded:y.loaded}):a.zd.send("download-error",{Vd:n,Ud:q,Wd:r.url,request:y.target})},nd:r.nd})}}.bind(a);v(0)}
function $e(a){const b=(Me(a,"/")||[]).map(e=>"/"+e);a=(Me(a,"/boot/")||[]).map(e=>"/boot/"+e);let c,d;for(let e of[].concat(b,a)){const f=/old/i.test(e)||/fallback/i.test(e),k=/initrd/i.test(e)||/initramfs/i.test(e);!/vmlinuz/i.test(e)&&!/bzimage/i.test(e)||d&&f||(d=e);!k||c&&f||(c=e)}c&&d||(console.log("Failed to find bzimage or initrd in filesystem. Files:"),console.log(b.join(" ")),console.log(a.join(" ")));return{Ye:c,se:d}}m=Na.prototype;m.Me=function(){this.A.send("cpu-run")};m.stop=function(){this.A.send("cpu-stop")};
m.Ea=function(){this.stop();this.h.Ea();this.j&&this.j.Ea();this.l&&this.l.Ea();this.i&&this.i.Ea();this.g&&this.g.Ea()};m.jf=function(){this.A.send("cpu-restart")};function Oa(a,b,c){a.A.register(b,c,a)}m.Gd=function(a){this.h.Gd(a)};m.fe=function(a){setTimeout(function(){try{a(null,this.h.fe())}catch(b){a(b,null)}}.bind(this),0)};function Qa(a,b){for(var c=0;c<b.length;c++)a.A.send("keyboard-code",b[c])}function Ma(a,b){for(var c=0;c<b.length;c++)a.j.Zi(b[c])}
function Ra(){var a=document.body,b=a.requestPointerLock||a.mozRequestPointerLock||a.webkitRequestPointerLock;b&&b.call(a)}function Ua(a,b,c){var d=d||function(){};if(a=a.wb){var e=b.split("/");e=e[e.length-1];b=He(a,b).ef;""!==e&&-1!==b?te(a,e,b,c).then(()=>d(null)):setTimeout(function(){d(new df)},0)}}m.ee=function(a,b){var c=this.wb;c&&c.ee(a).then(d=>{d?b(null,d):b(new df,null)})};function df(){this.message="File not found"}df.prototype=Error.prototype;
"undefined"!==typeof window?(window.V86Starter=Na,window.V86=Na):"undefined"!==typeof module&&"undefined"!==typeof module.exports?(module.exports.V86Starter=Na,module.exports.V86=Na):"function"===typeof importScripts&&(self.V86Starter=Na,self.V86=Na);function af(a){var b,c,d,e,f,k,g;this.A=a;a.register("screen-set-mode",function(h){this.lf(h)},this);a.register("screen-fill-buffer-end",function(h){this.sf(h[0])},this);a.register("screen-put-char",function(h){this.gf(h[0],h[1],h[2],h[3],h[4])},this);a.register("screen-text-scroll",function(h){console.log("scroll",h)},this);a.register("screen-update-cursor",function(h){this.kd(h[0],h[1])},this);a.register("screen-update-cursor-scanline",function(){this.ld()},this);a.register("screen-set-size-text",
function(h){this.fd(h[0],h[1])},this);a.register("screen-set-size-graphical",function(h){this.ed(h[0],h[1])},this);this.gf=function(h,l,p,q,v){h<g&&l<k&&(h=3*(h*k+l),f[h]=p,f[h+1]=q,f[h+2]=v)};this.Ea=function(){};this.lf=function(){};this.zf=function(){};this.fd=function(h,l){if(h!==k||l!==g)f=new Int32Array(h*l*3),k=h,g=l};this.ed=function(h,l){b=new Uint8Array(4*h*l);c=new Int32Array(b.buffer);this.A.send("screen-tell-buffer",[c],[c.buffer])};this.mf=function(){};this.ld=function(){};this.kd=function(h,
l){if(h!==d||l!==e)d=h,e=l};this.sf=function(){}};const Pa={aj:function(a){return Pa.Pi(a)+Pa.Oi(a)},Pi:function(a){let b="";var c="COMPILE COMPILE_SKIPPED_NO_NEW_ENTRY_POINTS COMPILE_SUCCESS COMPILE_WRONG_ADDRESS_SPACE COMPILE_CUT_OFF_AT_END_OF_PAGE COMPILE_WITH_LOOP_SAFETY COMPILE_PAGE COMPILE_PAGE/COMPILE_SUCCESS COMPILE_PAGE_SKIPPED_NO_NEW_ENTRY_POINTS COMPILE_BASIC_BLOCK COMPILE_DUPLICATED_BASIC_BLOCK COMPILE_WASM_BLOCK COMPILE_WASM_LOOP COMPILE_DISPATCHER COMPILE_ENTRY_POINT COMPILE_WASM_TOTAL_BYTES COMPILE_WASM_TOTAL_BYTES/COMPILE_PAGE JIT_CACHE_OVERRIDE JIT_CACHE_OVERRIDE_DIFFERENT_STATE_FLAGS RUN_INTERPRETED RUN_INTERPRETED_PENDING RUN_INTERPRETED_NEAR_END_OF_PAGE RUN_INTERPRETED_DIFFERENT_STATE RUN_INTERPRETED_MISSED_COMPILED_ENTRY_RUN_INTERPRETED RUN_INTERPRETED_MISSED_COMPILED_ENTRY_LOOKUP RUN_INTERPRETED_STEPS RUN_FROM_CACHE RUN_FROM_CACHE_STEPS RUN_FROM_CACHE_STEPS/RUN_FROM_CACHE RUN_FROM_CACHE_STEPS/RUN_INTERPRETED_STEPS DIRECT_EXIT INDIRECT_JUMP INDIRECT_JUMP_NO_ENTRY NORMAL_PAGE_CHANGE NORMAL_FALLTHRU NORMAL_FALLTHRU_WITH_TARGET_BLOCK NORMAL_BRANCH NORMAL_BRANCH_WITH_TARGET_BLOCK CONDITIONAL_JUMP CONDITIONAL_JUMP_PAGE_CHANGE CONDITIONAL_JUMP_EXIT CONDITIONAL_JUMP_FALLTHRU CONDITIONAL_JUMP_FALLTHRU_WITH_TARGET_BLOCK CONDITIONAL_JUMP_BRANCH CONDITIONAL_JUMP_BRANCH_WITH_TARGET_BLOCK DISPATCHER_SMALL DISPATCHER_LARGE LOOP LOOP_SAFETY CONDITION_OPTIMISED CONDITION_UNOPTIMISED FAILED_PAGE_CHANGE SAFE_READ_FAST SAFE_READ_SLOW_PAGE_CROSSED SAFE_READ_SLOW_NOT_VALID SAFE_READ_SLOW_NOT_USER SAFE_READ_SLOW_IN_MAPPED_RANGE SAFE_WRITE_FAST SAFE_WRITE_SLOW_PAGE_CROSSED SAFE_WRITE_SLOW_NOT_VALID SAFE_WRITE_SLOW_NOT_USER SAFE_WRITE_SLOW_IN_MAPPED_RANGE SAFE_WRITE_SLOW_READ_ONLY SAFE_WRITE_SLOW_HAS_CODE SAFE_READ_WRITE_FAST SAFE_READ_WRITE_SLOW_PAGE_CROSSED SAFE_READ_WRITE_SLOW_NOT_VALID SAFE_READ_WRITE_SLOW_NOT_USER SAFE_READ_WRITE_SLOW_IN_MAPPED_RANGE SAFE_READ_WRITE_SLOW_READ_ONLY SAFE_READ_WRITE_SLOW_HAS_CODE PAGE_FAULT TLB_MISS DO_RUN DO_MANY_CYCLES CYCLE_INTERNAL INVALIDATE_ALL_MODULES_NO_FREE_WASM_INDICES INVALIDATE_MODULE_WRITTEN_WHILE_COMPILED INVALIDATE_MODULE_UNUSED_AFTER_OVERWRITE INVALIDATE_MODULE_DIRTY_PAGE INVALIDATE_PAGE_HAD_CODE INVALIDATE_PAGE_HAD_ENTRY_POINTS DIRTY_PAGE_DID_NOT_HAVE_CODE RUN_FROM_CACHE_EXIT_SAME_PAGE RUN_FROM_CACHE_EXIT_NEAR_END_OF_PAGE RUN_FROM_CACHE_EXIT_DIFFERENT_PAGE CLEAR_TLB FULL_CLEAR_TLB TLB_FULL TLB_GLOBAL_FULL MODRM_SIMPLE_REG MODRM_SIMPLE_REG_WITH_OFFSET MODRM_SIMPLE_CONST_OFFSET MODRM_COMPLEX SEG_OFFSET_OPTIMISED SEG_OFFSET_NOT_OPTIMISED".split(" "),
d=0;const e={};for(let k=0;k<c.length;k++){const g=c[k];var f=void 0;if(g.includes("/")){d++;const [h,l]=g.split("/");f=e[h]/e[l]}else f=e[g]=a.ra.exports.profiler_stat_get(k-d),f=1E8<=f?Math.round(f/1E6)+"m":1E5<=f?Math.round(f/1E3)+"k":f;b+=g+"="+f+"\n"}b+="\n";c=a.ra.exports.get_valid_tlb_entries_count();d=a.ra.exports.get_valid_global_tlb_entries_count();b=b+("TLB_ENTRIES="+c+" ("+d+" global, "+(c-d)+" non-global)\nWASM_TABLE_FREE=")+(a.ra.exports.jit_get_wasm_table_index_free_list_count()+"\n");
b+="JIT_CACHE_SIZE="+a.ra.exports.jit_get_cache_size()+"\n";b+="FLAT_SEGMENTS="+a.ra.exports.has_flat_segmentation()+"\n";b+="do_many_cycles avg: "+(a.Cj/a.Bj||0)+"\n";b+="wasm memory size: "+(a.ac.buffer.byteLength>>20)+"m\n";b=b+"Config:\nMAX_PAGES="+(a.ra.exports.get_config(0)+"\n");b+="JIT_USE_LOOP_SAFETY="+a.ra.exports.get_config(1)+"\n";return b+="MAX_EXTRA_BASIC_BLOCKS="+a.ra.exports.get_config(2)+"\n"},Oi:function(a){return[Pa.be(a,!1,!1,!1,!1),Pa.be(a,!0,!1,!1,!1),Pa.be(a,!1,!0,!1,!1),Pa.be(a,
!1,!1,!0,!1),Pa.be(a,!1,!1,!1,!0)].join("\n\n")},be:function(a,b,c,d,e){let f="";var k=[],g=b?"compiled":c?"jit exit":d?"unguarded register":e?"wasm size":"executed";for(let p=0;256>p;p++)for(let q=0;8>q;q++)for(let v of[!1,!0]){var h=a.ra.exports.get_opstats_buffer(b,c,d,e,p,!1,v,q);k.push({Fe:p,count:h,Pf:v,If:q});h=a.ra.exports.get_opstats_buffer(b,c,d,e,p,!0,v,q);k.push({Fe:3840|p,count:h,Pf:v,If:q})}a=0;b=new Set([38,46,54,62,100,101,102,103,240,242,243]);for(let {count:p,Fe:q}of k)b.has(q)||
(a+=p);if(0===a)return"";c=new Uint32Array(256);b=new Uint32Array(256);for(let {Fe:p,count:q}of k)3840==(p&65280)?b[p&255]+=q:c[p&255]+=q;f=f+"------------------\nTotal: "+(a+"\n");const l=1E7<a?1E3:1;d=Math.max.apply(Math,k.map(({count:p})=>Math.round(p/l)));d=String(d).length;f+=`Instruction counts ${g} (in ${l}):\n`;for(e=0;256>e;e++)f+=O(e,2).slice(2)+":"+ob(Math.round(c[e]/l),d),f=15==e%16?f+"\n":f+" ";f=f+"\n"+`Instruction counts ${g} (0f, in ${l}):\n`;for(g=0;256>g;g++)f+=O(g&255,2).slice(2)+
":"+ob(Math.round(b[g]/l),d),f=15==g%16?f+"\n":f+" ";f+="\n";k=k.filter(({count:p})=>p).sort(({count:p},{count:q})=>q-p);for(let {Fe:p,Pf:q,If:v,count:n}of k.slice(0,200))f+=p.toString(16)+"_"+v+(q?"_m":"_r")+":"+(n/a*100).toFixed(2)+" ";return f+"\n"}};"undefined"!==typeof module&&"undefined"!==typeof module.exports&&(module.exports.print_stats=Pa);function bf(){this.h=new Map}bf.prototype.read=async function(a,b,c){return(a=this.h.get(a))?a.subarray(b,b+c):null};bf.prototype.cache=async function(a,b){this.h.set(a,b)};bf.prototype.g=function(a){this.h.delete(a)};function cf(a,b){this.h=a;this.i=b}function ef(a,b){return new Promise(c=>{jb(a.i+b,{done:d=>{const e=new Uint8Array(d);a.cache(b,e).then(()=>c(e))}})})}cf.prototype.read=async function(a,b,c){const d=await this.h.read(a,b,c);return d?d:(await ef(this,a)).subarray(b,b+c)};
cf.prototype.cache=async function(a,b){return await this.h.cache(a,b)};cf.prototype.g=function(a){this.h.g(a)};"undefined"!==typeof window?(window.MemoryFileStorage=bf,window.ServerFileStorageWrapper=cf):"undefined"!==typeof module&&"undefined"!==typeof module.exports?(module.exports.MemoryFileStorage=bf,module.exports.ServerFileStorageWrapper=cf):"function"===typeof importScripts&&(self.MemoryFileStorage=bf,self.ServerFileStorageWrapper=cf);
